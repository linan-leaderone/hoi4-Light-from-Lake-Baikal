###############################
###  ECON MECHANIC EFFECTS  ###
###############################
# Yeet

# Search for the section you want to go, keep all effects in the relevant section

# Index
# 1.0.0 Business Opinion
#	1.1.0 Increase/Decrease Business Opinion
#		1.1.1 USA Business Opinion
#		1.1.2 Japan Business Opinion
#
# 2.0.0 Set State Stats (Debt/GDP/Etc.)
#
# 3.0.0 Economic Effects
#	3.1.0 Base Stimulation
#	3.2.0 Current Stimulation
#	3.3.0 Stimulation Decay
#	3.4.0 Agronomic Productivity
#	3.5.0 Cash/Staple Crop
#	3.6.0 Base Migration Change
#	3.7.0 Rural/Urban Percentage
#	3.8.0 Unemployment Percent
#	3.9.0 Urban Quality of Life
#	3.10.0 Rural Quality of Life
#
# 4.0.0 The actual effects themselves
#
# 5.0.0 Backend Effects
#	5.1.0 Region ids to scope to
#	5.2.0 Projects
#
# 6.0.0 Graphs freaky magic shit
#
# 7.0.0 Econ Dynmods


## 1. Business Opinion
## 2. Econ Mechanic
### 2.a. Frontend effects
### 2.b. Backend effects

# 1.0.0 Business Opinion
## BUSINESS OPINION DYNMOD ##
MEX_calc_miracle_values = { ## MEXICAN MIRACLE DYNMOD ##
	# Opinion variable clamps, min -25 max 25
	clamp_variable = { var = MEX_USA_business_opinion min = -25 max = 25 }
	clamp_variable = { var = MEX_JAP_business_opinion min = -25 max = 25 }
	set_temp_variable = { MEX_USA_opinion_temp = MEX_USA_business_opinion }
	set_temp_variable = { MEX_JAP_opinion_temp = MEX_JAP_business_opinion }

	# Value setup, change later

	set_variable = { MEX_USA_miracle_resources = 0.15 }
	set_variable = { MEX_USA_miracle_consumer_goods_use = -0.1 }
	set_variable = { MEX_JAP_miracle_annual_gdp = 0.1 }
	set_variable = { MEX_JAP_miracle_construction_speed = 0.1 }
	set_variable = { MEX_MEX_miracle_stability = 0.15 }
	set_variable = { MEX_MEX_miracle_pp_gain = 0.5 }
	set_variable = { MEX_MEX_miracle_monthly_poverty = 0.1 }

	## FORMULA: ((Opinion/25) * base values) * (100% + influence%)

	# Initial calc vs opinion
	# Acquire value/100
	divide_temp_variable = { MEX_USA_opinion_temp = 25 }
	divide_temp_variable = { MEX_JAP_opinion_temp = 25 }

	# Multiply /100 value with base
	multiply_variable = { MEX_USA_miracle_resources = MEX_USA_opinion_temp }
	multiply_variable = { MEX_USA_miracle_consumer_goods_use = MEX_USA_opinion_temp }
	multiply_variable = { MEX_JAP_miracle_annual_gdp = MEX_JAP_opinion_temp }
	multiply_variable = { MEX_JAP_miracle_construction_speed = MEX_JAP_opinion_temp }

	# Calculate mexico
	multiply_variable = { MEX_MEX_miracle_stability = MEX_SBBFM_Mexico_pct }
	divide_variable = { MEX_MEX_miracle_stability = 100 }
	multiply_variable = { MEX_MEX_miracle_pp_gain = MEX_SBBFM_Mexico_pct }
	divide_variable = { MEX_MEX_miracle_pp_gain = 100 }
	multiply_variable = { MEX_MEX_miracle_monthly_poverty = MEX_SBBFM_Mexico_pct }
	divide_variable = { MEX_MEX_miracle_monthly_poverty = 100 }

	# Pit acquired value against influence
	set_temp_variable = { MEX_american_influence_temp = MEX_SBBFM_USA_pct }
	set_temp_variable = { MEX_japanese_influence_temp = MEX_SBBFM_Japan_pct }
	divide_temp_variable = { MEX_american_influence_temp = 100 }
	divide_temp_variable = { MEX_japanese_influence_temp = 100 }
	add_to_temp_variable = { MEX_american_influence_temp = 1 }
	add_to_temp_variable = { MEX_japanese_influence_temp = 1 }

	multiply_variable = { MEX_USA_miracle_resources = MEX_american_influence_temp }
	multiply_variable = { MEX_USA_miracle_consumer_goods_use = MEX_american_influence_temp }
	multiply_variable = { MEX_JAP_miracle_annual_gdp = MEX_japanese_influence_temp }
	multiply_variable = { MEX_JAP_miracle_construction_speed = MEX_japanese_influence_temp }

	set_variable = { MEX_miracle_poverty_disp = MEX_MEX_miracle_monthly_poverty }
	multiply_variable = { MEX_miracle_poverty_disp = -1 }
}

#	1.1.0 Increase/Decrease Business Opinion
# VargCBT Business Opinion Effects #

#		1.1.1 USA Business Opinion
MEX_increase_usa_business_opinion_low = {
	MEX = {
		custom_effect_tooltip = MEX_increase_usa_business_opinion_low_tt
		hidden_effect = {
			add_to_variable = { MEX_USA_business_opinion = 2 }
			#MEX_update_us_business_opinion = yes
		}
	}
}
MEX_increase_usa_business_opinion_med = {
	MEX = {
		custom_effect_tooltip = MEX_increase_usa_business_opinion_med_tt
		hidden_effect = {
			add_to_variable = { MEX_USA_business_opinion = 4 }
			#MEX_update_us_business_opinion = yes
		}
	}
}
MEX_increase_usa_business_opinion_high = {
	MEX = {
		custom_effect_tooltip = MEX_increase_usa_business_opinion_high_tt
		hidden_effect = {
			add_to_variable = { MEX_USA_business_opinion = 8 }
			#MEX_update_us_business_opinion = yes
		}
	}
}
MEX_decrease_usa_business_opinion_low = {
	MEX = {
		custom_effect_tooltip = MEX_decrease_usa_business_opinion_low_tt
		hidden_effect = {
			subtract_from_variable = { MEX_USA_business_opinion = 2 }
			#MEX_update_us_business_opinion = yes
		}
	}
}
MEX_decrease_usa_business_opinion_med = {
	MEX = {
		custom_effect_tooltip = MEX_decrease_usa_business_opinion_med_tt
		hidden_effect = {
			subtract_from_variable = { MEX_USA_business_opinion = 4 }
			#MEX_update_us_business_opinion = yes
		}
	}
}
MEX_decrease_usa_business_opinion_high = {
	MEX = {
		custom_effect_tooltip = MEX_decrease_usa_business_opinion_high_tt
		hidden_effect = {
			subtract_from_variable = { MEX_USA_business_opinion = 8 }
			#MEX_update_us_business_opinion = yes
		}
	}
}

#		1.1.2 Japan Business Opinion

MEX_increase_jap_business_opinion_low = {
	MEX = {
		custom_effect_tooltip = MEX_increase_jap_business_opinion_low_tt
		hidden_effect = {
			add_to_variable = { MEX_JAP_business_opinion = 2 }
			#MEX_update_jap_business_opinion = yes
		}
	}
}
MEX_increase_jap_business_opinion_med = {
	MEX = {
		custom_effect_tooltip = MEX_increase_jap_business_opinion_med_tt
		hidden_effect = {
			add_to_variable = { MEX_JAP_business_opinion = 4 }
			#MEX_update_jap_business_opinion = yes
		}
	}
}
MEX_increase_jap_business_opinion_high = {
	MEX = {
		custom_effect_tooltip = MEX_increase_jap_business_opinion_high_tt
		hidden_effect = {
			add_to_variable = { MEX_JAP_business_opinion = 8 }
			#MEX_update_jap_business_opinion = yes
		}
	}
}
MEX_decrease_jap_business_opinion_low = {
	MEX = {
		custom_effect_tooltip = MEX_decrease_jap_business_opinion_low_tt
		hidden_effect = {
			subtract_from_variable = { MEX_JAP_business_opinion = 2 }
			#MEX_update_jap_business_opinion = yes
		}
	}
}
MEX_decrease_jap_business_opinion_med = {
	MEX = {
		custom_effect_tooltip = MEX_decrease_jap_business_opinion_med_tt
		hidden_effect = {
			subtract_from_variable = { MEX_JAP_business_opinion = 4 }
			#MEX_update_jap_business_opinion = yes
		}
	}
}
MEX_decrease_jap_business_opinion_high = {
	MEX = {
		custom_effect_tooltip = MEX_decrease_jap_business_opinion_high_tt
		hidden_effect = {
			subtract_from_variable = { MEX_JAP_business_opinion = 8 }
			#MEX_update_jap_business_opinion = yes
		}
	}
}

# 2.0.0 Set State Stats (Debt/GDP/Etc.)

MEX_set_state_Debt = {
	# Region debt values in MILLIONS
	1 = { set_variable = {		region_debt_value = 116 } } # Baja California
	2 = { set_variable = {		region_debt_value = 2361 } } # CDMX, México, and Morelos
	3 = { set_variable = {		region_debt_value = 437 } } # Central North
	4 = { set_variable = {		region_debt_value = 646 } } # Gulf
	5 = { set_variable = {		region_debt_value = 922 } } # North East
	6 = { set_variable = {		region_debt_value = 624 } } # North West
	7 = { set_variable = {		region_debt_value = 82 } } # South East
	8 = { set_variable = {		region_debt_value = 237 } } # South West
	9 = { set_variable = {		region_debt_value = 463 } } # West
	10 = { set_variable = {		region_debt_value = 83 } } # Yucatán
}

MEX_set_state_GDP = {
	# State values in MILLIONS. Make sure they add up to GDP in BILLIONS
	484 = { set_variable = { 	defined_state_value = 1080 } } # Baja California
	1550 = { set_variable = { 	defined_state_value = 13 } } # Baja California Sur
	483 = { set_variable = { 	defined_state_value = 613 } } # Sonora
	482 = { set_variable = { 	defined_state_value = 572 } } # Chihuahua
	480 = { set_variable = { 	defined_state_value = 474 } } # Coahuila
	1409 = { set_variable = { 	defined_state_value = 1372 } } # Monterrey
	479 = { set_variable = { 	defined_state_value = 776 } } # Tamaulipas
	481 = { set_variable = { 	defined_state_value = 348 } } # Sinaloa
	1408 = { set_variable = { 	defined_state_value = 361 } } # Durango
	478 = { set_variable = { 	defined_state_value = 65 } } # Nayarit
	1423 = { set_variable = { 	defined_state_value = 339 } } # Zacatecas
	1422 = { set_variable = { 	defined_state_value = 157 } } # Aguascalientes
	1419 = { set_variable = { 	defined_state_value = 971 } } # Jalisco
	1420 = { set_variable = { 	defined_state_value = 127 } } # Colima
	1410 = { set_variable = { 	defined_state_value = 532 } } # San Luis Potosí
	1416 = { set_variable = { 	defined_state_value = 583 } } # Guanajuato
	1418 = { set_variable = { 	defined_state_value = 506 } } # Michoacán
	1417 = { set_variable = { 	defined_state_value = 216 } } # Querétaro
	1413 = { set_variable = { 	defined_state_value = 849 } } # México
	277 = { set_variable = {	defined_state_value = 3275 } } # Mexico City
	1415 = { set_variable = { 	defined_state_value = 440 } } # Hidalgo
	1412 = { set_variable = { 	defined_state_value = 157 } } # Morelos
	1411 = { set_variable = { 	defined_state_value = 478 } } # Puebla
	1414 = { set_variable = { 	defined_state_value = 184 } } # Tlaxcala
	477 = { set_variable = { 	defined_state_value = 1164 } } # Veracruz
	485 = { set_variable = { 	defined_state_value = 153 } } # Guerrero
	476 = { set_variable = { 	defined_state_value = 248 } } # Oaxaca
	475 = { set_variable = { 	defined_state_value = 140 } } # Chiapas
	1424 = { set_variable = { 	defined_state_value = 322 } } # Tabasco
	1425 = { set_variable = { 	defined_state_value = 118 } } # Campeche
	474 = { set_variable = { 	defined_state_value = 265 } } # Yucatán

	# Needs to manually set for use in current initialization
	484 = { set_variable = { 	state_value = defined_state_value } } # Baja California
	1550 = { set_variable = { 	state_value = defined_state_value } } # Baja California Sur
	483 = { set_variable = { 	state_value = defined_state_value } } # Sonora
	482 = { set_variable = { 	state_value = defined_state_value } } # Chihuahua
	480 = { set_variable = { 	state_value = defined_state_value } } # Coahuila
	1409 = { set_variable = { 	state_value = defined_state_value } } # Monterrey
	479 = { set_variable = { 	state_value = defined_state_value } } # Tamaulipas
	481 = { set_variable = { 	state_value = defined_state_value } } # Sinaloa
	1408 = { set_variable = { 	state_value = defined_state_value } } # Durango
	478 = { set_variable = { 	state_value = defined_state_value } } # Nayarit
	1423 = { set_variable = { 	state_value = defined_state_value } } # Zacatecas
	1422 = { set_variable = { 	state_value = defined_state_value } } # Aguascalientes
	1419 = { set_variable = { 	state_value = defined_state_value } } # Jalisco
	1420 = { set_variable = { 	state_value = defined_state_value } } # Colima
	1410 = { set_variable = { 	state_value = defined_state_value } } # San Luis Potosí
	1416 = { set_variable = { 	state_value = defined_state_value } } # Guanajuato
	1418 = { set_variable = { 	state_value = defined_state_value } } # Michoacán
	1417 = { set_variable = { 	state_value = defined_state_value } } # Querétaro
	1413 = { set_variable = { 	state_value = defined_state_value } } # México
	277 = { set_variable = {	state_value = defined_state_value } } # Mexico City
	1415 = { set_variable = { 	state_value = defined_state_value } } # Hidalgo
	1412 = { set_variable = { 	state_value = defined_state_value } } # Morelos
	1411 = { set_variable = { 	state_value = defined_state_value } } # Puebla
	1414 = { set_variable = { 	state_value = defined_state_value } } # Tlaxcala
	477 = { set_variable = { 	state_value = defined_state_value } } # Veracruz
	485 = { set_variable = { 	state_value = defined_state_value } } # Guerrero
	476 = { set_variable = { 	state_value = defined_state_value } } # Oaxaca
	475 = { set_variable = { 	state_value = defined_state_value } } # Chiapas
	1424 = { set_variable = { 	state_value = defined_state_value } } # Tabasco
	1425 = { set_variable = { 	state_value = defined_state_value } } # Campeche
	474 = { set_variable = { 	state_value = defined_state_value } } # Yucatán
}

# 3.0.0 Economic Effects

#	3.1.0 Base Stimulation

MEX_econ_region_base_stimulation_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_base_stimulation_percent_change = yes
}
MEX_econ_region_base_stimulation_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_base_stimulation_percent_change = yes
}
MEX_econ_region_base_stimulation_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_base_stimulation_percent_change = yes
}

MEX_econ_region_base_stimulation_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_base_stimulation_percent_change = yes
}
MEX_econ_region_base_stimulation_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_base_stimulation_percent_change = yes
}
MEX_econ_region_base_stimulation_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_base_stimulation_percent_change = yes
}

MEX_econ_global_base_stimulation_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_base_stimulation_percent_change = yes
}
MEX_econ_global_base_stimulation_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_base_stimulation_percent_change = yes
}
MEX_econ_global_base_stimulation_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_base_stimulation_percent_change = yes
}

MEX_econ_global_base_stimulation_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_base_stimulation_percent_change = yes
}
MEX_econ_global_base_stimulation_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_base_stimulation_percent_change = yes
}
MEX_econ_global_base_stimulation_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_base_stimulation_percent_change = yes
}

#	3.2.0 Current Stimulation
MEX_econ_region_stimulation_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_stimulation_percent_change = yes
}
MEX_econ_region_stimulation_percent_increase_low_med = {
	set_temp_variable = { temp_value = 2 }
	MEX_econ_region_stimulation_percent_change = yes
}
MEX_econ_region_stimulation_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_stimulation_percent_change = yes
}
MEX_econ_region_stimulation_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_stimulation_percent_change = yes
}

MEX_econ_region_stimulation_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_stimulation_percent_change = yes
}
MEX_econ_region_stimulation_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_stimulation_percent_change = yes
}
MEX_econ_region_stimulation_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_stimulation_percent_change = yes
}

MEX_econ_global_stimulation_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_increase_very_high = {
	set_temp_variable = { temp_value = 8 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_increase_mega_high = {
	set_temp_variable = { temp_value = 10 }
	MEX_econ_global_stimulation_percent_change = yes
}

MEX_econ_global_stimulation_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_decrease_very_high = {
	set_temp_variable = { temp_value = -8 }
	MEX_econ_global_stimulation_percent_change = yes
}
MEX_econ_global_stimulation_percent_decrease_mega_high = {
	set_temp_variable = { temp_value = -10 }
	MEX_econ_global_stimulation_percent_change = yes
}

#	3.3.0 Stimulation Decay

MEX_econ_region_stimulation_decay_increase_low = {
	set_temp_variable = { temp_value = 0.1 }
	MEX_econ_region_stimulation_decay_change = yes
}
MEX_econ_region_stimulation_decay_increase_med = {
	set_temp_variable = { temp_value = 0.2 }
	MEX_econ_region_stimulation_decay_change = yes
}
MEX_econ_region_stimulation_decay_increase_high = {
	set_temp_variable = { temp_value = 0.3 }
	MEX_econ_region_stimulation_decay_change = yes
}

MEX_econ_region_stimulation_decay_decrease_low = {
	set_temp_variable = { temp_value = -0.1 }
	MEX_econ_region_stimulation_decay_change = yes
}
MEX_econ_region_stimulation_decay_decrease_med = {
	set_temp_variable = { temp_value = -0.2 }
	MEX_econ_region_stimulation_decay_change = yes
}
MEX_econ_region_stimulation_decay_decrease_high = {
	set_temp_variable = { temp_value = -0.3 }
	MEX_econ_region_stimulation_decay_change = yes
}

MEX_econ_global_stimulation_decay_increase_low = {
	set_temp_variable = { temp_value = 0.1 }
	MEX_econ_global_stimulation_decay_change = yes
}
MEX_econ_global_stimulation_decay_increase_med = {
	set_temp_variable = { temp_value = 0.2 }
	MEX_econ_global_stimulation_decay_change = yes
}
MEX_econ_global_stimulation_decay_increase_high = {
	set_temp_variable = { temp_value = 0.3 }
	MEX_econ_global_stimulation_decay_change = yes
}

MEX_econ_global_stimulation_decay_decrease_low = {
	set_temp_variable = { temp_value = -0.1 }
	MEX_econ_global_stimulation_decay_change = yes
}
MEX_econ_global_stimulation_decay_decrease_med = {
	set_temp_variable = { temp_value = -0.2 }
	MEX_econ_global_stimulation_decay_change = yes
}
MEX_econ_global_stimulation_decay_decrease_high = {
	set_temp_variable = { temp_value = -0.3 }
	MEX_econ_global_stimulation_decay_change = yes
}

#	3.4.0 Agronomic Productivity
MEX_econ_region_agronomics_productivity_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_agronomics_productivity_percent_change = yes
}
MEX_econ_region_agronomics_productivity_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_agronomics_productivity_percent_change = yes
}
MEX_econ_region_agronomics_productivity_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_agronomics_productivity_percent_change = yes
}

MEX_econ_region_agronomics_productivity_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_agronomics_productivity_percent_change = yes
}
MEX_econ_region_agronomics_productivity_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_agronomics_productivity_percent_change = yes
}
MEX_econ_region_agronomics_productivity_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_agronomics_productivity_percent_change = yes
}

MEX_econ_global_agronomics_productivity_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}
MEX_econ_global_agronomics_productivity_percent_increase_low_med = {
	set_temp_variable = { temp_value = 2 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}

MEX_econ_global_agronomics_productivity_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}
MEX_econ_global_agronomics_productivity_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}

MEX_econ_global_agronomics_productivity_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}
MEX_econ_global_agronomics_productivity_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}
MEX_econ_global_agronomics_productivity_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_agronomics_productivity_percent_change = yes
}

#	3.5.0 Cash/Staple Crop
MEX_econ_region_agronomics_staple_crop_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_agronomics_crop_percent_change = yes
}
MEX_econ_region_agronomics_staple_crop_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_agronomics_crop_percent_change = yes
}
MEX_econ_region_agronomics_staple_crop_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_agronomics_crop_percent_change = yes
}

MEX_econ_global_agronomics_staple_crop_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_agronomics_crop_percent_change = yes
}
MEX_econ_global_agronomics_staple_crop_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_agronomics_crop_percent_change = yes
}
MEX_econ_global_agronomics_staple_crop_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_agronomics_crop_percent_change = yes
}

MEX_econ_region_agronomics_cash_crop_percent_increase_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_agronomics_crop_percent_change = yes
}
MEX_econ_region_agronomics_cash_crop_percent_increase_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_agronomics_crop_percent_change = yes
}
MEX_econ_region_agronomics_cash_crop_percent_increase_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_agronomics_crop_percent_change = yes
}

MEX_econ_global_agronomics_cash_crop_percent_increase_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_agronomics_crop_percent_change = yes
}
MEX_econ_global_agronomics_cash_crop_percent_increase_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_agronomics_crop_percent_change = yes
}
MEX_econ_global_agronomics_cash_crop_percent_increase_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_agronomics_crop_percent_change = yes
}

#	3.6.0 Base Migration Change
MEX_econ_region_population_base_migration_percent_increase_low = {
	set_temp_variable = { temp_value = 0.1 }
	MEX_econ_region_population_base_migration_percent_change = yes
}
MEX_econ_region_population_base_migration_percent_increase_med = {
	set_temp_variable = { temp_value = 0.2 }
	MEX_econ_region_population_base_migration_percent_change = yes
}
MEX_econ_region_population_base_migration_percent_increase_high = {
	set_temp_variable = { temp_value = 0.3 }
	MEX_econ_region_population_base_migration_percent_change = yes
}

MEX_econ_region_population_base_migration_percent_decrease_low = {
	set_temp_variable = { temp_value = -0.1 }
	MEX_econ_region_population_base_migration_percent_change = yes
}
MEX_econ_region_population_base_migration_percent_decrease_med = {
	set_temp_variable = { temp_value = -0.2 }
	MEX_econ_region_population_base_migration_percent_change = yes
}
MEX_econ_region_population_base_migration_percent_decrease_high = {
	set_temp_variable = { temp_value = -0.3 }
	MEX_econ_region_population_base_migration_percent_change = yes
}

MEX_econ_global_population_base_migration_percent_increase_low = {
	set_temp_variable = { temp_value = 0.1 }
	MEX_econ_global_population_base_migration_percent_change = yes
}
MEX_econ_global_population_base_migration_percent_increase_med = {
	set_temp_variable = { temp_value = 0.2 }
	MEX_econ_global_population_base_migration_percent_change = yes
}
MEX_econ_global_population_base_migration_percent_increase_high = {
	set_temp_variable = { temp_value = 0.3 }
	MEX_econ_global_population_base_migration_percent_change = yes
}

MEX_econ_global_population_base_migration_percent_decrease_low = {
	set_temp_variable = { temp_value = -0.1 }
	MEX_econ_global_population_base_migration_percent_change = yes
}
MEX_econ_global_population_base_migration_percent_decrease_med = {
	set_temp_variable = { temp_value = -0.2 }
	MEX_econ_global_population_base_migration_percent_change = yes
}
MEX_econ_global_population_base_migration_percent_decrease_high = {
	set_temp_variable = { temp_value = -0.3 }
	MEX_econ_global_population_base_migration_percent_change = yes
}

#	3.7.0 Rural/Urban Percentage

MEX_econ_region_urban_population_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_population_percent_change = yes
}
MEX_econ_region_urban_population_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_population_percent_change = yes
}
MEX_econ_region_urban_population_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_population_percent_change = yes
}

MEX_econ_global_urban_population_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_population_percent_change = yes
}
MEX_econ_global_urban_population_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_population_percent_change = yes
}
MEX_econ_global_urban_population_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_population_percent_change = yes
}

MEX_econ_region_rural_population_percent_increase_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_population_percent_change = yes
}
MEX_econ_region_rural_population_percent_increase_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_population_percent_change = yes
}
MEX_econ_region_rural_population_percent_increase_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_population_percent_change = yes
}

MEX_econ_global_rural_population_percent_increase_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_population_percent_change = yes
}
MEX_econ_global_rural_population_percent_increase_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_population_percent_change = yes
}
MEX_econ_global_rural_population_percent_increase_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_population_percent_change = yes
}

#	3.8.0 Unemployment Percent

MEX_econ_region_unemployed_population_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_unemployed_population_percent_change = yes
}
MEX_econ_region_unemployed_population_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_unemployed_population_percent_change = yes
}
MEX_econ_region_unemployed_population_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_unemployed_population_percent_change = yes
}

MEX_econ_region_unemployed_population_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_unemployed_population_percent_change = yes
}
MEX_econ_region_unemployed_population_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_unemployed_population_percent_change = yes
}
MEX_econ_region_unemployed_population_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_unemployed_population_percent_change = yes
}

MEX_econ_global_unemployed_population_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_unemployed_population_percent_change = yes
}
MEX_econ_global_unemployed_population_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_unemployed_population_percent_change = yes
}
MEX_econ_global_unemployed_population_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_unemployed_population_percent_change = yes
}

MEX_econ_global_unemployed_population_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_unemployed_population_percent_change = yes
}
MEX_econ_global_unemployed_population_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_unemployed_population_percent_change = yes
}
MEX_econ_global_unemployed_population_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_unemployed_population_percent_change = yes
}

#	3.9.0 Urban Quality of Life
MEX_econ_region_urban_quality_of_life_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
}
MEX_econ_region_urban_quality_of_life_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
}
MEX_econ_region_urban_quality_of_life_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
}

MEX_econ_region_urban_quality_of_life_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
}
MEX_econ_region_urban_quality_of_life_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
}
MEX_econ_region_urban_quality_of_life_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
}

MEX_econ_global_urban_quality_of_life_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_urban_quality_of_life_percent_change = yes
}
MEX_econ_global_urban_quality_of_life_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_urban_quality_of_life_percent_change = yes
}
MEX_econ_global_urban_quality_of_life_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_urban_quality_of_life_percent_change = yes
}

MEX_econ_global_urban_quality_of_life_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_urban_quality_of_life_percent_change = yes
}
MEX_econ_global_urban_quality_of_life_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_urban_quality_of_life_percent_change = yes
}
MEX_econ_global_urban_quality_of_life_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_urban_quality_of_life_percent_change = yes
}

#	3.10.0 Rural Quality of Life
MEX_econ_region_rural_quality_of_life_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
}
MEX_econ_region_rural_quality_of_life_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
}
MEX_econ_region_rural_quality_of_life_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
}

MEX_econ_region_rural_quality_of_life_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
}
MEX_econ_region_rural_quality_of_life_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
}
MEX_econ_region_rural_quality_of_life_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
}

MEX_econ_global_rural_quality_of_life_percent_increase_low = {
	set_temp_variable = { temp_value = 1 }
	MEX_econ_global_rural_quality_of_life_percent_change = yes
}
MEX_econ_global_rural_quality_of_life_percent_increase_med = {
	set_temp_variable = { temp_value = 3 }
	MEX_econ_global_rural_quality_of_life_percent_change = yes
}
MEX_econ_global_rural_quality_of_life_percent_increase_high = {
	set_temp_variable = { temp_value = 5 }
	MEX_econ_global_rural_quality_of_life_percent_change = yes
}

MEX_econ_global_rural_quality_of_life_percent_decrease_low = {
	set_temp_variable = { temp_value = -1 }
	MEX_econ_global_rural_quality_of_life_percent_change = yes
}
MEX_econ_global_rural_quality_of_life_percent_decrease_med = {
	set_temp_variable = { temp_value = -3 }
	MEX_econ_global_rural_quality_of_life_percent_change = yes
}
MEX_econ_global_rural_quality_of_life_percent_decrease_high = {
	set_temp_variable = { temp_value = -5 }
	MEX_econ_global_rural_quality_of_life_percent_change = yes
}

# Increases/Decreases total regional debt
MEX_econ_region_debt_change = {
	add_to_variable = { temp_region:region_debt_value = MEX_econ_decision_debt }
	clamp_variable = {
		var = temp_region:region_debt_value
		min = 0
	}
	custom_effect_tooltip = MEX_econ_region_debt_change_tt
}

# 4.0.0 The actual effects themselves

# Handles effects from advancing project - Charging debt, Firing Megaproject Events
MEX_econ_region_project_advance = {
	MEX_econ_region_project_charge = yes
	MEX_econ_region_project_event_trigger = yes
}

# Gives states in debt according to temp_project (project id), temp_region (region no), and temp_phase (phase num)
# Start(0) - 1 - 2 - 3 - completion(4)
# 40% - 15% - 15% - 15% - 15%
MEX_econ_region_project_charge = {
	set_temp_variable = { temp_cost_total = temp_project:MEX_econ_project_debt@var:temp_region }
	if = {
		limit = { check_variable = { temp_phase = 0 } }
		multiply_temp_variable = { temp_cost_total = 0.4 }
	}
	else = {
		multiply_temp_variable = { temp_cost_total = 0.15 }
	}
	# Total cost multiplied by 1 + (Average Worker, Industrialist, Party Corruption) / 100
	set_temp_variable = { corruption_mult = 100 }
	add_to_temp_variable = { corruption_mult = temp_project:MEX_econ_project_active_corruption@var:temp_region }
	divide_temp_variable = { corruption_mult = 100 }
	multiply_temp_variable = { temp_cost_total = corruption_mult }

	add_to_variable = { temp_region:region_debt_value = temp_cost_total }
}
# Checks if an event is a megaproject, and triggers the event depending on phase, corruption, etc
# Meta effects here are used to trigger events based on phase variable
# NOTE - the phase is shifted forward by one, so the MEX_econ_project_active_phase_level variable goes
# Start(1) - 2 - 3 - 4 - completion(5)
MEX_econ_region_project_event_trigger = {
	if = {
		limit = { check_variable = { temp_project:MEX_econ_project_mega@var:temp_region = 1 } }

		# Plan Baja
		if = {
			limit = {
				check_variable = { temp_region = 1 }
				check_variable = { temp_project = 1 }
			}

			MEX_econ_region_project_get_corruption = yes
			if = {
				limit = {
					check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 2 }
					check_variable = { temp_corruption > 50 }
				}
				# Trigger corruption event
				country_event = { id = MEX_mega_planbaja.0 }
			}
			else = {
				meta_effect = {
					text = {
						country_event = { id = MEX_mega_planbaja.[PHASE_NUM] }
					}
					PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
				}
			}
		}

		# Punta Colonet Port
		if = {
			limit = {
				check_variable = { temp_region = 1 }
				check_variable = { temp_project = 2 }
			}

			meta_effect = {
				text = {
					country_event = { id = MEX_mega_puntacolonet.[PHASE_NUM] }
				}
				PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
			}
		}

		# Cerro Prieto Geothermal Station
		if = {
			limit = {
				check_variable = { temp_region = 1 }
				check_variable = { temp_project = 3 }
			}

			MEX_econ_region_project_get_corruption = yes
			if = {
				limit = {
					check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 4 }
					check_variable = { temp_corruption > 70 }
				}
				# Trigger corruption
				country_event = { id = MEX_mega_cerroprieto.0 }
			}
			else = {
				meta_effect = {
					text = {
						country_event = { id = MEX_mega_cerroprieto.[PHASE_NUM] }
					}
					PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
				}
			}
		}

		# Melchor Ocampo Port
		if = {
			limit = {
				check_variable = { temp_region = 8 }
				check_variable = { temp_project = 1 }
			}

			if = {
				limit = { check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region < 4 } }
				# On start, planning, and procurement events are not needed, so don't fire them
			}
			else = {
				meta_effect = {
					text = {
						country_event = { id = MEX_mega_melchorocampo.[PHASE_NUM] }
					}
					PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
				}
			}
		}

		# Cancun Project
		if = {
			limit = {
				check_variable = { temp_region = 10 }
				check_variable = { temp_project = 1 }
			}

			meta_effect = {
				text = {
					country_event = { id = MEX_mega_cancun.[PHASE_NUM] }
				}
				PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
			}
		}

		# CDMX Metro Project
		if = {
			limit = {
				check_variable = { temp_region = 2 }
				check_variable = { temp_project = 1 }
			}

			if = {
				limit = {
					OR = {
						check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 2 }
						check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 3 }
					}
				}
				# Presidential decider
				if = {
					limit = { has_country_flag = TNO_MEX_ORD_SUC }
					set_temp_variable = { temp_pres_num = 0 }
				}
				else_if = {
					limit = { has_country_flag = TNO_MEX_LOZ_SUC }
					set_temp_variable = { temp_pres_num = 1 }
				}
				else = {
					set_temp_variable = { temp_pres_num = 2 }
				}
				meta_effect = {
					text = {
						country_event = { id = MEX_mega_metro.[PHASE_NUM][PRES_NUM] }
					}
					PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
					PRES_NUM = "[?temp_pres_num]"
				}
			}
			else = {
				meta_effect = {
					text = {
						country_event = { id = MEX_mega_metro.[PHASE_NUM] }
					}
					PHASE_NUM = "[?temp_project:MEX_econ_project_active_phase_level@var:temp_region]"
				}
			}
		}
	}
}

# Change base and then actual stimulation, using temp_value and temp_value_b respectively
# This scripted effect is primarily intended for combined decreases, as separate effects produces erroneous tooltips
MEX_econ_region_combined_stimulation_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	# Base Stimulation portion
	set_temp_variable = { temp_before = temp_region:MEX_econ_region_base_stimulation_percent }
	set_temp_variable = { temp_after = temp_region:MEX_econ_region_base_stimulation_percent }
	set_temp_variable = { temp_total = temp_region:MEX_econ_region_base_stimulation_percent }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_base_stimulation_percent = temp_value }

	# Stimulation portion
	set_temp_variable = { temp_before_b = temp_region:MEX_econ_region_stimulation_percent }
	set_temp_variable = { temp_after_b = temp_region:MEX_econ_region_stimulation_percent }
	add_to_temp_variable = { temp_after_b = temp_value_b }

	clamp_temp_variable = { var = temp_after_b min = temp_region:temp_after max = 100 }
	set_temp_variable = { temp_value_b = temp_after_b }
	subtract_from_temp_variable = { temp_value_b = temp_before_b }

	set_variable = { temp_region:MEX_econ_region_stimulation_percent = temp_after_b }

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes

	custom_effect_tooltip = MEX_econ_region_combined_stimulation_percent_change_tt
}
MEX_econ_global_combined_stimulation_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	custom_effect_tooltip = MEX_econ_global_combined_stimulation_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_base_stimulation_percent_change = yes
		}
	}
}
MEX_econ_region_base_stimulation_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_base_stimulation_percent }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_region:MEX_econ_region_stimulation_percent }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_base_stimulation_percent = temp_value }
	clamp_variable = { var = temp_region:MEX_econ_region_stimulation_percent min = temp_region:MEX_econ_region_base_stimulation_percent }

	custom_effect_tooltip = MEX_econ_region_base_stimulation_percent_change_tt

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_base_stimulation_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_base_stimulation_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_base_stimulation_percent_change = yes
		}
	}
}
MEX_econ_region_stimulation_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_stimulation_percent }
	set_temp_variable = { temp_after = temp_region:MEX_econ_region_stimulation_percent }
	add_to_temp_variable = { temp_after = temp_value }
	clamp_temp_variable = { var = temp_after min = temp_region:MEX_econ_region_base_stimulation_percent max = 100 }
	set_temp_variable = { temp_value = temp_after }
	subtract_from_temp_variable = { temp_value = temp_before }

	set_variable = { temp_region:MEX_econ_region_stimulation_percent = temp_after }

	custom_effect_tooltip = MEX_econ_region_stimulation_percent_change_tt

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_stimulation_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_stimulation_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_stimulation_percent_change = yes
		}
	}
}
MEX_econ_region_stimulation_decay_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_stimulation_decay }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_before }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_stimulation_decay = temp_value }

	custom_effect_tooltip = MEX_econ_region_stimulation_decay_change_tt

	MEX_econ_gui_reload = yes
}
MEX_econ_global_stimulation_decay_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_stimulation_decay_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_stimulation_decay_change = yes
		}
	}
}

MEX_econ_region_agronomics_productivity_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_agronomics_productivity_percent }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_before }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_agronomics_productivity_percent = temp_value }

	custom_effect_tooltip = MEX_econ_region_agronomics_productivity_percent_change_tt

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_agronomics_productivity_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_agronomics_productivity_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
		}
	}
}
MEX_econ_region_agronomics_crop_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before_1 = temp_region:MEX_econ_region_agronomics_staple_crop_percent }
	set_temp_variable = { temp_before_2 = temp_region:MEX_econ_region_agronomics_cash_crop_percent }
	set_temp_variable = { temp_after_1 = temp_before_1 }
	set_temp_variable = { temp_after_2 = temp_before_2 }
	set_temp_variable = { temp_total = temp_before_1 }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after_1 = temp_value }
	subtract_from_temp_variable = { temp_after_2 = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_agronomics_staple_crop_percent = temp_value }
	subtract_from_variable = { temp_region:MEX_econ_region_agronomics_cash_crop_percent = temp_value }
	set_temp_variable = { temp_value_positive = temp_value }
	multiply_temp_variable = { var = temp_value_positive value = -1 }
	if = {
		limit = {
			check_variable = { temp_value > 0 }
		}
		custom_effect_tooltip = MEX_econ_region_agronomics_staple_crop_percent_change_tt
	}
	else = {
		custom_effect_tooltip = MEX_econ_region_agronomics_cash_crop_percent_change_tt
	}

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_agronomics_crop_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	set_temp_variable = { temp_value_positive = temp_value }
	multiply_temp_variable = { var = temp_value_positive value = -1 }
	if = {
		limit = {
			check_variable = { temp_value > 0 }
		}
		custom_effect_tooltip = MEX_econ_global_agronomics_staple_crop_percent_change_tt
	}
	else = {
		custom_effect_tooltip = MEX_econ_global_agronomics_cash_crop_percent_change_tt
	}

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_agronomics_crop_percent_change = yes
		}
	}
}

MEX_econ_region_population_base_migration_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_population_base_migration_percent }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_before }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_population_base_migration_percent = temp_value }

	custom_effect_tooltip = MEX_econ_region_population_base_migration_percent_change_tt

	MEX_econ_gui_reload = yes
}
MEX_econ_global_population_base_migration_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_population_base_migration_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_population_base_migration_percent_change = yes
		}
	}
}
MEX_econ_region_population_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before_1 = temp_region:MEX_econ_region_urban_population_percent }
	set_temp_variable = { temp_before_2 = temp_region:MEX_econ_region_rural_population_percent }
	set_temp_variable = { temp_after_1 = temp_before_1 }
	set_temp_variable = { temp_after_2 = temp_before_2 }
	set_temp_variable = { temp_total = temp_before_1 }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after_1 = temp_value }
	subtract_from_temp_variable = { temp_after_2 = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_urban_population_percent = temp_value }
	subtract_from_variable = { temp_region:MEX_econ_region_rural_population_percent = temp_value }

	if = {
		limit = {
			check_variable = { temp_value > 0 }
		}
		custom_effect_tooltip = MEX_econ_region_urban_population_percent_change_tt
	}
	else = {
		custom_effect_tooltip = MEX_econ_region_rural_population_percent_change_tt
	}

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_population_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	if = {
		limit = {
			check_variable = { temp_value > 0 }
		}
		custom_effect_tooltip = MEX_econ_global_urban_population_percent_change_tt
	}
	else = {
		custom_effect_tooltip = MEX_econ_global_rural_population_percent_change_tt
	}

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_population_percent_change = yes
		}
	}
}
MEX_econ_region_unemployed_population_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_unemployed_population_percent }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_before }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_unemployed_population_percent = temp_value }

	custom_effect_tooltip = MEX_econ_region_unemployed_population_percent_change_tt

	MEX_econ_gui_reload = yes
}
MEX_econ_global_unemployed_population_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_unemployed_population_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_unemployed_population_percent_change = yes
		}
	}
}

MEX_econ_region_urban_quality_of_life_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_urban_quality_of_life_percent }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_before }
	subtract_from_temp_variable = { temp_total = temp_region:MEX_econ_region_agronomics_quality_of_life_modifier }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_urban_quality_of_life_percent = temp_value }

	custom_effect_tooltip = MEX_econ_region_urban_quality_of_life_percent_change_tt

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_urban_quality_of_life_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_urban_quality_of_life_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
		}
	}
}
MEX_econ_region_rural_quality_of_life_percent_change = {
	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = temp_region }

	set_temp_variable = { temp_before = temp_region:MEX_econ_region_rural_quality_of_life_percent }
	set_temp_variable = { temp_after = temp_before }
	set_temp_variable = { temp_total = temp_before }
	subtract_from_temp_variable = { temp_total = temp_region:MEX_econ_region_agronomics_quality_of_life_modifier }
	add_to_temp_variable = { temp_total = temp_value }

	if = {
		limit = {
			check_variable = { temp_total > 100 }
		}
		subtract_from_temp_variable = { temp_total = 100 }
		subtract_from_temp_variable = { temp_value = temp_total }
	}
	else_if = {
		limit = {
			check_variable = { temp_total < 0 }
		}
		subtract_from_temp_variable = { temp_value = temp_total }
	}

	add_to_temp_variable = { temp_after = temp_value }
	add_to_variable = { temp_region:MEX_econ_region_rural_quality_of_life_percent = temp_value }

	custom_effect_tooltip = MEX_econ_region_rural_quality_of_life_percent_change_tt

	MEX_econ_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_gui_reload = yes
}
MEX_econ_global_rural_quality_of_life_percent_change = {
	set_temp_variable = { temp_region = 1000 }

	if = {
		limit = {
			NOT = {
				check_variable = { temp_tooltip_region = temp_region }
			}
		}
		custom_effect_tooltip = MEX_econ_region_header_tt
	}

	set_temp_variable = { temp_tooltip_region = 1000 }

	custom_effect_tooltip = MEX_econ_global_rural_quality_of_life_percent_change_tt

	hidden_effect = {
		for_each_loop = {
			array = MEX_econ_region_array
			value = v1

			set_temp_variable = { temp_region = v1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
		}
	}
}

# 5.0.0 Backend Effects (mucho big)

#### 2.b.1 Setup and Initialization

# Starting variables and values
MEX_econ_setup = {
	MEX_set_state_GDP = yes # starting GDP
	MEX_set_state_Debt = yes #starting Debt

	clear_array = MEX_econ_region_array # array of regions

	add_to_array = { MEX_econ_region_array = 1 } # Baja California
	add_to_array = { MEX_econ_region_array = 2 } # CDMX, México, and Morelos
	add_to_array = { MEX_econ_region_array = 3 } # Central North
	add_to_array = { MEX_econ_region_array = 4 } # Gulf
	add_to_array = { MEX_econ_region_array = 5 } # North East
	add_to_array = { MEX_econ_region_array = 6 } # North West
	add_to_array = { MEX_econ_region_array = 7 } # South East
	add_to_array = { MEX_econ_region_array = 8 } # South West
	add_to_array = { MEX_econ_region_array = 9 } # West
	add_to_array = { MEX_econ_region_array = 10 } # Yucatán

	### Region Attributes ###
	# <REGION_ID> = {
	#	clear_array = MEX_econ_region_state_array # array of states in region
	#
	#	add_to_array = { MEX_econ_region_state_array = 484 }
	#	add_to_array = { MEX_econ_region_state_array = 1550 }
	#
	#	### MAHO TODO
	#	### Stimulation ###
	#	set_variable = { MEX_econ_region_stimulation_percent = 0 } # starting stimulation (X.XX%)
	#	set_variable = { MEX_econ_region_base_stimulation_percent = 0 } # base stimulation that is permanent (X.XX%)
	#	set_variable = { MEX_econ_region_stimulation_decay = 0 } # how much stimulation decays on 2 week pulse (X.XX%)
	#	set_variable = { MEX_econ_region_stimulation_factor = 0 } # how much stimulation affects modifier (X)
	#	set_variable = { MEX_econ_region_stimulation_decay_quality_of_life_factor = 0 } # how much stimulation decay is affected by quality of life (X)
	#
	#	set_variable = { MEX_econ_region_stimulation_state_GDP_growth_modifier = 0 } # modifier
	#
	#	 # average nationwide stimulation bonuses
	#	 # projects??
	#
	#	### Agronomics ###
	#	set_variable = { MEX_econ_region_agronomics_productivity_percent = 0 } # productivity (X.XX%)
	#	set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 0 } # staple crop as percent of crop type (X.XX%)
	#	set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 0 } # cash crop as percent of crop type (X.XX%)
	#	set_variable = { MEX_econ_region_agronomics_productivity_production_unit_factor = 0 } # how much productivity affects modifier (X)
	#	set_variable = { MEX_econ_region_agronomics_cash_crop_production_unit_factor = 0 } # how much cash crop affects modifier (X)
	#	set_variable = { MEX_econ_region_agronomics_cash_crop_income_factor = 0 } # how much cash crop affects modifier (X)
	#
	#	set_variable = { MEX_econ_region_agronomics_quality_of_life_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_agronomics_misc_income_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_agronomics_free_production_units_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_agronomics_migration_modifier = 0 } # modifier
	#
	#	### Population ###
	#	set_variable = { MEX_econ_region_population = 0 } # total pops (X)
	#	set_variable = { MEX_econ_region_urban_population = 0 } # urban pops (X)
	#	set_variable = { MEX_econ_region_rural_population = 0 } # rural pops (X)
	#	set_variable = { MEX_econ_region_urban_population_percent = 0 } # urban pops (X.XX%)
	#	set_variable = { MEX_econ_region_rural_population_percent = 0 } # rural pops (X.XX%)
	#	set_variable = { MEX_econ_region_rural_population_min_percent = 0 } # required rural pops (X.XX%)
	#	set_variable = { MEX_econ_region_unemployed_population_percent = 0 } # unemployed pops (X.XX%)
	#	set_variable = { MEX_econ_region_population_migration_percent = 0 } # migration of pops (X.XX%)
	#	set_variable = { MEX_econ_region_population_base_migration_percent = 0 } # migration of pops permanent (X.XX%)
	#	set_variable = { MEX_econ_region_migration_productivity_factor = 0 } # how much migration is affected by productivity (X)
	#	set_variable = { MEX_econ_region_migration_cash_crop_factor = 0 } # how much migration is affected by cash crop (X)
	#	set_variable = { MEX_econ_region_migration_quality_of_life_factor = 0 } # how much migration is affected by quality of life (X)
	#	set_variable = { MEX_econ_region_unemployed_population_factor = 0 } # how much migration affects modifier (X)
	#	set_variable = { MEX_econ_region_urban_population_state_GDP_growth_factor = 0 } # how much urban pops affects modifier (X)
	#	set_variable = { MEX_econ_region_urban_population_socdev_factor = 0 } # how much urban pops affects modifier (X)
	#	set_variable = { MEX_econ_region_urban_population_consumer_goods_use_factor = 0 } # how much urban pops affects modifier (X)
	#
	#	set_variable = { MEX_econ_region_population_state_GDP_growth_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_population_consumer_goods_use_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_population_academic_base_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_population_industrial_equipment_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_population_industrial_expertise_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_population_quality_of_life_modifier = 0 } # modifier
	#
	#	### Quality of Life
	#	set_variable = { MEX_econ_region_urban_quality_of_life_percent = 0 } # urban QoL (X.XX%)
	#	set_variable = { MEX_econ_region_rural_quality_of_life_percent = 0 } # rural QoL (X.XX%)
	#	set_variable = { MEX_econ_region_average_quality_of_life_percent = 0 } # average QoL (X.XX%)
	#	set_variable = { MEX_econ_region_quality_of_life_staple_crop_factor = 0 } # how much quality of life is affected by staple crop (X)
	#	set_variable = { MEX_econ_region_quality_of_life_unemployed_population_factor = 0 } # how much quality of life is affected by unemployment (X)
	#	set_variable = { MEX_econ_region_quality_of_life_socdev_factor = 0 } # how much quality of life affects modifier (X)
	#
	#	set_variable = { MEX_econ_region_quality_of_life_migration_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_stimulation_decay_modifier = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_academic_base_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_research_facilities_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_agriculture_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_healthcare_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate = 0 } # modifier
	#	set_variable = { MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate = 0 } # modifier
	#
	#	 # dirty war link
	#
	#	### Infrastructure
	#	 # just a variable TT econ handles rest i think
	#
	#	### Resources
	#	 # idk
	# }

	# Reset arrays and variables
	for_each_loop = {
		array = MEX_econ_region_array

		clear_array = v:MEX_econ_region_state_array
		clear_array = v:MEX_econ_region_project_array
		clear_array = v:MEX_econ_region_active_project_array

		resize_array = { array = v:MEX_econ_region_active_project_array size = 1 value = 0 }
	}

#	5.1.0 Region ids to scope to

	# Baja California
	1 = {
		add_to_array = { MEX_econ_region_state_array = 484 } # Baja California
		add_to_array = { MEX_econ_region_state_array = 1550 } # Baja California Sur

		set_variable = { MEX_econ_region_stimulation_percent = 60 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 50 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 30 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 70 }

		set_variable = { MEX_econ_region_urban_population_percent = 50 }
		set_variable = { MEX_econ_region_rural_population_percent = 50 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 50 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 16 }
		set_variable = { MEX_econ_region_y = 12 }

	}

	# CDMX, México, and Morelos
	2 = {
		# grouped them out of order by state ID cry about it
		add_to_array = { MEX_econ_region_state_array = 277 } # CDMX
		add_to_array = { MEX_econ_region_state_array = 1412 } # Morelos
		add_to_array = { MEX_econ_region_state_array = 1413 } # México

		set_variable = { MEX_econ_region_stimulation_percent = 60 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 50 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 50 }

		set_variable = { MEX_econ_region_urban_population_percent = 80 }
		set_variable = { MEX_econ_region_rural_population_percent = 20 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 70 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 235 }
		set_variable = { MEX_econ_region_y = 188 }
	}

	# Central North
	3 = {
		add_to_array = { MEX_econ_region_state_array = 1410 } # San Luis Potosí
		add_to_array = { MEX_econ_region_state_array = 1416 } # Guanajuato
		add_to_array = { MEX_econ_region_state_array = 1417 } # Querétaro
		add_to_array = { MEX_econ_region_state_array = 1422 } # Aguascalientes
		add_to_array = { MEX_econ_region_state_array = 1423 } # Zacatecas

		set_variable = { MEX_econ_region_stimulation_percent = 50 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 50 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 50 }

		set_variable = { MEX_econ_region_urban_population_percent = 60 }
		set_variable = { MEX_econ_region_rural_population_percent = 40 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 40 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 183 }
		set_variable = { MEX_econ_region_y = 119 }
	}

	# Gulf
	4 = {
		add_to_array = { MEX_econ_region_state_array = 477 } # Veracruz
		add_to_array = { MEX_econ_region_state_array = 1411 } # Puebla
		add_to_array = { MEX_econ_region_state_array = 1414 } # Tlaxcala
		add_to_array = { MEX_econ_region_state_array = 1415 } # Hidalgo

		set_variable = { MEX_econ_region_stimulation_percent = 50 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 50 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 70 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 50 }

		set_variable = { MEX_econ_region_urban_population_percent = 40 }
		set_variable = { MEX_econ_region_rural_population_percent = 60 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 40 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 243 }
		set_variable = { MEX_econ_region_y = 161 }
	}

	# North East
	5 = {
		add_to_array = { MEX_econ_region_state_array = 479 } # Tamaulipas
		add_to_array = { MEX_econ_region_state_array = 480 } # Coahuila
		add_to_array = { MEX_econ_region_state_array = 1409 } # Nuevo León

		set_variable = { MEX_econ_region_stimulation_percent = 60 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 50 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 40 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 60 }

		set_variable = { MEX_econ_region_urban_population_percent = 50 }
		set_variable = { MEX_econ_region_rural_population_percent = 50 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 50 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 185 }
		set_variable = { MEX_econ_region_y = 53 }
	}

	# North West
	6 = {
		add_to_array = { MEX_econ_region_state_array = 481 } # Sinaloa
		add_to_array = { MEX_econ_region_state_array = 482 } # Chihuahua
		add_to_array = { MEX_econ_region_state_array = 483 } # Sonora
		add_to_array = { MEX_econ_region_state_array = 1408 } # Durango

		set_variable = { MEX_econ_region_stimulation_percent = 40 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 40 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 80 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 30 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 70 }

		set_variable = { MEX_econ_region_urban_population_percent = 40 }
		set_variable = { MEX_econ_region_rural_population_percent = 60 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 50 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 42 }
		set_variable = { MEX_econ_region_y = 15 }
	}

	# South East
	7 = {
		add_to_array = { MEX_econ_region_state_array = 475 } # Chiapas
		add_to_array = { MEX_econ_region_state_array = 1424 } # Tabasco

		set_variable = { MEX_econ_region_stimulation_percent = 40 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 40 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 30 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 75 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 25 }

		set_variable = { MEX_econ_region_urban_population_percent = 30 }
		set_variable = { MEX_econ_region_rural_population_percent = 70 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 40 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 309 }
		set_variable = { MEX_econ_region_y = 209 }
	}

	# South West
	8 = {
		add_to_array = { MEX_econ_region_state_array = 476 } # Oaxaca
		add_to_array = { MEX_econ_region_state_array = 485 } # Guerrero
		add_to_array = { MEX_econ_region_state_array = 1418 } # Michoacán

		set_variable = { MEX_econ_region_stimulation_percent = 40 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 40 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 45 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 30 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 70 }

		set_variable = { MEX_econ_region_urban_population_percent = 30 }
		set_variable = { MEX_econ_region_rural_population_percent = 70 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 40 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 188 }
		set_variable = { MEX_econ_region_y = 186 }
	}

	# West
	9 = {
		add_to_array = { MEX_econ_region_state_array = 478 } # Nayarit
		add_to_array = { MEX_econ_region_state_array = 1419 } # Jalisco
		add_to_array = { MEX_econ_region_state_array = 1420 } # Colima

		set_variable = { MEX_econ_region_stimulation_percent = 60 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 50 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 50 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 50 }

		set_variable = { MEX_econ_region_urban_population_percent = 60 }
		set_variable = { MEX_econ_region_rural_population_percent = 40 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 50 }

		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 60 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 30 }

		set_variable = { MEX_econ_region_x = 150 }
		set_variable = { MEX_econ_region_y = 145 }
	}

	# Yucatán
	10 = {
		add_to_array = { MEX_econ_region_state_array = 474 } # Yucatán
		add_to_array = { MEX_econ_region_state_array = 1425 } # Campeche

		set_variable = { MEX_econ_region_stimulation_percent = 30 }
		set_variable = { MEX_econ_region_base_stimulation_percent = 30 }

		set_variable = { MEX_econ_region_agronomics_productivity_percent = 30 }
		set_variable = { MEX_econ_region_agronomics_staple_crop_percent = 80 }
		set_variable = { MEX_econ_region_agronomics_cash_crop_percent = 20 }

		set_variable = { MEX_econ_region_urban_population_percent = 20 }
		set_variable = { MEX_econ_region_rural_population_percent = 80 }
		set_variable = { MEX_econ_region_unemployed_population_percent = 30 }


		set_variable = { MEX_econ_region_urban_quality_of_life_percent = 30 }
		set_variable = { MEX_econ_region_rural_quality_of_life_percent = 20 }

		set_variable = { MEX_econ_region_x = 337 }
		set_variable = { MEX_econ_region_y = 168 }

	}

#	5.2.0 Projects
	# Baja
	1 = {
		# Plan Baja
		add_to_array = { MEX_econ_region_project_array = 1 }
		set_temp_variable = { temp_project = 1 }
		set_temp_variable = { temp_length = 1500 }
		set_temp_variable = { v1 = 1 }
		MEX_project_length_fill = yes

		set_variable = { 1.MEX_econ_project_debt@THIS = 500 }
		set_variable = { 1.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 1.MEX_econ_project_mega@THIS = 1 }


		# Punta Colonet
		add_to_array = { MEX_econ_region_project_array = 2 }
		set_temp_variable = { temp_project = 2 }
		set_temp_variable = { temp_length = 1500 }
		set_temp_variable = { v1 = 1 }
		MEX_project_length_fill = yes

		set_variable = { 2.MEX_econ_project_debt@THIS = 150 }
		set_variable = { 2.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 2.MEX_econ_project_mega@THIS = 1 }


		# Cerro Prieto Geothermal Station
		add_to_array = { MEX_econ_region_project_array = 3 }
		set_temp_variable = { temp_project = 3 }
		set_temp_variable = { temp_length = 1500 }
		set_temp_variable = { v1 = 1 }
		MEX_project_length_fill = yes

		set_variable = { 3.MEX_econ_project_debt@THIS = 100 }
		set_variable = { 3.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 3.MEX_econ_project_mega@THIS = 1 }


	}

	# CDMX
	2 = {
		# CDMX Metro
		add_to_array = { MEX_econ_region_project_array = 1 }
		set_temp_variable = { temp_project = 1 }
		set_temp_variable = { temp_length = 400 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 1.MEX_econ_project_debt@THIS = 350 }
		set_variable = { 1.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 1.MEX_econ_project_mega@THIS = 1 }


		# CDMX Drainage
		add_to_array = { MEX_econ_region_project_array = 2 }
		set_temp_variable = { temp_project = 2 }
		set_temp_variable = { temp_length = 350 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 2.MEX_econ_project_debt@THIS = 150 }
		set_variable = { 2.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 2.MEX_econ_project_mega@THIS = 0 }


		# Tasqueña-Tacuba Line
		add_to_array = { MEX_econ_region_project_array = 102 }
		set_temp_variable = { temp_project = 102 }
		set_temp_variable = { temp_length = 450 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 102.MEX_econ_project_debt@THIS = 125 }
		set_variable = { 102.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 102.MEX_econ_project_mega@THIS = 0 }


		# Nonoalco Tlatelolco
		add_to_array = { MEX_econ_region_project_array = 103 }
		set_temp_variable = { temp_project = 103 }
		set_temp_variable = { temp_length = 530 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 103.MEX_econ_project_debt@THIS = 75 }
		set_variable = { 103.MEX_econ_project_stimulation@THIS = 2 }
		set_variable = { 103.MEX_econ_project_mega@THIS = 0 }


		# Azteca Stadium
		add_to_array = { MEX_econ_region_project_array = 104 }
		set_temp_variable = { temp_project = 104 }
		set_temp_variable = { temp_length = 400 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 104.MEX_econ_project_debt@THIS = 80 }
		set_variable = { 104.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 104.MEX_econ_project_mega@THIS = 0 }


		# Torre Insignia
		add_to_array = { MEX_econ_region_project_array = 105 }
		set_temp_variable = { temp_project = 105 }
		set_temp_variable = { temp_length = 200 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 105.MEX_econ_project_debt@THIS = 30 }
		set_variable = { 105.MEX_econ_project_stimulation@THIS = 4 }
		set_variable = { 105.MEX_econ_project_mega@THIS = 0 }


		# INNN
		add_to_array = { MEX_econ_region_project_array = 106 }
		set_temp_variable = { temp_project = 106 }
		set_temp_variable = { temp_length = 380 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 106.MEX_econ_project_debt@THIS = 30 }
		set_variable = { 106.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 106.MEX_econ_project_mega@THIS = 0 }


		# Paseo de la Reforma
		add_to_array = { MEX_econ_region_project_array = 201 }
		set_temp_variable = { temp_project = 201 }
		set_temp_variable = { temp_length = 450 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 201.MEX_econ_project_debt@THIS = 25 }
		set_variable = { 201.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 201.MEX_econ_project_mega@THIS = 0 }


		# Federal Highway 150D
		add_to_array = { MEX_econ_region_project_array = 202 }
		set_temp_variable = { temp_project = 202 }
		set_temp_variable = { temp_length = 600 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 202.MEX_econ_project_debt@THIS = 0 }
		set_variable = { 202.MEX_econ_project_stimulation@THIS = 1 }

		set_variable = { MEX_econ_region_active_project_array^0 = 202 }
		set_variable = { 202.MEX_econ_project_active_phase_level@THIS = 3 }
		set_variable = { 202.MEX_econ_project_active_phase@THIS = 79.722 }
		set_variable = { 202.MEX_econ_project_active_phase_max@THIS = 100 }
		set_variable = { 202.MEX_econ_project_active_phase_day@THIS = 287.0 }
		set_variable = { 202.MEX_econ_project_active_phase_duration@THIS = 360.0 }
		set_variable = { 202.MEX_econ_project_active_total_day@THIS = 467 }
		MEX_econ_region_project_get_corruption = yes
		set_variable = { 202.MEX_econ_project_active_corruption@THIS = temp_corruption }
		set_variable = { 202.MEX_econ_project_active_corruption_max@THIS = 100 }
		set_variable = { 202.MEX_econ_project_mega@THIS = 0 }
		set_variable = { 202.MEX_econ_project_status@THIS = 2 }


		# Anillo Pereferico
		add_to_array = { MEX_econ_region_project_array = 203 }
		set_temp_variable = { temp_project = 203 }
		set_temp_variable = { temp_length = 420 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 203.MEX_econ_project_debt@THIS = 40 }
		set_variable = { 203.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 203.MEX_econ_project_mega@THIS = 0 }


		# Tlalpan Causeway
		add_to_array = { MEX_econ_region_project_array = 204 }
		set_temp_variable = { temp_project = 204 }
		set_temp_variable = { temp_length = 200 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 204.MEX_econ_project_debt@THIS = 10 }
		set_variable = { 204.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 204.MEX_econ_project_mega@THIS = 0 }


		# IPN Zacatenco
		add_to_array = { MEX_econ_region_project_array = 205 }
		set_temp_variable = { temp_project = 205 }
		set_temp_variable = { temp_length = 250 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 205.MEX_econ_project_debt@THIS = 35 }
		set_variable = { 205.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 205.MEX_econ_project_mega@THIS = 0 }


		# Museum of Anthropology
		add_to_array = { MEX_econ_region_project_array = 206 }
		set_temp_variable = { temp_project = 206 }
		set_temp_variable = { temp_length = 300 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 206.MEX_econ_project_debt@THIS = 20 }
		set_variable = { 206.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 206.MEX_econ_project_mega@THIS = 0 }


		# Museum of Modern Art
		add_to_array = { MEX_econ_region_project_array = 207 }
		set_temp_variable = { temp_project = 207 }
		set_temp_variable = { temp_length = 300 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 207.MEX_econ_project_debt@THIS = 20 }
		set_variable = { 207.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 207.MEX_econ_project_mega@THIS = 0 }


		# Chapultepec Forest
		add_to_array = { MEX_econ_region_project_array = 208 }
		set_temp_variable = { temp_project = 208 }
		set_temp_variable = { temp_length = 450 }
		set_temp_variable = { v1 = 2 }
		MEX_project_length_fill = yes

		set_variable = { 208.MEX_econ_project_debt@THIS = 15 }
		set_variable = { 208.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 208.MEX_econ_project_mega@THIS = 0 }


	}

	# Central North
	3 = {
		# Leon Stadium
		add_to_array = { MEX_econ_region_project_array = 101 }
		set_temp_variable = { temp_project = 101 }
		set_temp_variable = { temp_length = 530 }
		set_temp_variable = { v1 = 3 }
		MEX_project_length_fill = yes

		set_variable = { 101.MEX_econ_project_debt@THIS = 6 }
		set_variable = { 101.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 101.MEX_econ_project_mega@THIS = 0 }


		# Museum of the Insurgency
		add_to_array = { MEX_econ_region_project_array = 201 }
		set_temp_variable = { temp_project = 201 }
		set_temp_variable = { temp_length = 400 }
		set_temp_variable = { v1 = 3 }
		MEX_project_length_fill = yes

		set_variable = { 201.MEX_econ_project_debt@THIS = 8 }
		set_variable = { 201.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 201.MEX_econ_project_mega@THIS = 0 }


	}

	# Gulf
	4 = {
		# Tulancingo Ground Station
		add_to_array = { MEX_econ_region_project_array = 101 }
		set_temp_variable = { temp_project = 101 }
		set_temp_variable = { temp_length = 830 }
		set_temp_variable = { v1 = 4 }
		MEX_project_length_fill = yes

		set_variable = { 101.MEX_econ_project_debt@THIS = 3 }
		set_variable = { 101.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 101.MEX_econ_project_mega@THIS = 0 }


		# Coatzacoalcos Bridge
		add_to_array = { MEX_econ_region_project_array = 102 }
		set_temp_variable = { temp_project = 102 }
		set_temp_variable = { temp_length = 700 }
		set_temp_variable = { v1 = 4 }
		MEX_project_length_fill = yes

		set_variable = { 102.MEX_econ_project_debt@THIS = 0 }
		set_variable = { 102.MEX_econ_project_stimulation@THIS = 3 }

		set_variable = { MEX_econ_region_active_project_array^0 = 102 }
		set_variable = { 102.MEX_econ_project_active_phase_level@THIS = 3 }
		set_variable = { 102.MEX_econ_project_active_phase@THIS = 98.571 }
		set_variable = { 102.MEX_econ_project_active_phase_max@THIS = 100 }
		set_variable = { 102.MEX_econ_project_active_phase_day@THIS = 414.0 }
		set_variable = { 102.MEX_econ_project_active_phase_duration@THIS = 420.0 }
		set_variable = { 102.MEX_econ_project_active_total_day@THIS = 624 }
		MEX_econ_region_project_get_corruption = yes
		set_variable = { 102.MEX_econ_project_active_corruption@THIS = temp_corruption }
		set_variable = { 102.MEX_econ_project_active_corruption_max@THIS = 100 }
		set_variable = { 102.MEX_econ_project_mega@THIS = 0 }
		set_variable = { 102.MEX_econ_project_status@THIS = 2 }


		# Palace of the State of Mexico
		add_to_array = { MEX_econ_region_project_array = 103 }
		set_temp_variable = { temp_project = 103 }
		set_temp_variable = { temp_length = 380 }
		set_temp_variable = { v1 = 4 }
		MEX_project_length_fill = yes

		set_variable = { 103.MEX_econ_project_debt@THIS = 6 }
		set_variable = { 103.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 103.MEX_econ_project_mega@THIS = 0 }


		# Cuauhtemoc Stadium
		add_to_array = { MEX_econ_region_project_array = 104 }
		set_temp_variable = { temp_project = 104 }
		set_temp_variable = { temp_length = 1130 }
		set_temp_variable = { v1 = 4 }
		MEX_project_length_fill = yes

		set_variable = { 104.MEX_econ_project_debt@THIS = 60 }
		set_variable = { 104.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 104.MEX_econ_project_mega@THIS = 0 }


	}

	# Northeast
	5 = {
		# Amistad Dam
		add_to_array = { MEX_econ_region_project_array = 1 }
		set_temp_variable = { temp_project = 1 }
		set_temp_variable = { temp_length = 1500 }
		set_temp_variable = { v1 = 5 }
		MEX_project_length_fill = yes

		set_variable = { 1.MEX_econ_project_debt@THIS = 40 }
		set_variable = { 1.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 1.MEX_econ_project_mega@THIS = 0 }

		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		# Monterrey International Airport
		add_to_array = { MEX_econ_region_project_array = 101 }
		set_temp_variable = { temp_project = 101 }
		set_temp_variable = { temp_length = 700 }
		set_temp_variable = { v1 = 5 }
		MEX_project_length_fill = yes

		set_variable = { 101.MEX_econ_project_debt@THIS = 9 }
		set_variable = { 101.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 101.MEX_econ_project_mega@THIS = 0 }


		# Vicente Guerrero Dam
		add_to_array = { MEX_econ_region_project_array = 102 }
		set_temp_variable = { temp_project = 102 }
		set_temp_variable = { temp_length = 800 }
		set_temp_variable = { v1 = 5 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 102.MEX_econ_project_debt@THIS = 28 }
		set_variable = { 102.MEX_econ_project_stimulation@THIS = 2 }
		set_variable = { 102.MEX_econ_project_mega@THIS = 0 }


		# Las Bocas Dam
		add_to_array = { MEX_econ_region_project_array = 201 }
		set_temp_variable = { temp_project = 201 }
		set_temp_variable = { temp_length = 820 }
		set_temp_variable = { v1 = 5 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 201.MEX_econ_project_debt@THIS = 22 }
		set_variable = { 201.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 201.MEX_econ_project_mega@THIS = 0 }


	}

	# Northwest
	6 = {
		# CD Obregon International Airport
		add_to_array = { MEX_econ_region_project_array = 201 }
		set_temp_variable = { temp_project = 201 }
		set_temp_variable = { temp_length = 620 }
		set_temp_variable = { v1 = 6 }
		MEX_project_length_fill = yes

		set_variable = { 201.MEX_econ_project_debt@THIS = 7 }
		set_variable = { 201.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 201.MEX_econ_project_mega@THIS = 0 }


		# El Granero Dam
		add_to_array = { MEX_econ_region_project_array = 202 }
		set_temp_variable = { temp_project = 202 }
		set_temp_variable = { temp_length = 1000 }
		set_temp_variable = { v1 = 6 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 202.MEX_econ_project_debt@THIS = 15 }
		set_variable = { 202.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 202.MEX_econ_project_mega@THIS = 0 }


		# Plutarco Elias Calles Dam
		add_to_array = { MEX_econ_region_project_array = 203 }
		set_temp_variable = { temp_project = 203 }
		set_temp_variable = { temp_length = 700 }
		set_temp_variable = { v1 = 6 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 203.MEX_econ_project_debt@THIS = 20 }
		set_variable = { 203.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 203.MEX_econ_project_mega@THIS = 0 }


		# Sonora Arena
		add_to_array = { MEX_econ_region_project_array = 204 }
		set_temp_variable = { temp_project = 204 }
		set_temp_variable = { temp_length = 650 }
		set_temp_variable = { v1 = 6 }
		MEX_project_length_fill = yes

		set_variable = { 204.MEX_econ_project_debt@THIS = 4 }
		set_variable = { 204.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 204.MEX_econ_project_mega@THIS = 0 }


		# Francisco Zarpa Dam
		add_to_array = { MEX_econ_region_project_array = 205 }
		set_temp_variable = { temp_project = 205 }
		set_temp_variable = { temp_length = 850 }
		set_temp_variable = { v1 = 6 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 205.MEX_econ_project_debt@THIS = 25 }
		set_variable = { 205.MEX_econ_project_stimulation@THIS = 2 }
		set_variable = { 205.MEX_econ_project_mega@THIS = 0 }


	}

	# South East
	7 = {
		# Belisaurio Dominguez Dam
		add_to_array = { MEX_econ_region_project_array = 101 }
		set_temp_variable = { temp_project = 101 }
		set_temp_variable = { temp_length = 1500 }
		set_temp_variable = { v1 = 7 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 101.MEX_econ_project_debt@THIS = 30 }
		set_variable = { 101.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 101.MEX_econ_project_mega@THIS = 0 }


		# Manuel Moreno Torres Dam
		add_to_array = { MEX_econ_region_project_array = 102 }
		set_temp_variable = { temp_project = 102 }
		set_temp_variable = { temp_length = 1200 }
		set_temp_variable = { v1 = 7 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 102.MEX_econ_project_debt@THIS = 25 }
		set_variable = { 102.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 102.MEX_econ_project_mega@THIS = 0 }


		# Malpaso Dam
		add_to_array = { MEX_econ_region_project_array = 103 }
		set_temp_variable = { temp_project = 103 }
		set_temp_variable = { temp_length = 800 }
		set_temp_variable = { v1 = 7 }
		MEX_project_length_fill = yes
		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 103.MEX_econ_project_debt@THIS = 15 }
		set_variable = { 103.MEX_econ_project_stimulation@THIS = 5 }
		set_variable = { 103.MEX_econ_project_mega@THIS = 0 }


		# Villahermosa Stadium
		add_to_array = { MEX_econ_region_project_array = 104 }
		set_temp_variable = { temp_project = 104 }
		set_temp_variable = { temp_length = 650 }
		set_temp_variable = { v1 = 7 }
		MEX_project_length_fill = yes

		set_variable = { 104.MEX_econ_project_debt@THIS = 8 }
		set_variable = { 104.MEX_econ_project_stimulation@THIS = 2 }
		set_variable = { 104.MEX_econ_project_mega@THIS = 0 }


		# Parque Centenario 27 de Febrero
		add_to_array = { MEX_econ_region_project_array = 201 }
		set_temp_variable = { temp_project = 201 }
		set_temp_variable = { temp_length = 580 }
		set_temp_variable = { v1 = 7 }
		MEX_project_length_fill = yes

		set_variable = { 201.MEX_econ_project_debt@THIS = 5 }
		set_variable = { 201.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 201.MEX_econ_project_mega@THIS = 0 }


	}

	# South West
	8 = {
		# Melchor Ocampo Port
		add_to_array = { MEX_econ_region_project_array = 1 }
		set_temp_variable = { temp_project = 1 }
		set_temp_variable = { temp_length = 1500 }
		set_temp_variable = { v1 = 8 }
		MEX_project_length_fill = yes

		set_variable = { 1.MEX_econ_project_debt@THIS = 0 }
		set_variable = { 1.MEX_econ_project_stimulation@THIS = 0 }

		set_variable = { MEX_econ_region_active_project_array^0 = 1 }
		set_variable = { 1.MEX_econ_project_active_phase_level@THIS = 2 }
		set_variable = { 1.MEX_econ_project_active_phase@THIS = 0.000 }
		set_variable = { 1.MEX_econ_project_active_phase_max@THIS = 100 }
		set_variable = { 1.MEX_econ_project_active_phase_day@THIS = 0.0 }
		set_variable = { 1.MEX_econ_project_active_phase_duration@THIS = 300.0 }
		set_variable = { 1.MEX_econ_project_active_total_day@THIS = 150 }
		MEX_econ_region_project_get_corruption = yes
		set_variable = { 1.MEX_econ_project_active_corruption@THIS = temp_corruption }
		set_variable = { 1.MEX_econ_project_active_corruption_max@THIS = 100 }
		set_variable = { 1.MEX_econ_project_mega@THIS = 1 }
		set_variable = { 1.MEX_econ_project_status@THIS = 2 }


		# Infiernillo Dam
		add_to_array = { MEX_econ_region_project_array = 101 }
		set_temp_variable = { temp_project = 101 }
		set_temp_variable = { temp_length = 680 }
		set_temp_variable = { v1 = 8 }
		MEX_project_length_fill = yes

		#add_to_variable = { MEX_projects_PUs_reward = 1 }
		#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_variable = { 101.MEX_econ_project_debt@THIS = 24 }
		set_variable = { 101.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 101.MEX_econ_project_mega@THIS = 0 }


		# Acapulco International Airport
		add_to_array = { MEX_econ_region_project_array = 102 }
		set_temp_variable = { temp_project = 102 }
		set_temp_variable = { temp_length = 630 }
		set_temp_variable = { v1 = 8 }
		MEX_project_length_fill = yes

		set_variable = { 102.MEX_econ_project_debt@THIS = 8 }
		set_variable = { 102.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 102.MEX_econ_project_mega@THIS = 0 }


		# Central Market
		add_to_array = { MEX_econ_region_project_array = 103 }
		set_temp_variable = { temp_project = 103 }
		set_temp_variable = { temp_length = 480 }
		set_temp_variable = { v1 = 8 }
		MEX_project_length_fill = yes

		set_variable = { 103.MEX_econ_project_debt@THIS = 5 }
		set_variable = { 103.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 103.MEX_econ_project_mega@THIS = 0 }

		# Tehuantepec Oil Wells
		add_to_array = { MEX_econ_region_project_array = 104 }
		set_temp_variable = { temp_project = 104 }
		set_temp_variable = { temp_length = 480 }
		set_temp_variable = { v1 = 8 }
		MEX_project_length_fill = yes

		set_variable = { 104.MEX_econ_project_debt@THIS = 23 }
		set_variable = { 104.MEX_econ_project_stimulation@THIS = 5 }
		set_variable = { 104.MEX_econ_project_mega@THIS = 0 }


	}

	# West
	9 = {
		# Guadalajara Condominium
		add_to_array = { MEX_econ_region_project_array = 101 }
		set_temp_variable = { temp_project = 101 }
		set_temp_variable = { temp_length = 800 }
		set_temp_variable = { v1 = 9 }
		MEX_project_length_fill = yes

		set_variable = { 101.MEX_econ_project_debt@THIS = 45 }
		set_variable = { 101.MEX_econ_project_stimulation@THIS = 3 }
		set_variable = { 101.MEX_econ_project_mega@THIS = 0 }


		# Plaza Monumental
		add_to_array = { MEX_econ_region_project_array = 201 }
		set_temp_variable = { temp_project = 201 }
		set_temp_variable = { temp_length = 330 }
		set_temp_variable = { v1 = 9 }
		MEX_project_length_fill = yes

		set_variable = { 201.MEX_econ_project_debt@THIS = 3 }
		set_variable = { 201.MEX_econ_project_stimulation@THIS = 1 }
		set_variable = { 201.MEX_econ_project_mega@THIS = 0 }


	}

	# Yucatan
	10 = {
		# Cancun Project
		add_to_array = { MEX_econ_region_project_array = 1 }
		set_temp_variable = { temp_project = 1 }
		set_temp_variable = { temp_length = 2600 }
		set_temp_variable = { v1 = 10 }
		MEX_project_length_fill = yes

		set_variable = { 1.MEX_econ_project_debt@THIS = 300 }
		set_variable = { 1.MEX_econ_project_stimulation@THIS = 0 }
		set_variable = { 1.MEX_econ_project_mega@THIS = 1 }


		# Federal Highway 307
		add_to_array = { MEX_econ_region_project_array = 2 }
		set_temp_variable = { temp_project = 2 }
		set_temp_variable = { temp_length = 1250 }
		set_temp_variable = { v1 = 10 }
		MEX_project_length_fill = yes

		set_variable = { 2.MEX_econ_project_debt@THIS = 80 }
		set_variable = { 2.MEX_econ_project_stimulation@THIS = 5 }
		set_variable = { 2.MEX_econ_project_mega@THIS = 0 }


	}



	# Annoyingly, the scripted effect that calculates debt limit doesn't work here, hard coding earlier for graphing backfill
	set_variable = { 1.MEX_econ_region_debt_limit = 702.2 }
	set_variable = { 2.MEX_econ_region_debt_limit = 3513 }
	set_variable = { 3.MEX_econ_region_debt_limit = 1271 }
	set_variable = { 4.MEX_econ_region_debt_limit = 1618 }
	set_variable = { 5.MEX_econ_region_debt_limit = 1942 }
	set_variable = { 6.MEX_econ_region_debt_limit = 1386 }
	set_variable = { 7.MEX_econ_region_debt_limit = 310 }
	set_variable = { 8.MEX_econ_region_debt_limit = 639 }
	set_variable = { 9.MEX_econ_region_debt_limit = 883 }
	set_variable = { 10.MEX_econ_region_debt_limit = 263 }

	# For all regions
	for_each_loop = {
		array = MEX_econ_region_array
		value = v1

		# some default values - subject to change
		set_variable = { v1:MEX_econ_region_stimulation_decay = 2.5 } # stimulation decays by 2.5% every 2 weeks
		set_variable = { v1:MEX_econ_region_stimulation_factor = 0.02 }  # 10% stimulation gives 0.20% bonus growth
		set_variable = { v1:MEX_econ_region_stimulation_decay_quality_of_life_factor = 0.01 } # 1% urban quality of life = stimulation decays by 0.01% less every 2 weeks

		set_variable = { v1:MEX_econ_region_agronomics_productivity_production_unit_factor = 0.01 } # 1% productivity = 0.01 production units
		set_variable = { v1:MEX_econ_region_agronomics_cash_crop_production_unit_factor = 0.005 } # 1% cash crop = 0.01 production units
		set_variable = { v1:MEX_econ_region_agronomics_cash_crop_income_factor = 0.001 } # 1% cash crop = 0.001 Billion misc income

		set_variable = { v1:MEX_econ_region_population_migration_percent = 0.1 }
		set_variable = { v1:MEX_econ_region_population_base_migration_percent = 0.1 } # 0.1% migration every month
		set_variable = { v1:MEX_econ_region_migration_productivity_factor = 0.1 } # 1% productivity = 0.1% bonus factor (multiplicative) to migration
		set_variable = { v1:MEX_econ_region_migration_cash_crop_factor = 0.1 } # 1% cash crop = 0.1% bonus factor (multiplicative) to migration
		set_variable = { v1:MEX_econ_region_migration_quality_of_life_factor = 0.1 } # 1% quality of life difference = 0.1% bonus factor to migration
		set_variable = { v1:MEX_econ_region_unemployed_population_factor = 0.5 } # 1% migration = 0.5% unemployment added
		set_variable = { v1:MEX_econ_region_urban_population_state_GDP_growth_factor = 0.1 } # 1% urban population = 0.10% bonus factor (multiplicative) to stimulation's effect on GDPG
		set_variable = { v1:MEX_econ_region_urban_population_socdev_factor = 0.006 } # 1% urban population = 0.006 socdev added
		set_variable = { v1:MEX_econ_region_urban_population_consumer_goods_use_factor = 0.001 } # 1% urban population = 0.1% bonus to consumer good use

		set_variable = { v1:MEX_econ_region_quality_of_life_staple_crop_factor = 0.25 } # 0.25% staple crop = 1% bonus factor to quality of life
		set_variable = { v1:MEX_econ_region_quality_of_life_unemployed_population_factor = -0.1 } # 1% unemployment = -0.1% bonus factor to quality of life
		set_variable = { v1:MEX_econ_region_quality_of_life_socdev_factor = 0.001 } # 1% quality of life = 0.001 socdev added

		#graphs backfill - should it be another function? yes - do i care? - no.
		# Stimulation
		clear_array = v1:MEX_econ_graph_GDP
		resize_array = { v1:MEX_econ_graph_GDP = 14 }
		clear_array = v1:MEX_econ_graph_GDPPC
		resize_array = { v1:MEX_econ_graph_GDPPC = 14 }
		clear_array = v1:MEX_econ_graph_debt
		resize_array = { v1:MEX_econ_graph_debt = 14 }
		clear_array = v1:MEX_econ_graph_debt_limit
		resize_array = { v1:MEX_econ_graph_debt_limit = 14 }
		clear_array = v1:MEX_econ_graph_GDP_Growth
		resize_array = { v1:MEX_econ_graph_GDP_Growth = 14 }

		clear_array = v1:MEX_econ_graph_productivity
		resize_array = { v1:MEX_econ_graph_productivity = 14 }

		clear_array = v1:MEX_econ_graph_unemployment
		resize_array = { v1:MEX_econ_graph_unemployment = 14 }
		clear_array = v1:MEX_econ_graph_urban_unemployment
		resize_array = { v1:MEX_econ_graph_urban_unemployment = 14 }
		clear_array = v1:MEX_econ_graph_rural_unemployment
		resize_array = { v1:MEX_econ_graph_rural_unemployment = 14 }
		clear_array  = v1:MEX_econ_graph_poverty
		resize_array = { v1:MEX_econ_graph_poverty = 14 }
		clear_array = v1:MEX_econ_graph_urban_poverty
		resize_array = { v1:MEX_econ_graph_urban_poverty = 14 }
		clear_array = v1:MEX_econ_graph_rural_poverty
		resize_array = { v1:MEX_econ_graph_rural_poverty = 14 }

		clear_array = v1:MEX_econ_graph_migration
		resize_array = { v1:MEX_econ_graph_migration = 14 }
		clear_array = v1:MEX_econ_graph_population
		resize_array = { v1:MEX_econ_graph_population = 14 }

		# Region-based values
		# Stimulation - Debt (no prior calculations done)
		set_variable = { v1:MEX_econ_graph_debt^13 = v1:region_debt_value }
		set_variable = { v1:MEX_econ_graph_debt_limit^13 = v1:MEX_econ_region_debt_limit }

		# Agronomics - Productivity
		set_variable = { v1:MEX_econ_graph_productivity^13 = v1:MEX_econ_region_agronomics_productivity_percent }

		# Population
		set_variable = { v1:MEX_econ_graph_unemployment^13 = v1:MEX_econ_region_unemployed_population_percent }
		set_variable = { v1:MEX_econ_graph_poverty^13 = MEX:poverty_rate }

		# Migration factor precalculation
		set_temp_variable = { temp_migration_factor = 100 }
		set_temp_variable = { temp_modifier = v1:MEX_econ_region_agronomics_productivity_percent }
		multiply_temp_variable = { temp_modifier = v1:MEX_econ_region_migration_productivity_factor }
		add_to_temp_variable = { temp_migration_factor = temp_modifier }

		set_temp_variable = { temp_modifier = v1:MEX_econ_region_agronomics_cash_crop_percent }
		multiply_temp_variable = { temp_modifier = v1:MEX_econ_region_migration_cash_crop_factor }
		add_to_temp_variable = { temp_migration_factor = temp_modifier }

		set_temp_variable = { temp_modifier = v1:MEX_econ_region_urban_quality_of_life_percent }
		subtract_from_temp_variable = { temp_modifier = v1:MEX_econ_region_rural_quality_of_life_percent }
		multiply_temp_variable = { temp_modifier = v1:MEX_econ_region_migration_quality_of_life_factor }
		add_to_temp_variable = { temp_migration_factor = temp_modifier }

		set_temp_variable = { totalpop = 0 }
		# State-based values (GDP, Debt, Population)
		for_each_loop = {
			array = v1:MEX_econ_region_state_array
			value = region
			break = break

			add_to_temp_variable = { totalpop = region:state_population_k }

			# Stimulation - GDP
			set_temp_variable = { current = region:state_value }
			add_to_variable = { v1:MEX_econ_graph_GDP^13 = current }

			# Population
			set_temp_variable = { unemployedfolk = v1:MEX_econ_region_unemployed_population_percent }
			divide_temp_variable = { unemployedfolk = 100 }
			multiply_temp_variable = { unemployedfolk = region:state_population_k }

			set_temp_variable = { unemployedurb = unemployedfolk }
			multiply_temp_variable = { unemployedurb = v1:MEX_econ_region_urban_population_percent }
			divide_temp_variable = { unemployedurb = 100 }
			add_to_variable = { v1:MEX_econ_graph_urban_unemployment^13 = unemployedurb }

			set_temp_variable = { unemployedrur = unemployedfolk }
			multiply_temp_variable = { unemployedrur = v1:MEX_econ_region_rural_population_percent }
			divide_temp_variable = { unemployedrur = 100 }
			add_to_variable = { v1:MEX_econ_graph_rural_unemployment^13 = unemployedrur }

			set_temp_variable = { currentPov = MEX:poverty_rate }
			divide_temp_variable = { currentPov = 100 }
			multiply_temp_variable = { currentPov = region:state_population_k }

			set_temp_variable = { currenturbPov = currentPov }
			divide_temp_variable = { currenturbPov = 100 }
			multiply_temp_variable = { currenturbPov = v1:MEX_econ_region_urban_population_percent }
			add_to_variable = { v1:MEX_econ_graph_urban_poverty^13 = currenturbPov }

			set_temp_variable = { currentrurPov = currentPov }
			divide_temp_variable = { currentrurPov = 100 }
			multiply_temp_variable = { currentrurPov = v1:MEX_econ_region_rural_population_percent }
			add_to_variable = { v1:MEX_econ_graph_rural_poverty^13 = currentrurPov }

			# Quality of Life - Migration
			set_temp_variable = { currentMig = v1:MEX_econ_region_population_base_migration_percent }
			multiply_temp_variable = { currentMig = temp_migration_factor }
			log = "[?currentMig]"
			multiply_temp_variable = { currentMig = region:state_population_k }
			divide_temp_variable = { currentMig = 10000 }
			log = "[?region:state_population_k] > [?currentMig]"
			add_to_variable = { v1:MEX_econ_graph_migration^13 = currentMig }
		}

		# Quality of Life - Total Population
		add_to_variable = { v1:MEX_econ_graph_population^13 = totalpop }

		for_loop_effect = {
			start = 12
			end = 0
			add = -1
			compare = greater_than_or_equals

			set_temp_variable = { prev_idx = v }
			add_to_temp_variable = { prev_idx = 1 }

			# Stimulation - GDP
			MEX_econ_generate_random_factor_2 = yes
			divide_temp_variable = { r_fact = 12 }
			set_temp_variable = { temp_divisor = 100 }
			add_to_temp_variable = { temp_divisor = r_fact }
			set_variable = { v1:MEX_econ_graph_GDP^v = v1:MEX_econ_graph_GDP^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_GDP^v = 100 }
			divide_variable = { v1:MEX_econ_graph_GDP^v = temp_divisor }

			# Stimulation - GDP Per Capita
			MEX_econ_generate_random_factor = yes
			set_variable = { v1:MEX_econ_graph_GDPPC^v = v1:MEX_econ_graph_GDPPC^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_GDPPC^v = r_fact }

			# # Stimulation - Debt
			MEX_econ_generate_random_factor_3 = yes
			divide_temp_variable = { r_fact = 12 }
			set_temp_variable = { temp_divisor = 100 }
			add_to_temp_variable = { temp_divisor = r_fact }
			set_variable = { v1:MEX_econ_graph_debt^v = v1:MEX_econ_graph_debt^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_debt^v = 100 }
			divide_variable = { v1:MEX_econ_graph_debt^v = temp_divisor }
			set_variable = { v1:MEX_econ_graph_debt_limit^v = v1:MEX_econ_graph_debt_limit^prev_idx }

			# Agronomics - Productivity
			MEX_econ_generate_random_factor = yes
			set_variable = { v1:MEX_econ_graph_productivity^v = v1:MEX_econ_graph_productivity^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_productivity^v = r_fact }

			# Population - Unemployment
			MEX_econ_generate_random_factor = yes
			set_variable = { v1:MEX_econ_graph_unemployment^v = v1:MEX_econ_graph_unemployment^prev_idx }
			set_variable = { v1:MEX_econ_graph_urban_unemployment^v = v1:MEX_econ_graph_urban_unemployment^prev_idx }
			set_variable = { v1:MEX_econ_graph_rural_unemployment^v = v1:MEX_econ_graph_rural_unemployment^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_unemployment^v = r_fact }
			multiply_variable = { v1:MEX_econ_graph_urban_unemployment^v = r_fact }
			multiply_variable = { v1:MEX_econ_graph_rural_unemployment^v = r_fact }

			# Population - Poverty
			MEX_econ_generate_random_factor = yes
			set_variable = { v1:MEX_econ_graph_poverty^v = v1:MEX_econ_graph_poverty^prev_idx }
			set_variable = { v1:MEX_econ_graph_urban_poverty^v = v1:MEX_econ_graph_urban_poverty^prev_idx }
			set_variable = { v1:MEX_econ_graph_rural_poverty^v = v1:MEX_econ_graph_rural_poverty^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_poverty^v = r_fact }
			multiply_variable = { v1:MEX_econ_graph_urban_poverty^v = r_fact }
			multiply_variable = { v1:MEX_econ_graph_rural_poverty^v = r_fact }

			# Quality of Life - Migration
			MEX_econ_generate_random_factor = yes
			set_variable = { v1:MEX_econ_graph_migration^v = v1:MEX_econ_graph_migration^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_migration^v = r_fact }

			# Quality of Life - Population
			MEX_econ_generate_random_factor_4 = yes
			divide_temp_variable = { r_fact = 12 }
			set_temp_variable = { temp_divisor = 100 }
			add_to_temp_variable = { temp_divisor = r_fact }
			set_variable = { v1:MEX_econ_graph_population^v = v1:MEX_econ_graph_population^prev_idx }
			multiply_variable = { v1:MEX_econ_graph_population^v = 100 }
			divide_variable = { v1:MEX_econ_graph_population^v = temp_divisor }
		}

		# GDP Growth, DGDP, and GDPpC generated differently

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = idx

			set_variable = { v1:MEX_econ_graph_GDPPC^idx = v1:MEX_econ_graph_GDP^idx }
			multiply_variable = { v1:MEX_econ_graph_GDPPC^idx = 100 }
			divide_variable = { v1:MEX_econ_graph_GDPPC^idx = v1:MEX_econ_graph_population^idx }
			multiply_variable = { v1:MEX_econ_graph_GDPPC^idx = 10 }
		}

		for_loop_effect = {
			start = 13
			end = 1
			add = -1
			compare = greater_than_or_equals

			set_temp_variable = { next_idx = v }
			subtract_from_temp_variable = { next_idx = 1 }

			set_variable = { v1:MEX_econ_graph_GDP_Growth^v = v1:MEX_econ_graph_GDP^v } # GDP 2
			subtract_from_variable = { v1:MEX_econ_graph_GDP_Growth^v = v1:MEX_econ_graph_GDP^next_idx } # subtract GDP 1

			multiply_variable = { v1:MEX_econ_graph_GDP_Growth^v = 1200 }
			divide_variable = { v1:MEX_econ_graph_GDP_Growth^v = v1:MEX_econ_graph_GDP^next_idx } # divide by GDP 1
		}
		set_variable = { v1:MEX_econ_graph_GDP_Growth^0 = v1:MEX_econ_graph_GDP_Growth^1 }
		add_to_variable = { v1:MEX_econ_graph_GDP_Growth^0 = random }
		subtract_from_variable = { v1:MEX_econ_graph_GDP_Growth^0 = 0.5 }

		# Add dynamic modifiers for states
		for_each_scope_loop = {
			array = v1:MEX_econ_region_state_array

			if = {
				limit = {
					NOT = {
						has_dynamic_modifier = { modifier = MEX_econ_region_state_dynamic_modifier }
					}
				}
				add_dynamic_modifier = { modifier = MEX_econ_region_state_dynamic_modifier }
				force_update_dynamic_modifier = yes
			}

			set_variable = { MEX_econ_region = MEX.v1 } # state scoped variable for which region it belongs to
		}

		# Generic Projects
		# New International Airport
		add_to_array = { v1:MEX_econ_region_project_array = 301 }
		set_temp_variable = { temp_project = 301 }
		set_temp_variable = { temp_length = 600 }
		MEX_project_length_fill = yes

		set_variable = { 301.MEX_econ_project_debt@var:v1 = 5 }
		set_variable = { 301.MEX_econ_project_stimulation@var:v1 = 1 }

		# New Nuclear Plant
		if = {
			limit = {
				OR = {
					check_variable = { v1 = 4 }
					check_variable = { v1 = 5 }
					check_variable = { v1 = 6 }
				}
			}
			add_to_array = { v1:MEX_econ_region_project_array = 302 }
			set_temp_variable = { temp_project = 302 }
			set_temp_variable = { temp_length = 800 }
			MEX_project_length_fill = yes

			set_variable = { 302.MEX_econ_project_debt@var:v1 = 15 }
			set_variable = { 302.MEX_econ_project_stimulation@var:v1 = 2 }
			set_variable = { 302.MEX_econ_project_mega@var:v1 = 0 }
		}

		# PEMEX Expansion
		if = {
			limit = {
				OR = {
					check_variable = { v1 = 4 }
					check_variable = { v1 = 5 }
					check_variable = { v1 = 7 }
				}
			}
			add_to_array = { v1:MEX_econ_region_project_array = 303 }
			set_temp_variable = { temp_project = 303 }
			set_temp_variable = { temp_length = 450 }
			MEX_project_length_fill = yes

			set_variable = { 303.MEX_econ_project_debt@var:v1 = 4 }
			set_variable = { 303.MEX_econ_project_stimulation@var:v1 = 2 }
			set_variable = { 303.MEX_econ_project_mega@var:v1 = 0 }
		}

		# New Steel Plant
		if = {
			limit = {
				OR = {
					check_variable = { v1 = 5 }
					check_variable = { v1 = 8 }
				}
			}
			add_to_array = { v1:MEX_econ_region_project_array = 304 }
			set_temp_variable = { temp_project = 304 }
			set_temp_variable = { temp_length = 450 }
			MEX_project_length_fill = yes

			set_variable = { 304.MEX_econ_project_debt@var:v1 = 8 }
			set_variable = { 304.MEX_econ_project_stimulation@var:v1 = 0 }
			set_variable = { 304.MEX_econ_project_mega@var:v1 = 0 }
		}

		# New Electricity Plant
		add_to_array = { v1:MEX_econ_region_project_array = 305 }
		set_temp_variable = { temp_project = 305 }
		set_temp_variable = { temp_length = 500 }
		MEX_project_length_fill = yes

		set_variable = { 305.MEX_econ_project_debt@var:v1 = 10 }
		set_variable = { 305.MEX_econ_project_stimulation@var:v1 = 0 }
		set_variable = { 305.MEX_econ_project_mega@var:v1 = 0 }

		random = {
			chance = 30
			#add_to_variable = { MEX_projects_PUs_reward = 1 }
			#custom_effect_tooltip = MEx_project_rewards_pus_increase_tt
		}

		# Productos Forestales Mexicanos
		if = {
			limit = {
				OR = {
					check_variable = { v1 = 7 }
					check_variable = { v1 = 8 }
				}
			}
			add_to_array = { v1:MEX_econ_region_project_array = 306 }
			set_temp_variable = { temp_project = 306 }
			set_temp_variable = { temp_length = 400 }
			MEX_project_length_fill = yes

			set_variable = { 306.MEX_econ_project_debt@var:v1 = 3 }
			set_variable = { 306.MEX_econ_project_stimulation@var:v1 = 0 }
			set_variable = { 306.MEX_econ_project_mega@var:v1 = 0 }
		}

		# Add generic project stats
		for_each_loop = {
			array = v1:MEX_econ_region_project_array
			value = v2

			# Set time
			if = {
				limit = {
					check_variable = { v2:MEX_econ_project_phase_1_duration@var:v1 = 0 }
				}
				set_variable = { v2:MEX_econ_project_phase_1_duration@var:v1 = 100 }
			}
			if = {
				limit = {
					check_variable = { v2:MEX_econ_project_phase_2_duration@var:v1 = 0 }
				}
				set_variable = { v2:MEX_econ_project_phase_2_duration@var:v1 = 200 }
			}
			if = {
				limit = {
					check_variable = { v2:MEX_econ_project_phase_3_duration@var:v1 = 0 }
				}
				set_variable = { v2:MEX_econ_project_phase_3_duration@var:v1 = 600 }
			}
			if = {
				limit = {
					check_variable = { v2:MEX_econ_project_phase_4_duration@var:v1 = 0 }
				}
				set_variable = { v2:MEX_econ_project_phase_4_duration@var:v1 = 100 }
			}
			# Set status
			if = {
				limit = {
					check_variable = { v2:MEX_econ_project_status@var:v1 = 0 }
				}
				set_variable = { v2:MEX_econ_project_status@var:v1 = 3 }
			}

			# Calculate total time
			set_variable = { v2:MEX_econ_project_total_duration@var:v1 = v2:MEX_econ_project_phase_1_duration@var:v1 }
			add_to_variable = { v2:MEX_econ_project_total_duration@var:v1 = v2:MEX_econ_project_phase_2_duration@var:v1 }
			add_to_variable = { v2:MEX_econ_project_total_duration@var:v1 = v2:MEX_econ_project_phase_3_duration@var:v1 }
			add_to_variable = { v2:MEX_econ_project_total_duration@var:v1 = v2:MEX_econ_project_phase_4_duration@var:v1 }
		}
	}

	set_country_flag = MEX_debt_crisis_can_intervene # Ability to intervene in debt crises, potentially removed in later updates - include in loc later
	set_variable = { MEX_econ_GDP_debt_limit_conversion = 0.6 } # Regional debt limit is increased by 0.6 of regional GDP
	set_variable = { MEX_econ_debt_debt_limit_conversion = 0.4 } # Regional debt limit is increased by 0.4 of regional debt
	set_variable = { MEX_econ_debt_decision_proportion = 0.15 } # Regional debt limit is decreased by 0.15 per debt decision

	# Monthly update factors
	set_variable = { MEX_econ_unemployment_debt_conversion = 0.01 } # 1k unemployed = 0.01 million debt added
	set_variable = { MEX_econ_urban_qol_debt_conversion = 0.006 } # 1% urban qol = 0.006 million debt added / 1k urban pop
	set_variable = { MEX_econ_rural_qol_debt_conversion = 0.005 } # 1% rural qol = 0.005 million debt added / 1k rural pop
	set_variable = { MEX_econ_productivity_debt_conversion = 0.01 } # 1% productivity = 0.01 million debt subtracted / 1k rural pop
	set_variable = { MEX_econ_gdp_debt_conversion = 0.25 } # 1 million increase in GDP = 0.25 million debt subtracted
	set_variable = { MEX_econ_dgdp_stimulation_conversion = 1 } # 10% Debt-to-GDP = 0.1% stimulation decrease

	# Pulse timers
	set_variable = { MEX_econ_pulse_timer_1 = 14 }
	set_variable = { MEX_econ_pulse_timer_2 = 30 }

	# GUI stuff
	set_variable = { MEX_econ_region_selected = 2 }
	set_variable = { MEX_econ_region_project_selected = 202 }
	set_variable = { MEX_econ_tab_selected = 1 }
	set_variable = { MEX_econ_graph_type = 1 }
	MEX_econ_region_map_value_change = yes
	MEX_econ_goal_init = yes
	MEX_econ_backfill_graphs = yes
	MEX_econ_reload = yes
}
MEX_project_length_fill = { # Splits temp_length - the length of the project temp_project in region v1 by a 10-20-60-10 split
	set_temp_variable = { temp_length_1 = temp_length }
	divide_temp_variable = { temp_length_1 = 10 }

	set_temp_variable = { temp_length_2 = temp_length_1 }
	multiply_temp_variable = { temp_length_2 = 2 }

	set_temp_variable = { temp_length_3 = temp_length_1 }
	multiply_temp_variable = { temp_length_3 = 6 }

	set_variable = { temp_project:MEX_econ_project_phase_1_duration@var:v1 = temp_length_1 }
	set_variable = { temp_project:MEX_econ_project_phase_2_duration@var:v1 = temp_length_2 }
	set_variable = { temp_project:MEX_econ_project_phase_3_duration@var:v1 = temp_length_3 }
	set_variable = { temp_project:MEX_econ_project_phase_4_duration@var:v1 = temp_length_1 }
}

# 6.0.0 Graphs freaky magic shit

MEX_swagggfff = {

	for_each_loop = {
		array = MEX_econ_region_array
		value = region

		log = "[?region:MEX_econ_graph_GDP^13]"
	}

}
MEX_econ_backfill_graphs = {
	clear_array = MEX_econ_graph_months
	for_loop_effect = {
		start = 0
		end = 13
		compare = less_than_or_equals
		value = i

		add_to_array = { MEX_econ_graph_months = i }
	}
	set_variable = { MEX_econ_graph_month = 14 }



	MEX_econ_generate_graphs = yes
}
MEX_find_graph_unit = {

	# Determine rounding factor based on graph_range
	set_temp_variable = { unit = 10000 } # highest unit
	if = {
		limit = {
			check_variable = { graph_range < 0.6 }
		}
		set_temp_variable = { unit = 0.1 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 1.2 }
		}
		set_temp_variable = { unit = 0.2 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 3 }
		}
		set_temp_variable = { unit = 0.5 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 6 }
		}
		set_temp_variable = { unit = 1 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 12 }
		}
		set_temp_variable = { unit = 2 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 30 }
		}
		set_temp_variable = { unit = 5 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 60 }
		}
		set_temp_variable = { unit = 10 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 120 }
		}
		set_temp_variable = { unit = 20 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 300 }
		}
		set_temp_variable = { unit = 50 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 600 }
		}
		set_temp_variable = { unit = 100 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 1200 }
		}
		set_temp_variable = { unit = 200 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 3000 }
		}
		set_temp_variable = { unit = 500 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 6000 }
		}
		set_temp_variable = { unit = 1000 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 12000 }
		}
		set_temp_variable = { unit = 2000 }
	}
	else_if = {
		limit = {
			check_variable = { graph_range < 30000 }
		}
		set_temp_variable = { unit = 5000 }
	}
}

MEX_econ_generate_graphs = {
	clear_array = MEX_econ_graph_values_1
	clear_array = MEX_graph_1_segments
	clear_array = MEX_econ_graph_values_2
	clear_array = MEX_graph_2_segments
	clear_array = MEX_econ_graph_values_3
	clear_array = MEX_graph_3_segments
	clear_array = MEX_econ_graph_values_target
	clear_array = MEX_graph_target_segments
	if = {
		# Unused edge case for migration
		#limit = {
		#	NOT = {
		#		AND = {
		#			check_variable = { MEX_econ_tab_selected = 4 }
		#			check_variable = { MEX_econ_graph_type = 1 }
		#		}
		#	}
		#}
		meta_effect = {
			text = {
				set_temp_variable = { min = MEX_econ_region_selected:[selected_graph]^0 }

				set_temp_variable = { max = min }

				for_loop_effect = {
					start = 0
					end = 13
					compare = less_than_or_equals
					value = i

					set_temp_variable = { holder = MEX_econ_region_selected:[selected_graph]^i }

					if = {
						limit = { check_variable = { holder > max } }
						set_temp_variable = { max = holder }
					}
					else_if = {
						limit = { check_variable = { holder < min } }
						set_temp_variable = { min = holder }
					}
					add_to_array = { MEX_econ_graph_values_1 = holder }
				}
			}
			selected_graph = "[GetMEXEconGraphArray]"
		}
	}
#	Selects min and max from multiple arrays, unused for now
#	else_if = {
#		limit = {
#			AND = {
#				check_variable = { MEX_econ_tab_selected = 4 }
#				check_variable = { MEX_econ_graph_type = 1 }
#			}
#		}
#		set_temp_variable = { min = MEX_econ_region_selected:MEX_econ_graph_migration^0 }
#		set_temp_variable = { max = min }
#
#		for_loop_effect = {
#			start = 0
#			end = 13
#			compare = less_than_or_equals
#			value = i
#
#			add_to_temp_array = { holder0 = MEX_econ_region_selected:MEX_econ_graph_migration^i }
#			add_to_temp_array = { holder0 = MEX_econ_region_selected:MEX_econ_graph_urban_migration^i }
#			add_to_temp_array = { holder0 = MEX_econ_region_selected:MEX_econ_graph_rural_migration^i }
#
#			find_highest_in_array = {
#				array = holder0
#				value = holder
#			}
#			find_lowest_in_array = {
#				array = holder0
#				value = holdermin
#			}
#
#			if = {
#				limit = { check_variable = { holder > max } }
#				set_temp_variable = { max = holder }
#			}
#			else_if = {
#				limit = { check_variable = { holdermin < min } }
#				set_temp_variable = { min = holdermin }
#			}
#			add_to_array = { MEX_econ_graph_values_1 = holder0^0 }
#			add_to_array = { MEX_econ_graph_values_2 = holder0^1 }
#			add_to_array = { MEX_econ_graph_values_3 = holder0^2 }
#			clear_temp_array = holder0
#		}
#	}

	# Add debt limit/targets to graph
	if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 1 }
				check_variable = { MEX_econ_graph_type = 3 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_region_selected:MEX_econ_graph_debt_limit^i }

			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}
	else_if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 1 }
				check_variable = { MEX_econ_graph_type = 1 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_goal_GDPG_region^MEX_econ_region_selected }
			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}
	else_if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 1 }
				check_variable = { MEX_econ_graph_type = 2 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_goal_GDPG_percent }
			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}
	else_if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 1 }
				check_variable = { MEX_econ_graph_type = 4 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_goal_GDPpC }
			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}
	else_if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 2 }
				check_variable = { MEX_econ_graph_type = 1 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_goal_prod }
			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}
	else_if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 3 }
				check_variable = { MEX_econ_graph_type = 1 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_goal_unemployment }
			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}
	else_if = {
		limit = {
			AND = {
				check_variable = { MEX_econ_tab_selected = 3 }
				check_variable = { MEX_econ_graph_type = 2 }
			}
		}

		for_loop_effect = {
			start = 0
			end = 13
			compare = less_than_or_equals
			value = i

			set_temp_variable = { holder = MEX_econ_goal_poverty }
			if = {
				limit = { check_variable = { holder > max } }
				set_temp_variable = { max = holder }
			}
			else_if = {
				limit = { check_variable = { holder < min } }
				set_temp_variable = { min = holder }
			}
			add_to_array = { MEX_econ_graph_values_target = holder }
		}
	}

	# Sorry for awkward naming scheme, if anyone reviewing this has questions, ask FunkyDepression
	set_temp_variable = { range = max }
	subtract_from_temp_variable = { range = min }
	set_temp_variable = { lower_offset = 10 } # 10 pixels of offset from bottom
	set_temp_variable = { range_pixels = 190 } # 190 pixels for data range

	# Normalize graph range from pixels 10-200 on graph segments (total height 210)
	for_loop_effect = {
		start = 0
		end = 14
		value = i

		subtract_from_variable = { MEX_econ_graph_values_1^i = min }
		divide_variable = { MEX_econ_graph_values_1^i = range }
		multiply_variable = { MEX_econ_graph_values_1^i = range_pixels }
		add_to_variable = { MEX_econ_graph_values_1^i = lower_offset }

		subtract_from_variable = { MEX_econ_graph_values_2^i = min }
		divide_variable = { MEX_econ_graph_values_2^i = range }
		multiply_variable = { MEX_econ_graph_values_2^i = range_pixels }
		add_to_variable = { MEX_econ_graph_values_2^i = lower_offset }

		subtract_from_variable = { MEX_econ_graph_values_3^i = min }
		divide_variable = { MEX_econ_graph_values_3^i = range }
		multiply_variable = { MEX_econ_graph_values_3^i = range_pixels }
		add_to_variable = { MEX_econ_graph_values_3^i = lower_offset }

		subtract_from_variable = { MEX_econ_graph_values_target^i = min }
		divide_variable = { MEX_econ_graph_values_target^i = range }
		multiply_variable = { MEX_econ_graph_values_target^i = range_pixels }
		add_to_variable = { MEX_econ_graph_values_target^i = lower_offset }
	}

	set_temp_variable = { graph_factor = 210 }
	divide_temp_variable = { graph_factor = range_pixels }
	set_temp_variable = { graph_range = range }
	multiply_temp_variable = { graph_range = graph_factor }
	set_temp_variable = { n_factor = graph_range } # 1 normalization_factor = 1 pixel on graph
	divide_temp_variable = { n_factor = 210 }

	MEX_find_graph_unit = yes

	clear_array = MEX_econ_graph_vbars
	clear_array = MEX_econ_graph_vbars_offset

	set_temp_variable = { half_unit = unit }
	divide_temp_variable = { half_unit = 2 }
	set_temp_variable = { graph_min = min }
	set_temp_variable = { graph_max = max }

	set_temp_variable = { graph_offset = n_factor }
	multiply_temp_variable = { graph_offset = lower_offset }
	add_to_temp_variable = { graph_max = graph_offset }
	subtract_from_temp_variable = { graph_min = graph_offset }

	set_temp_variable = { k = 0 } # Technically not needed, but for clarity

	# double loop accomodates negative values
	while_loop_effect = {
		limit = {
			check_variable = { k > graph_min }
		}
		subtract_from_temp_variable = { k = half_unit }
	}
	while_loop_effect = {
		limit = {
			check_variable = { k < graph_min }
		}
		add_to_temp_variable = { k = half_unit }
	}
	set_temp_variable = { temp_offset = 0 }
	while_loop_effect = {
		limit = {
			check_variable = { k < graph_max }
			check_variable = { temp_offset > -190 }
		}
		set_temp_variable = { label = k }

		# vbar offset seems to be from -190 at the top to 20 at the bottom
		set_temp_variable = { offset = k }
		subtract_from_temp_variable = { offset = graph_min }
		divide_temp_variable = { offset = n_factor }
		multiply_temp_variable = { offset = -1 }
		add_to_temp_variable = { offset = 20 }
		set_temp_variable = { temp_offset = offset }
		if = {
			limit = {
				check_variable = { temp_offset > -190 }
			}
			add_to_array = { MEX_econ_graph_vbars_offset = offset }
			add_to_array = { MEX_econ_graph_vbars = label }
		}

		add_to_temp_variable = { k = half_unit }

		if = {
			limit = {
				check_variable = { k < graph_max }
				check_variable = { temp_offset > -190 }
			}

			set_temp_variable = { offset = k }
			subtract_from_temp_variable = { offset = graph_min }
			divide_temp_variable = { offset = n_factor }
			multiply_temp_variable = { offset = -1 }
			add_to_temp_variable = { offset = 20 }
			set_temp_variable = { temp_offset = offset }
			if = {
				limit = {
					check_variable = { temp_offset > -190 }
				}
				add_to_array = { MEX_econ_graph_vbars_offset = offset }
				add_to_array = { MEX_econ_graph_vbars = -1.01 }
			}

			add_to_temp_variable = { k = half_unit }
		}
	}

	for_loop_effect = {
		start = 0
		end = 13
		value = low_index

		set_temp_variable = { high_index = low_index }
		add_to_temp_variable = { high_index = 1 }


		set_temp_variable = { low_value = MEX_econ_graph_values_1^low_index  }
		set_temp_variable = { high_value = MEX_econ_graph_values_1^high_index }

		# We need to make sure these values are rounded!
		round_temp_variable = high_value
		round_temp_variable = low_value

		set_temp_variable = { frame_to_add = low_value }
		multiply_temp_variable = { frame_to_add = 1000 }
		add_to_temp_variable = { frame_to_add = high_value }

		# Add it to our recently-cleared array
		add_to_array = { MEX_graph_1_segments = frame_to_add }


		set_temp_variable = { low_value = MEX_econ_graph_values_2^low_index }
		set_temp_variable = { high_value = MEX_econ_graph_values_2^high_index }

		# We need to make sure these values are rounded!
		round_temp_variable = high_value
		round_temp_variable = low_value

		set_temp_variable = { frame_to_add = low_value }
		multiply_temp_variable = { frame_to_add = 1000 }
		add_to_temp_variable = { frame_to_add = high_value }

		# Add it to our recently-cleared array
		add_to_array = { MEX_graph_2_segments = frame_to_add }


		set_temp_variable = { low_value = MEX_econ_graph_values_3^low_index  }
		set_temp_variable = { high_value = MEX_econ_graph_values_3^high_index }

		# We need to make sure these values are rounded!
		round_temp_variable = high_value
		round_temp_variable = low_value

		set_temp_variable = { frame_to_add = low_value }
		multiply_temp_variable = { frame_to_add = 1000 }
		add_to_temp_variable = { frame_to_add = high_value }

		# Add it to our recently-cleared array
		add_to_array = { MEX_graph_3_segments = frame_to_add }


		set_temp_variable = { low_value = MEX_econ_graph_values_target^low_index  }
		set_temp_variable = { high_value = MEX_econ_graph_values_target^high_index }

		# We need to make sure these values are rounded!
		round_temp_variable = high_value
		round_temp_variable = low_value

		set_temp_variable = { frame_to_add = low_value }
		multiply_temp_variable = { frame_to_add = 1000 }
		add_to_temp_variable = { frame_to_add = high_value }

		# Add it to our recently-cleared array
		add_to_array = { MEX_graph_target_segments = frame_to_add }
	}
	set_variable = { y_MEX_econ_graph_actual = MEX_econ_graph_values_1^13 }
	multiply_variable = { y_MEX_econ_graph_actual = -1 }
	add_to_variable = { y_MEX_econ_graph_actual = 200 }
	set_variable = { y_MEX_econ_graph_target = MEX_econ_graph_values_target^13 }
	multiply_variable = { y_MEX_econ_graph_target = -1 }
	add_to_variable = { y_MEX_econ_graph_target = 200 }
	# Add two more set_vars with migration change later
}

MEX_econ_region_map_value_change = {
	for_each_loop = {
		array = MEX_econ_region_array

		if = {
			limit = {
				check_variable = { MEX_econ_tab_selected = 1 }
			}
			set_variable = { v:MEX_econ_region_map_frame = v:MEX_econ_region_stimulation_percent }
		}
		else_if = {
			limit = {
				check_variable = { MEX_econ_tab_selected = 2 }
			}
			set_variable = { v:MEX_econ_region_map_frame = v:MEX_econ_region_agronomics_productivity_percent }
		}
		else_if = {
			limit = {
				check_variable = { MEX_econ_tab_selected = 3 }
			}
			set_variable = { v:MEX_econ_region_map_frame = v:MEX_econ_region_unemployed_population_percent }
		}
		else_if = {
			limit = {
				check_variable = { MEX_econ_tab_selected = 4 }
			}
			set_variable = { v:MEX_econ_region_map_frame = v:MEX_econ_region_average_quality_of_life_percent }
		}
	}
}

#### 2.b.3 Projects

MEX_econ_region_project_active_change = {
	set_variable = { temp_region:MEX_econ_region_active_project_array^0 = temp_project }

	set_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 1 }
	set_variable = { temp_project.MEX_econ_project_active_phase@var:temp_region = 1 }
	set_variable = { temp_project:MEX_econ_project_active_phase_max@var:temp_region = 100 }
	set_variable = { temp_project:MEX_econ_project_active_phase_day@var:temp_region = 0 }
	set_variable = { temp_project:MEX_econ_project_active_phase_duration@var:temp_region = temp_project:MEX_econ_project_phase_1_duration@var:temp_region }
	set_variable = { temp_project:MEX_econ_project_active_total_day@var:temp_region = 0 }

	MEX_econ_region_project_get_corruption = yes
	set_variable = { temp_project:MEX_econ_project_active_corruption@var:temp_region = temp_corruption }
	set_variable = { temp_project:MEX_econ_project_active_corruption_max@var:temp_region = 100 }

	set_variable = { temp_project:MEX_econ_project_status@var:temp_region = 2 }

	if = {
		limit = {
			check_variable = { MEX_econ_region_selected = temp_region }
		}
		set_variable = { MEX_econ_region_project_selected = temp_region:MEX_econ_region_active_project_array^0 }
	}

	set_temp_variable = { temp_phase = 0 }
	MEX_econ_region_project_advance = yes

	add_to_variable = { MEX_econ_mech_dirty = 0.01 }
	add_to_variable = { MEX_econ_project_dirty = 0.01 }
}

MEX_econ_region_project_phase_change = {
	set_variable = { temp_project:MEX_econ_project_active_phase@var:temp_region = 0 }
	set_variable = { temp_project:MEX_econ_project_active_phase_max@var:temp_region = 100 }

	if = {
		limit = {
			check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 1 }
		}
		set_temp_variable = { temp_phase = 1 }
		set_variable = { temp_project:MEX_econ_project_active_phase_day@var:temp_region = 0 }
		set_variable = { temp_project:MEX_econ_project_active_phase_duration@var:temp_region = temp_project:MEX_econ_project_phase_2_duration@var:temp_region }
		add_to_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 1 }
	}
	else_if = {
		limit = {
			check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 2 }
		}
		set_temp_variable = { temp_phase = 2 }
		set_variable = { temp_project:MEX_econ_project_active_phase_day@var:temp_region = 0 }
		set_variable = { temp_project:MEX_econ_project_active_phase_duration@var:temp_region = temp_project:MEX_econ_project_phase_3_duration@var:temp_region }
		add_to_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 1 }
	}
	else_if = {
		limit = {
			check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 3 }
		}
		set_temp_variable = { temp_phase = 3 }
		set_variable = { temp_project:MEX_econ_project_active_phase_day@var:temp_region = 0 }
		set_variable = { temp_project:MEX_econ_project_active_phase_duration@var:temp_region = temp_project:MEX_econ_project_phase_4_duration@var:temp_region }
		add_to_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 1 }
	}
	else_if = {
		limit = {
			check_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 4 }
		}
		set_temp_variable = { temp_phase = 4 }
		add_to_variable = { temp_project:MEX_econ_project_active_phase_level@var:temp_region = 1 }
		MEX_econ_region_project_complete_effect = yes
	}

	MEX_econ_region_project_advance = yes

	add_to_variable = { MEX_econ_mech_dirty = 0.01 }
	add_to_variable = { MEX_econ_project_dirty = 0.01 }
}

# what the fuck is this - mustache
## Quick tool to calculate the average Worker, Industrialist, and Party Corruption
# If this is changed, please also change the calculations in the scripted localization key MEX_econ_project_calc_corruption.
MEX_econ_region_project_get_corruption = {
	set_temp_variable = { temp_corruption = 0 }
	add_to_temp_variable = { temp_corruption = MEX.MEX_PRI_group_corruption^0 }
	add_to_temp_variable = { temp_corruption = MEX.MEX_PRI_group_corruption^4 }
	add_to_temp_variable = { temp_corruption = MEX.MEX_PRI_group_corruption^5 }
	divide_temp_variable = { temp_corruption = 3 }
}

MEX_econ_region_project_complete_effect = {
	# Stimulation bonus
	if = {
		limit = {
			check_variable = { temp_project:MEX_econ_project_stimulation@var:temp_region > 0 }
		}
		set_temp_variable = { temp_value = temp_project:MEX_econ_project_stimulation@var:temp_region }
		MEX_econ_region_base_stimulation_percent_change = yes
	}

	# Haha corruption
	# Generic Projects
	if = { # New International Airport
		limit = { check_variable = { temp_project = 301 } }

		set_temp_variable = { temp_value = -0.2 }
		MEX_econ_region_stimulation_decay_change = yes
		set_temp_variable = { temp_value = 1 }
		MEX_econ_region_urban_quality_of_life_percent_change = yes

		random_scope_in_array = {
			array = temp_region:MEX_econ_region_state_array
			add_building_construction = {
				type = air_base
				level = 1
				instant_build = yes
			}
		}
		set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
		MEX_econ_region_project_get_corruption = yes
		divide_temp_variable = { temp_corruption = 100 }
		add_to_temp_variable = { temp_corruption = 1 }
		multiply_temp_variable = { temp_value = temp_corruption }
		custom_effect_tooltip = MEX_econ_project_cost_tt
	}
	else_if = { # New Nuclear Plant
		limit = { check_variable = { temp_project = 302 } }

		set_temp_variable = { temp_value = 3 }
		MEX_econ_region_urban_quality_of_life_percent_change = yes
		set_temp_variable = { temp_value = 4 }
		MEX_econ_region_rural_quality_of_life_percent_change = yes

		random_scope_in_array = {
			array = temp_region:MEX_econ_region_state_array
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = nuclear_reactor
				level = 1
				instant_build = yes
			}
		}
		add_to_variable = { MEX_projects_PUs_reward = 1 }
		custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
		MEX_econ_region_project_get_corruption = yes
		divide_temp_variable = { temp_corruption = 100 }
		add_to_temp_variable = { temp_corruption = 1 }
		multiply_temp_variable = { temp_value = temp_corruption }
		custom_effect_tooltip = MEX_econ_project_cost_tt
	}
	else_if = { # PEMEX Expansion
		limit = { check_variable = { temp_project = 303 } }

		set_temp_variable = { temp_value = -0.2 }
		MEX_econ_region_stimulation_decay_change = yes
		set_temp_variable = { temp_value = -3 }
		MEX_econ_region_unemployed_population_percent_change = yes

		random_scope_in_array = {
			array = temp_region:MEX_econ_region_state_array
			add_resource = {
				type = oil
				amount = 5
				state = THIS
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = fuel_silo
				level = 1
				instant_build = yes
			}
		}
		set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
		MEX_econ_region_project_get_corruption = yes
		divide_temp_variable = { temp_corruption = 100 }
		add_to_temp_variable = { temp_corruption = 1 }
		multiply_temp_variable = { temp_value = temp_corruption }
		custom_effect_tooltip = MEX_econ_project_cost_tt
	}
	else_if = { # New Steel Plant
		limit = { check_variable = { temp_project = 304 } }

		set_temp_variable = { temp_value = -5 }
		MEX_econ_region_unemployed_population_percent_change = yes

		random_scope_in_array = {
			array = temp_region:MEX_econ_region_state_array
			add_resource = {
				type = steel
				amount = 5
				state = THIS
			}
		}
		add_to_variable = { MEX_projects_PUs_reward = 1 }
		custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
		MEX_econ_region_project_get_corruption = yes
		divide_temp_variable = { temp_corruption = 100 }
		add_to_temp_variable = { temp_corruption = 1 }
		multiply_temp_variable = { temp_value = temp_corruption }
		custom_effect_tooltip = MEX_econ_project_cost_tt
	}
	else_if = { # New Electricity Plant
		limit = { check_variable = { temp_project = 305 } }

		set_temp_variable = { temp_value = -2 }
		MEX_econ_region_unemployed_population_percent_change = yes
		set_temp_variable = { temp_value = 2 }
		MEX_econ_region_urban_quality_of_life_percent_change = yes
		set_temp_variable = { temp_value = 2 }
		MEX_econ_region_rural_quality_of_life_percent_change = yes
		set_temp_variable = { temp_value = 1 }
		MEX_econ_region_population_percent_change = yes

		random_scope_in_array = {
			array = temp_region:MEX_econ_region_state_array
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = thermoelectric_plant
				level = 1
				instant_build = yes
			}
		}
		random = {
			chance = 30
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt
		}
		set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
		MEX_econ_region_project_get_corruption = yes
		divide_temp_variable = { temp_corruption = 100 }
		add_to_temp_variable = { temp_corruption = 1 }
		multiply_temp_variable = { temp_value = temp_corruption }
		custom_effect_tooltip = MEX_econ_project_cost_tt
	}
	else_if = { # Productos Forestales Mexicanos
		limit = { check_variable = { temp_project = 306 } }

		set_temp_variable = { temp_value = 2 }
		MEX_econ_region_agronomics_productivity_percent_change = yes
		set_temp_variable = { temp_value = 2 }
		MEX_econ_region_rural_quality_of_life_percent_change = yes
		add_to_variable = { MEX_projects_PUs_reward = 1 }
		custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

		set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
		MEX_econ_region_project_get_corruption = yes
		divide_temp_variable = { temp_corruption = 100 }
		add_to_temp_variable = { temp_corruption = 1 }
		multiply_temp_variable = { temp_value = temp_corruption }
		custom_effect_tooltip = MEX_PRI_increase_power_peasants_marginal_tt
		hidden_effect = {
			add_to_variable = { MEX_PRI_group_power^1 = 1 }
			MEX_SBBFM_update_values = yes
		}
		custom_effect_tooltip = MEX_econ_project_cost_tt
	}

	# Unique effects here
	# Baja
	if = {
		limit = {
			check_variable = { temp_region = 1 }
		}
		if = { # Plan Baja
			limit = { check_variable = { temp_project = 1 } }


			custom_effect_tooltip = MEX_econ_project_event_chain_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Punta Colonet
			limit = { check_variable = { temp_project = 2 } }


			custom_effect_tooltip = MEX_econ_project_event_chain_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Cerro Prieto Geothermal Station
			limit = { check_variable = { temp_project = 3 } }


			custom_effect_tooltip = MEX_econ_project_event_chain_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# CDMX
	else_if = {
		limit = {
			check_variable = { temp_region = 2 }
		}
		if = { # CDMX Metro
			limit = { check_variable = { temp_project = 1 } }


			custom_effect_tooltip = MEX_econ_project_event_chain_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # CDMX Drainage
			limit = { check_variable = { temp_project = 2 } }

			set_temp_variable = { temp_value = 5 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_population_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Tasqueña-Tacuba Line
			limit = { check_variable = { temp_project = 102 } }

			set_temp_variable = { temp_value = -0.3 }
			MEX_econ_region_stimulation_decay_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			277 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Nonoalco Tlatelolco
			limit = { check_variable = { temp_project = 103 } }

			set_temp_variable = { temp_value = 5 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Azteca Stadium
			limit = { check_variable = { temp_project = 104 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 40
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Torre Insignia
			limit = { check_variable = { temp_project = 105 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # INNN
			limit = { check_variable = { temp_project = 106 } }

			set_temp_variable = { temp_value = 4 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_to_variable = { healthcare_counter = 40 }
			custom_effect_tooltip = MEX_econ_project_effect_healthcare
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Paseo de la Reforma
			limit = { check_variable = { temp_project = 201 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			277 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Federal Highway 150D
			limit = { check_variable = { temp_project = 202 } }

			set_temp_variable = { temp_value = -0.2 }
			MEX_econ_region_stimulation_decay_change = yes

			277 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			1411 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			1413 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Anillo Pereferico
			limit = { check_variable = { temp_project = 203 } }

			set_temp_variable = { temp_value = -0.2 }
			MEX_econ_region_stimulation_decay_change = yes

			277 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Tlalpan Causeway
			limit = { check_variable = { temp_project = 204 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # IPN Zacatenco
			limit = { check_variable = { temp_project = 205 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_to_variable = { research_facilities_counter = 20 }
			custom_effect_tooltip = MEX_econ_project_effect_research_facilities
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Museum of Anthropology
			limit = { check_variable = { temp_project = 206 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_PRI_increase_power_intellectuals_very_low_tt
			hidden_effect = {
				add_to_variable = { MEX_PRI_group_power^3 = 3 }
				MEX_SBBFM_update_values = yes
			}
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Museum of Modern Art
			limit = { check_variable = { temp_project = 207 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_PRI_increase_loyalty_intellectuals_very_low_tt
			hidden_effect = {
				add_to_variable = { MEX_PRI_group_loyalty^3 = 3 }
				MEX_SBBFM_update_values = yes
			}
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Chapultepec Forest
			limit = { check_variable = { temp_project = 208 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_PRI_increase_loyalty_workers_very_low_tt
			custom_effect_tooltip = MEX_PRI_increase_loyalty_businessmen_very_low_tt
			hidden_effect = {
				add_to_variable = { MEX_PRI_group_loyalty^0 = 3 }
				add_to_variable = { MEX_PRI_group_loyalty^4 = 3 }
				MEX_SBBFM_update_values = yes
			}
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# Central North
	else_if = {
		limit = {
			check_variable = { temp_region = 3 }
		}
		if = { # Leon Stadium
			limit = { check_variable = { temp_project = 101 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 10
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Museum of the Insurgency
			limit = { check_variable = { temp_project = 201 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_war_support = 0.02
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# Gulf
	else_if = {
		limit = {
			check_variable = { temp_region = 4 }
		}
		if = { # Tulancingo Ground Station
			limit = { check_variable = { temp_project = 101 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_building_construction = {
					type = radar_station
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_to_variable = { research_facilities_counter = 15 }
			custom_effect_tooltip = MEX_econ_project_effect_research_facilities
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Coatzacoalcos Bridge
			limit = { check_variable = { temp_project = 102 } }

			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			477 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Palace of the State of Mexico
			limit = { check_variable = { temp_project = 103 } }

			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_to_variable = { admin_efficiency_counter = 20 }
			custom_effect_tooltip = MEX_econ_project_effect_admin_efficiency
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Cuauhtemoc Stadium
			limit = { check_variable = { temp_project = 104 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 30
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# Northeast
	else_if = {
		limit = {
			check_variable = { temp_region = 5 }
		}
		if = { # Amistad Dam
			limit = { check_variable = { temp_project = 1 } }

			set_temp_variable = { temp_value = 5 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = thermoelectric_plant
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_increase_usa_business_opinion_low_tt
			hidden_effect = {
				add_to_variable = { MEX_USA_business_opinion = 3 }
			}
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Monterrey International Airport
			limit = { check_variable = { temp_project = 101 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_increase_usa_business_opinion_marginal_tt
			hidden_effect = {
				add_to_variable = { MEX_USA_business_opinion = 1 }
			}
			custom_effect_tooltip = MEX_increase_jap_business_opinion_marginal_tt
			hidden_effect = {
				add_to_variable = { MEX_JAP_business_opinion = 1 }
			}
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Vicente Guerrero Dam
			limit = { check_variable = { temp_project = 102 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = thermoelectric_plant
					level = 2
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Las Bocas Dam
			limit = { check_variable = { temp_project = 201 } }

			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = thermoelectric_plant
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# Northwest
	else_if = {
		limit = {
			check_variable = { temp_region = 6 }
		}
		if = { # CD Obregon International Airport
			limit = { check_variable = { temp_project = 201 } }

			set_temp_variable = { temp_value = -0.3 }
			MEX_econ_region_stimulation_decay_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # El Granero Dam
			limit = { check_variable = { temp_project = 202 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = thermoelectric_plant
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Plutarco Elias Calles Dam
			limit = { check_variable = { temp_project = 203 } }

			set_temp_variable = { temp_value = 4 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = thermoelectric_plant
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Sonora Arena
			limit = { check_variable = { temp_project = 204 } }

			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 10
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Francisco Zarpa Dam
			limit = { check_variable = { temp_project = 205 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = thermoelectric_plant
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# South East
	else_if = {
		limit = {
			check_variable = { temp_region = 7 }
		}
		if = { # Belisaurio Dominguez Dam
			limit = { check_variable = { temp_project = 101 } }

			set_temp_variable = { temp_value = 4 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 4 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = thermoelectric_plant
					level = 3
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Manuel Moreno Torres Dam
			limit = { check_variable = { temp_project = 102 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 4 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = thermoelectric_plant
					level = 3
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Malpaso Dam
			limit = { check_variable = { temp_project = 103 } }

			set_temp_variable = { temp_value = -0.1 }
			MEX_econ_region_stimulation_decay_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = thermoelectric_plant
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Villahermosa Stadium
			limit = { check_variable = { temp_project = 104 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 25
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Parque Centenario 27 de Febrero
			limit = { check_variable = { temp_project = 201 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 10
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# South West
	else_if = {
		limit = {
			check_variable = { temp_region = 8 }
		}
		if = { # Melchor Ocampo Port
			limit = { check_variable = { temp_project = 1 } }


			custom_effect_tooltip = MEX_econ_project_event_chain_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Infiernillo Dam
			limit = { check_variable = { temp_project = 101 } }

			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes
			add_to_variable = { MEX_projects_PUs_reward = 1 }
			custom_effect_tooltip = MEx_project_rewards_pus_increase_tt

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = thermoelectric_plant
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Acapulco International Airport
			limit = { check_variable = { temp_project = 102 } }

			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes

			random_scope_in_array = {
				array = temp_region:MEX_econ_region_state_array
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_increase_usa_business_opinion_marginal_tt
			hidden_effect = {
				add_to_variable = { MEX_USA_business_opinion = 1 }
			}
			custom_effect_tooltip = MEX_increase_jap_business_opinion_marginal_tt
			hidden_effect = {
				add_to_variable = { MEX_JAP_business_opinion = 1 }
			}
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Central Market
			limit = { check_variable = { temp_project = 103 } }

			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_agronomics_productivity_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Tehuantepec Oil Wells
			limit = { check_variable = { temp_project = 104 } }

			set_temp_variable = { temp_value = -0.2 }
			MEX_econ_region_stimulation_decay_change = yes
			set_temp_variable = { temp_value = 5 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			add_resource = {
				type = oil
				amount = 12
				state = 476
			}

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# West
	else_if = {
		limit = {
			check_variable = { temp_region = 9 }
		}
		if = { # Guadalajara Condominium
			limit = { check_variable = { temp_project = 101 } }

			set_temp_variable = { temp_value = 5 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Plaza Monumental
			limit = { check_variable = { temp_project = 201 } }

			set_temp_variable = { temp_value = 2 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 1 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes

			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			add_political_power = 10
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	# Yucatan
	else_if = {
		limit = {
			check_variable = { temp_region = 10 }
		}
		if = { # Cancun Project
			limit = { check_variable = { temp_project = 1 } }


			custom_effect_tooltip = MEX_econ_project_event_chain_tt
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
		else_if = { # Federal Highway 307
			limit = { check_variable = { temp_project = 2 } }

			set_temp_variable = { temp_value = -0.3 }
			MEX_econ_region_stimulation_decay_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_urban_quality_of_life_percent_change = yes
			set_temp_variable = { temp_value = 3 }
			MEX_econ_region_rural_quality_of_life_percent_change = yes

			474 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			set_temp_variable = { temp_value = temp_project:MEX_econ_project_debt@var:temp_region }
			MEX_econ_region_project_get_corruption = yes
			divide_temp_variable = { temp_corruption = 100 }
			add_to_temp_variable = { temp_corruption = 1 }
			multiply_temp_variable = { temp_value = temp_corruption }
			custom_effect_tooltip = MEX_econ_project_cost_tt
		}
	}

	set_variable = { temp_project:MEX_econ_project_status@var:temp_region = 1 }

	clear_array = temp_region:MEX_econ_region_active_project_array
	resize_array = { array = temp_region:MEX_econ_region_active_project_array size = 1 value = 0 }
	clear_variable = MEX_econ_region_project_selected
}

#### 2.b.4 Goals - Any questions -> ask FunkyDepression

MEX_econ_goal_init = {
	# Effectively useless, but here just to inform future use
	set_variable = { MEX_econ_goal_GDPG_percent = 0 }
	set_variable = { MEX_econ_goal_GDPG = 0 }
	set_variable = { MEX_econ_goal_GDPG_B = 0 }
	resize_array = { MEX_econ_goal_GDPG_region = 11 } # 11 so the 10th index exists, 0th index is unused
	set_variable = { MEX_econ_goal_GDPpC = 0 }
	set_variable = { MEX_econ_goal_prod = 0 }
	set_variable = { MEX_econ_goal_unemployment = 0 }
	set_variable = { MEX_econ_goal_poverty = 0 }

	# Have to manually set (pain), but gives better granularity
	resize_array = { MEX_econ_goal_array_GDPG = 7 }
	resize_array = { MEX_econ_goal_array_GDPpC = 7 }
	resize_array = { MEX_econ_goal_array_prod = 7 }
	resize_array = { MEX_econ_goal_array_unemployment = 7 }
	resize_array = { MEX_econ_goal_array_poverty = 7 }

	set_variable = { MEX_econ_goal_array_GDPG^0 = 5.4 }
	set_variable = { MEX_econ_goal_array_GDPG^1 = 5.7 }
	set_variable = { MEX_econ_goal_array_GDPG^2 = 6.0 }
	set_variable = { MEX_econ_goal_array_GDPG^3 = 6.3 }
	set_variable = { MEX_econ_goal_array_GDPG^4 = 6.5 }
	set_variable = { MEX_econ_goal_array_GDPG^5 = 6.65 }
	set_variable = { MEX_econ_goal_array_GDPG^6 = 6.8 }

	set_variable = { MEX_econ_goal_array_GDPpC^0 = 3.2 }
	set_variable = { MEX_econ_goal_array_GDPpC^1 = 3.5 }
	set_variable = { MEX_econ_goal_array_GDPpC^2 = 3.75 }
	set_variable = { MEX_econ_goal_array_GDPpC^3 = 4.0 }
	set_variable = { MEX_econ_goal_array_GDPpC^4 = 4.2 }
	set_variable = { MEX_econ_goal_array_GDPpC^5 = 4.35 }
	set_variable = { MEX_econ_goal_array_GDPpC^6 = 4.5 }

	set_variable = { MEX_econ_goal_array_prod^0 = 1.0 }
	set_variable = { MEX_econ_goal_array_prod^1 = 1.3 }
	set_variable = { MEX_econ_goal_array_prod^2 = 1.6 }
	set_variable = { MEX_econ_goal_array_prod^3 = 1.8 }
	set_variable = { MEX_econ_goal_array_prod^4 = 2.0 }
	set_variable = { MEX_econ_goal_array_prod^5 = 2.15 }
	set_variable = { MEX_econ_goal_array_prod^6 = 2.3 }

	set_variable = { MEX_econ_goal_array_unemployment^0 = 1.0 }
	set_variable = { MEX_econ_goal_array_unemployment^1 = 1.3 }
	set_variable = { MEX_econ_goal_array_unemployment^2 = 1.6 }
	set_variable = { MEX_econ_goal_array_unemployment^3 = 1.8 }
	set_variable = { MEX_econ_goal_array_unemployment^4 = 2.0 }
	set_variable = { MEX_econ_goal_array_unemployment^5 = 2.15 }
	set_variable = { MEX_econ_goal_array_unemployment^6 = 2.3 }

	set_variable = { MEX_econ_goal_array_poverty^0 = 1.0 }
	set_variable = { MEX_econ_goal_array_poverty^1 = 1.3 }
	set_variable = { MEX_econ_goal_array_poverty^2 = 1.6 }
	set_variable = { MEX_econ_goal_array_poverty^3 = 1.8 }
	set_variable = { MEX_econ_goal_array_poverty^4 = 2.0 }
	set_variable = { MEX_econ_goal_array_poverty^5 = 2.15 }
	set_variable = { MEX_econ_goal_array_poverty^6 = 2.3 }

	# If index exceeds array size, uses step to extrapolate - while all same now, might change later
	set_variable = { MEX_econ_goal_step_GDPG = 0.1 }
	set_variable = { MEX_econ_goal_step_GDPpC = 0.1 }
	set_variable = { MEX_econ_goal_step_prod = 0.1 }
	set_variable = { MEX_econ_goal_step_unemployment = 0.1 }
	set_variable = { MEX_econ_goal_step_poverty = 0.1 }

	set_variable = { MEX_econ_goal_index_GDPG = 2 }
	set_variable = { MEX_econ_goal_index_GDPpC = 2 }
	set_variable = { MEX_econ_goal_index_prod = 2 }
	set_variable = { MEX_econ_goal_index_unemployment = 2 }
	set_variable = { MEX_econ_goal_index_poverty = 2 }

	MEX_econ_goal_set = yes
}
MEX_econ_goal_check_yearly = {
	# Do goals check, reset indices, reward
	# Uses temp variables to store goal results for comparison
	set_temp_variable = { temp_gdp = 0 }
	set_temp_variable = { temp_pop = 0 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		for_each_loop = {
			array = v:MEX_econ_region_state_array
			value = vv1

			add_to_temp_variable = { temp_gdp = vv1:state_value }
			add_to_temp_variable = { temp_pop = vv1:state_population_k }
		}
	}

	set_temp_variable = { temp_gdppc = temp_gdp }
	multiply_temp_variable = { temp_gdppc = 10 }
	divide_temp_variable = { temp_gdppc = temp_pop }
	multiply_temp_variable = { temp_gdppc = 100 }

	set_temp_variable = { temp_prod = 0 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		add_to_temp_variable = { temp_prod = v:MEX_econ_region_agronomics_productivity_percent }
	}
	divide_temp_variable = { temp_prod = 10 }

	set_temp_variable = { temp_unemployment = 0 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		set_temp_variable = { temp_add = 0 }
		for_each_loop = {
			array = v:MEX_econ_region_state_array
			value = vv1

			add_to_temp_variable = { temp_add = vv1:state_population_k }
		}
		multiply_temp_variable = { temp_add = v:MEX_econ_region_unemployed_population_percent }
		add_to_temp_variable = { temp_unemployment = temp_add }
	}
	divide_temp_variable = { temp_unemployment = temp_pop }

	set_temp_variable = { temp_poverty = MEX:poverty_rate }

	# Compare goals and increment goal count
	set_temp_variable = { temp_goal_count = 0 }
	if = {
		limit = {
			NOT = { # NOT used to get greater or equal to
				check_variable = { MEX_econ_goal_GDPG > temp_gdp }
			}
		}
		add_to_temp_variable = { temp_goal_count = 2 }
		add_to_variable = { MEX_econ_goal_index_GDPG = 1 }
	}
	else = {
		subtract_from_variable = { MEX_econ_goal_index_GDPG = 1 }
		clamp_variable = { var = MEX_econ_goal_index_GDPG min = 0 }
	}
	if = {
		limit = {
			NOT = { # NOT used to get greater or equal to
				check_variable = { MEX_econ_goal_GDPpC > temp_gdppc }
			}
		}
		add_to_temp_variable = { temp_goal_count = 1 }
		add_to_variable = { MEX_econ_goal_index_GDPpC = 1 }
	}
	else = {
		subtract_from_variable = { MEX_econ_goal_index_GDPpC = 1 }
		clamp_variable = { var = MEX_econ_goal_index_GDPpC min = 0 }
	}
	if = {
		limit = {
			NOT = { # NOT used to get greater or equal to
				check_variable = { MEX_econ_goal_prod > temp_prod }
			}
		}
		add_to_temp_variable = { temp_goal_count = 1 }
		add_to_variable = { MEX_econ_goal_index_prod = 1 }
	}
	else = {
		subtract_from_variable = { MEX_econ_goal_index_prod = 1 }
		clamp_variable = { var = MEX_econ_goal_index_prod min = 0 }
	}
	if = {
		limit = {
			NOT = { # NOT used to get greater or equal to
				check_variable = { MEX_econ_goal_unemployment < temp_unemployment }
			}
		}
		add_to_temp_variable = { temp_goal_count = 1 }
		add_to_variable = { MEX_econ_goal_index_unemployment = 1 }
	}
	else = {
		subtract_from_variable = { MEX_econ_goal_index_unemployment = 1 }
		clamp_variable = { var = MEX_econ_goal_index_unemployment min = 0 }
	}
	if = {
		limit = {
			NOT = { # NOT used to get greater or equal to
				check_variable = { MEX_econ_goal_poverty < temp_poverty }
			}
		}
		add_to_temp_variable = { temp_goal_count = 1 }
		add_to_variable = { MEX_econ_goal_index_poverty = 1 }
	}
	else = {
		subtract_from_variable = { MEX_econ_goal_index_poverty = 1 }
		clamp_variable = { var = MEX_econ_goal_index_poverty min = 0 }
	}

	# Parse results and fire event - note, ask if should delay outcome until later in the day
	if = { # Bad
		limit = { check_variable = { temp_goal_count < 3 } }
		country_event = { id = MEX_goals.2 }
	}
	else_if = { # Average
		limit = { check_variable = { temp_goal_count < 5 } }
		country_event = { id = MEX_goals.1 }
	}
	else = { # Good
	country_event = { id = MEX_goals.0 }
	}

	# Reset goals
	MEX_econ_goal_set = yes
}
MEX_econ_goal_set = {
	set_temp_variable = { temp_gdp = 0 }
	set_temp_variable = { temp_pop = 0 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		set_temp_variable = { temp_add = 0 }
		for_each_loop = {
			array = v:MEX_econ_region_state_array
			value = vv1

			add_to_temp_variable = { temp_gdp = vv1:state_value }
			add_to_temp_variable = { temp_add = vv1:state_value }
			add_to_temp_variable = { temp_pop = vv1:state_population_k }
		}
		set_variable = { MEX_econ_goal_GDPG_region^v = temp_add }
	}
	set_variable = { MEX_econ_goal_GDPG_last = temp_gdp }

	# Goal actually tracks GDP, but both are tied together so GDPG used for ease of calculation
	# GDPG - GDP value
	set_variable = { MEX_econ_goal_GDPG = temp_gdp }
	set_temp_variable = { temp_factor = 0 }
	set_temp_variable = { temp_index = MEX_econ_goal_index_GDPG }
	if = {
		limit = { NOT = { check_variable = { temp_index < 7 } } }
		set_temp_variable = { temp_offset = 0 }
		add_to_temp_variable = { temp_offset = temp_index }
		subtract_from_temp_variable = { temp_offset = 6 }
		multiply_temp_variable = { temp_offset = MEX_econ_goal_step_GDPG }
		add_to_temp_variable = { temp_factor = temp_offset }
		set_temp_variable = { temp_index = 6 }
	}
	add_to_temp_variable = { temp_factor = MEX_econ_goal_array_GDPG^temp_index }
	set_variable = { MEX_econ_goal_GDPG_percent = temp_factor }
	add_to_temp_variable = { temp_factor = 100 }
	divide_temp_variable = { temp_factor = 10 }
	multiply_variable = { MEX_econ_goal_GDPG = temp_factor }
	divide_variable = { MEX_econ_goal_GDPG = 10 }
	set_variable = { MEX_econ_goal_GDPG_B = MEX_econ_goal_GDPG }
	divide_variable = { MEX_econ_goal_GDPG_B = 1000 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		multiply_variable = { MEX_econ_goal_GDPG_region^v = temp_factor }
		divide_variable = { MEX_econ_goal_GDPG_region^v = 10 }
	}

	# GDPpC - GDPpC value
	set_variable = { MEX_econ_goal_GDPpC = temp_gdp }
	multiply_variable = { MEX_econ_goal_GDPpC = 10 }
	divide_variable = { MEX_econ_goal_GDPpC = temp_pop }
	multiply_variable = { MEX_econ_goal_GDPpC = 100 }
	set_temp_variable = { temp_factor = 100 }
	set_temp_variable = { temp_index = MEX_econ_goal_index_GDPpC }
	if = {
		limit = { NOT = { check_variable = { temp_index < 7 } } }
		set_temp_variable = { temp_offset = 0 }
		add_to_temp_variable = { temp_offset = temp_index }
		subtract_from_temp_variable = { temp_offset = 6 }
		multiply_temp_variable = { temp_offset = MEX_econ_goal_step_GDPpC }
		add_to_temp_variable = { temp_factor = temp_offset }
		set_temp_variable = { temp_index = 6 }
	}
	add_to_temp_variable = { temp_factor = MEX_econ_goal_array_GDPpC^temp_index }
	multiply_variable = { MEX_econ_goal_GDPpC = temp_factor }
	divide_variable = { MEX_econ_goal_GDPpC = 100 }

	# Prod (agricultural productivity) - not biased by region pop to incentivize equal development
	# Prod - % average
	set_variable = { MEX_econ_goal_prod = 0 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		add_to_variable = { MEX_econ_goal_prod = v:MEX_econ_region_agronomics_productivity_percent }
	}
	divide_variable = { MEX_econ_goal_prod = 10 }
	set_temp_variable = { temp_factor = 0 }
	set_temp_variable = { temp_index = MEX_econ_goal_index_prod }
	if = {
		limit = { NOT = { check_variable = { temp_index < 7 } } }
		set_temp_variable = { temp_offset = 0 }
		add_to_temp_variable = { temp_offset = temp_index }
		subtract_from_temp_variable = { temp_offset = 6 }
		multiply_temp_variable = { temp_offset = MEX_econ_goal_step_prod }
		add_to_temp_variable = { temp_factor = temp_offset }
		set_temp_variable = { temp_index = 6 }
	}
	add_to_temp_variable = { temp_factor = MEX_econ_goal_array_prod^temp_index }
	add_to_variable = { MEX_econ_goal_prod = temp_factor }
	clamp_variable = { var = MEX_econ_goal_prod max = 100 }

	# Unemployment - % of population
	set_variable = { MEX_econ_goal_unemployment = 0 }
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		set_temp_variable = { temp_add = 0 }
		for_each_loop = {
			array = v:MEX_econ_region_state_array
			value = vv1

			add_to_temp_variable = { temp_add = vv1:state_population_k }
		}
		multiply_temp_variable = { temp_add = v:MEX_econ_region_unemployed_population_percent }
		divide_temp_variable = { temp_add = 100 }
		add_to_variable = { MEX_econ_goal_unemployment = temp_add }
	}
	divide_variable = { MEX_econ_goal_unemployment = temp_pop }
	multiply_variable = { MEX_econ_goal_unemployment = 100 }
	set_temp_variable = { temp_factor = 0 }
	set_temp_variable = { temp_index = MEX_econ_goal_index_unemployment }
	if = {
		limit = { NOT = { check_variable = { temp_index < 7 } } }
		set_temp_variable = { temp_offset = 0 }
		add_to_temp_variable = { temp_offset = temp_index }
		subtract_from_temp_variable = { temp_offset = 6 }
		multiply_temp_variable = { temp_offset = MEX_econ_goal_step_unemployment }
		add_to_temp_variable = { temp_factor = temp_offset }
		set_temp_variable = { temp_index = 6 }
	}
	add_to_temp_variable = { temp_factor = MEX_econ_goal_array_unemployment^temp_index }
	subtract_from_variable = { MEX_econ_goal_unemployment = temp_factor }
	clamp_variable = { var = MEX_econ_goal_unemployment min = 0 }

	# Poverty - % of population
	set_variable = { MEX_econ_goal_poverty = MEX:poverty_rate }
	set_temp_variable = { temp_factor = 0 }
	set_temp_variable = { temp_index = MEX_econ_goal_index_poverty }
	if = {
		limit = { NOT = { check_variable = { temp_index < 7 } } }
		set_temp_variable = { temp_offset = 0 }
		add_to_temp_variable = { temp_offset = temp_index }
		subtract_from_temp_variable = { temp_offset = 6 }
		multiply_temp_variable = { temp_offset = MEX_econ_goal_step_poverty }
		add_to_temp_variable = { temp_factor = temp_offset }
		set_temp_variable = { temp_index = 6 }
	}
	add_to_temp_variable = { temp_factor = MEX_econ_goal_array_poverty^temp_index }
	subtract_from_variable = { MEX_econ_goal_poverty = temp_factor }
	clamp_variable = { var = MEX_econ_goal_poverty min = 0 }
}

#### 2.b.5 Refreshes and Cycles

# Reload all values
MEX_econ_reload = {
	MEX_econ_urban_qol_modifier_reload_begin = yes
	MEX_econ_stimulation_reload = yes
	MEX_econ_generate_graphs = yes
	MEX_econ_agronomics_reload = yes
	MEX_econ_population_reload = yes
	MEX_econ_quality_of_life_reload = yes
	MEX_econ_region_dynamic_modifier_reload = yes
	MEX_econ_urban_qol_modifier_reload_end = yes

	MEX_econ_gui_reload = yes
	MEX_calc_miracle_values = yes

	# Yassification (pie wheels)
	set_temp_variable = { MEX_econ_staple_pie_st = 0 }
	set_temp_variable = { MEX_econ_staple_pie_end = MEX_econ_region_selected:MEX_econ_region_agronomics_staple_crop_percent }

	set_variable = { MEX_econ_staple_pie_frame = MEX_econ_staple_pie_st }
	round_variable = MEX_econ_staple_pie_frame
	multiply_variable = { MEX_econ_staple_pie_frame = 1000 }
	add_to_variable = { MEX_econ_staple_pie_frame = MEX_econ_staple_pie_end }

	set_temp_variable = { MEX_econ_cash_pie_st = MEX_econ_staple_pie_end }
	set_temp_variable = { MEX_econ_cash_pie_end = MEX_econ_cash_pie_st }
	add_to_temp_variable = { MEX_econ_cash_pie_end = MEX_econ_region_selected:MEX_econ_region_agronomics_cash_crop_percent }

	set_variable = { MEX_econ_cash_pie_frame = MEX_econ_cash_pie_st }
	round_variable = MEX_econ_cash_pie_frame
	multiply_variable = { MEX_econ_cash_pie_frame = 1000 }
	add_to_variable = { MEX_econ_cash_pie_frame = MEX_econ_cash_pie_end }

	set_temp_variable = { MEX_econ_urban_pie_st = 0 }
	set_temp_variable = { MEX_econ_urban_pie_end = MEX_econ_region_selected:MEX_econ_region_urban_population_percent }

	set_variable = { MEX_econ_urban_pie_frame = MEX_econ_urban_pie_st }
	round_variable = MEX_econ_urban_pie_frame
	multiply_variable = { MEX_econ_urban_pie_frame = 1000 }
	add_to_variable = { MEX_econ_urban_pie_frame = MEX_econ_urban_pie_end }

	set_temp_variable = { MEX_econ_rural_pie_st = MEX_econ_urban_pie_end }
	set_temp_variable = { MEX_econ_rural_pie_end = MEX_econ_rural_pie_st }
	add_to_temp_variable = { MEX_econ_rural_pie_end = MEX_econ_region_selected:MEX_econ_region_rural_population_percent }

	set_variable = { MEX_econ_rural_pie_frame = MEX_econ_rural_pie_st }
	round_variable = MEX_econ_rural_pie_frame
	multiply_variable = { MEX_econ_rural_pie_frame = 1000 }
	add_to_variable = { MEX_econ_rural_pie_frame = MEX_econ_rural_pie_end }

	set_variable = { MEX_econ_urban_qol_frame = MEX_econ_region_selected:MEX_econ_region_urban_quality_of_life_percent }
	set_variable = { MEX_econ_rural_qol_frame = MEX_econ_region_selected:MEX_econ_region_rural_quality_of_life_percent }
	set_variable = { MEX_econ_stimulation_frame = MEX_econ_region_selected:MEX_econ_region_stimulation_percent }
	set_variable = { MEX_econ_crop_type_frame = MEX_econ_region_selected:MEX_econ_region_agronomics_cash_crop_percent }
	set_variable = { MEX_econ_living_divide_bar_frame = MEX_econ_region_selected:MEX_econ_region_urban_population_percent }
}

# Begin update urban qol modifier by subtracting modifier to be calculated
MEX_econ_urban_qol_modifier_reload_begin = {
	for_each_loop = {
		array = MEX_econ_region_array

		subtract_from_variable = { v:MEX_econ_region_urban_quality_of_life_percent = v:MEX_econ_region_net_urban_quality_of_life_percent_modifier }
	}
}

# Reload stimulation values
MEX_econ_stimulation_reload = {
	for_each_loop = {
		array = MEX_econ_region_array

		# state_GDP_growth_modifier affected by stimulation
		set_variable = { v:MEX_econ_region_stimulation_state_GDP_growth_modifier = v:MEX_econ_region_stimulation_percent }
		multiply_variable = { v:MEX_econ_region_stimulation_state_GDP_growth_modifier = v:MEX_econ_region_stimulation_factor }

		# stimulation's impact increased by urban pop percent
		set_temp_variable = { temp_factor = v:MEX_econ_region_urban_population_percent }
		multiply_temp_variable = { temp_factor = v:MEX_econ_region_urban_population_state_GDP_growth_factor }
		add_to_temp_variable = { temp_factor = 100 }
		divide_temp_variable = { temp_factor = 100 }
		multiply_variable = { v:MEX_econ_region_stimulation_state_GDP_growth_modifier = temp_factor }
	}
}

# Reload agronomics values
MEX_econ_agronomics_reload = {
	# take away national modifiers
	clear_variable = MEX_econ_region_agronomics_misc_income_modifier
	clear_variable = MEX_econ_region_agronomics_free_production_units_modifier

	for_each_loop = {
		array = MEX_econ_region_array

		# take away mechanic modifiers
		subtract_from_variable = { v:MEX_econ_region_net_urban_quality_of_life_percent_modifier = v:MEX_econ_region_agronomics_quality_of_life_modifier }
		subtract_from_variable = { v:MEX_econ_region_rural_quality_of_life_percent = v:MEX_econ_region_agronomics_quality_of_life_modifier }
		clamp_variable = { var = v:MEX_econ_region_rural_quality_of_life_percent min = 0 }

		# take away state modifiers
		clear_variable = v:MEX_econ_region_agronomics_migration_modifier
		clear_variable = v:MEX_econ_region_agronomics_quality_of_life_modifier
		clear_variable = v:MEX_econ_region_agronomics_misc_income_modifier
		clear_variable = v:MEX_econ_region_agronomics_free_production_units_modifier

		# migration affected by productivity
		set_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_productivity_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_migration_productivity_factor }

		add_to_variable = { v:MEX_econ_region_agronomics_migration_modifier = temp_modifier }

		# migration affected by cash crops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_cash_crop_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_migration_cash_crop_factor }

		add_to_variable = { v:MEX_econ_region_agronomics_migration_modifier = temp_modifier }

		# quality of life affected by staple crops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_staple_crop_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_quality_of_life_staple_crop_factor }

		add_to_variable = { v:MEX_econ_region_agronomics_quality_of_life_modifier = temp_modifier }

		# misc income affected by cash crops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_cash_crop_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_cash_crop_income_factor }

		add_to_variable = { v:MEX_econ_region_agronomics_misc_income_modifier = temp_modifier }

		# production units affected by prodictivity
		set_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_productivity_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_productivity_production_unit_factor }

		add_to_variable = { v:MEX_econ_region_agronomics_free_production_units_modifier = temp_modifier }

		# production units affected by cash crops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_cash_crop_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_agronomics_cash_crop_production_unit_factor }

		add_to_variable = { v:MEX_econ_region_agronomics_free_production_units_modifier = temp_modifier }

		# add back mechanic modifiers
		add_to_variable = { v:MEX_econ_region_net_urban_quality_of_life_percent_modifier = v:MEX_econ_region_agronomics_quality_of_life_modifier }
		add_to_variable = { v:MEX_econ_region_rural_quality_of_life_percent = v:MEX_econ_region_agronomics_quality_of_life_modifier }

		# add national modifiers
		add_to_variable = { MEX_econ_region_agronomics_misc_income_modifier = v:MEX_econ_region_agronomics_misc_income_modifier }
		add_to_variable = { MEX_econ_region_agronomics_free_production_units_modifier = v:MEX_econ_region_agronomics_free_production_units_modifier }
	}
	round_variable = MEX_econ_region_agronomics_free_production_units_modifier
}

# Reload population values
MEX_econ_population_reload = {
	# take away national modifiers
	clear_variable = MEX_econ_region_population_academic_base_monthly_rate
	clear_variable = MEX_econ_region_population_industrial_equipment_monthly_rate
	clear_variable = MEX_econ_region_population_industrial_expertise_monthly_rate
	clear_variable = MEX_econ_region_population_consumer_goods_use_modifier

	for_each_loop = {
		array = MEX_econ_region_array

		set_variable = { v:MEX_econ_region_population = 0 }
		for_each_loop = {
			array = v:MEX_econ_region_state_array
			value = v1

			# sum of pops in all states in region
			add_to_variable = { v:MEX_econ_region_population = v1:state_population }
		}

		# urban pops in region
		set_variable = { v:MEX_econ_region_urban_population = v:MEX_econ_region_urban_population_percent }
		divide_variable = { v:MEX_econ_region_urban_population = 100 }
		multiply_variable = { v:MEX_econ_region_urban_population = v:MEX_econ_region_population }
		round_variable = v:MEX_econ_region_urban_population

		# rural pops in region
		set_variable = { v:MEX_econ_region_rural_population = v:MEX_econ_region_population }
		subtract_from_variable = { v:MEX_econ_region_rural_population = v:MEX_econ_region_urban_population }

		# take away mechanic modifiers
		subtract_from_variable = { v:MEX_econ_region_net_urban_quality_of_life_percent_modifier = v:MEX_econ_region_population_quality_of_life_modifier }

		# take away state modifiers
		clear_variable = v:MEX_econ_region_population_quality_of_life_modifier
		clear_variable = v:MEX_econ_region_population_state_GDP_growth_modifier
		clear_variable = v:MEX_econ_region_population_academic_base_monthly_rate
		clear_variable = v:MEX_econ_region_population_industrial_equipment_monthly_rate
		clear_variable = v:MEX_econ_region_population_industrial_expertise_monthly_rate
		clear_variable = v:MEX_econ_region_population_consumer_goods_use_modifier

		# quality of life affected by unemployment
		set_temp_variable = { temp_modifier = v:MEX_econ_region_unemployed_population_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_quality_of_life_unemployed_population_factor }

		add_to_variable = { v:MEX_econ_region_population_quality_of_life_modifier = temp_modifier }

		# state GDP growth use affected by urban pops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_urban_population_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_urban_population_state_GDP_growth_factor }

		add_to_variable = { v:MEX_econ_region_population_state_GDP_growth_modifier = temp_modifier }

		# socdev affected by urban pops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_urban_population_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_urban_population_socdev_factor }

		add_to_variable = { v:MEX_econ_region_population_academic_base_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_population_industrial_equipment_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_population_industrial_expertise_monthly_rate = temp_modifier }

		# consumer goods use affected by urban pops
		set_temp_variable = { temp_modifier = v:MEX_econ_region_urban_population_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_urban_population_consumer_goods_use_factor }

		add_to_variable = { v:MEX_econ_region_population_consumer_goods_use_modifier = temp_modifier }

		# add back mechanic modifiers
		add_to_variable = { v:MEX_econ_region_net_urban_quality_of_life_percent_modifier = v:MEX_econ_region_population_quality_of_life_modifier }

		# add national modifiers
		add_to_variable = { MEX_econ_region_population_academic_base_monthly_rate = v:MEX_econ_region_population_academic_base_monthly_rate }
		add_to_variable = { MEX_econ_region_population_industrial_equipment_monthly_rate = v:MEX_econ_region_population_industrial_equipment_monthly_rate }
		add_to_variable = { MEX_econ_region_population_industrial_expertise_monthly_rate = v:MEX_econ_region_population_industrial_expertise_monthly_rate }
		add_to_variable = { MEX_econ_region_population_consumer_goods_use_modifier = v:MEX_econ_region_population_consumer_goods_use_modifier }
	}
}

# reload quality of life values
MEX_econ_quality_of_life_reload = {
	# take away national modifiers
	clear_variable = MEX_econ_region_quality_of_life_academic_base_monthly_rate
	clear_variable = MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate
	clear_variable = MEX_econ_region_quality_of_life_research_facilities_monthly_rate
	clear_variable = MEX_econ_region_quality_of_life_agriculture_monthly_rate
	clear_variable = MEX_econ_region_quality_of_life_healthcare_monthly_rate
	clear_variable = MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate
	clear_variable = MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate

	for_each_loop = {
		array = MEX_econ_region_array

		# average quality of life in region
		set_variable = { v:MEX_econ_region_average_quality_of_life_percent = v:MEX_econ_region_urban_quality_of_life_percent }
		add_to_variable = { v:MEX_econ_region_average_quality_of_life_percent = v:MEX_econ_region_rural_quality_of_life_percent }
		divide_variable = { v:MEX_econ_region_average_quality_of_life_percent = 2 }

		# take away state modifiers
		clear_variable = v:MEX_econ_region_quality_of_life_academic_base_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_research_facilities_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_agriculture_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_healthcare_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate
		clear_variable = v:MEX_econ_region_quality_of_life_migration_modifier
		clear_variable = v:MEX_econ_region_quality_of_life_stimulation_decay_modifier

		# socdev affected by urban quality of life
		set_temp_variable = { temp_modifier = v:MEX_econ_region_urban_quality_of_life_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_quality_of_life_socdev_factor }

		add_to_variable = { v:MEX_econ_region_quality_of_life_academic_base_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_research_facilities_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_agriculture_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_healthcare_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate = temp_modifier }

		# socdev affected by rural quality of life
		set_temp_variable = { temp_modifier = v:MEX_econ_region_rural_quality_of_life_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_quality_of_life_socdev_factor }

		add_to_variable = { v:MEX_econ_region_quality_of_life_academic_base_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_research_facilities_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_agriculture_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_healthcare_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate = temp_modifier }
		add_to_variable = { v:MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate = temp_modifier }

		# migration affected by quality of life difference between urban and rural
		set_temp_variable = { temp_modifier = v:MEX_econ_region_urban_quality_of_life_percent }
		subtract_from_temp_variable = { temp_modifier = v:MEX_econ_region_rural_quality_of_life_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_migration_quality_of_life_factor }

		add_to_variable = { v:MEX_econ_region_quality_of_life_migration_modifier = temp_modifier }

		# stimulation decay affected by urban quality of life
		set_temp_variable = { temp_modifier = v:MEX_econ_region_urban_quality_of_life_percent }
		multiply_temp_variable = { temp_modifier = v:MEX_econ_region_stimulation_decay_quality_of_life_factor }

		add_to_variable = { v:MEX_econ_region_quality_of_life_stimulation_decay_modifier = temp_modifier }

		# add national modifiers
		add_to_variable = { MEX_econ_region_quality_of_life_academic_base_monthly_rate = v:MEX_econ_region_quality_of_life_academic_base_monthly_rate }
		add_to_variable = { MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate = v:MEX_econ_region_quality_of_life_admin_efficiency_monthly_rate }
		add_to_variable = { MEX_econ_region_quality_of_life_research_facilities_monthly_rate = v:MEX_econ_region_quality_of_life_research_facilities_monthly_rate }
		add_to_variable = { MEX_econ_region_quality_of_life_agriculture_monthly_rate = v:MEX_econ_region_quality_of_life_agriculture_monthly_rate }
		add_to_variable = { MEX_econ_region_quality_of_life_healthcare_monthly_rate = v:MEX_econ_region_quality_of_life_healthcare_monthly_rate }
		add_to_variable = { MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate = v:MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate }
		add_to_variable = { MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate = v:MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate }
	}
}

# Force update dynamic modifiers
MEX_econ_region_dynamic_modifier_reload = {
	# update the national modifier totals
	set_variable = { MEX_econ_region_total_academic_base_monthly_rate = MEX_econ_region_population_academic_base_monthly_rate }
	add_to_variable = { MEX_econ_region_total_academic_base_monthly_rate = MEX_econ_region_quality_of_life_academic_base_monthly_rate }
	set_variable = { MEX_econ_region_total_industrial_equipment_monthly_rate = MEX_econ_region_population_industrial_expertise_monthly_rate }
	add_to_variable = { MEX_econ_region_total_industrial_equipment_monthly_rate = MEX_econ_region_quality_of_life_industrial_equipment_monthly_rate }
	set_variable = { MEX_econ_region_total_industrial_expertise_monthly_rate = MEX_econ_region_population_industrial_equipment_monthly_rate }
	add_to_variable = { MEX_econ_region_total_industrial_expertise_monthly_rate = MEX_econ_region_quality_of_life_industrial_expertise_monthly_rate }

	for_each_loop = {
		array = MEX_econ_region_array

		for_each_scope_loop = {
			array = v:MEX_econ_region_state_array

			force_update_dynamic_modifier = yes
		}
	}
}

# Finish update urban qol modifier by adding recalculated modifier back and clamping
MEX_econ_urban_qol_modifier_reload_end = {
	for_each_loop = {
		array = MEX_econ_region_array

		add_to_variable = { v:MEX_econ_region_urban_quality_of_life_percent = v:MEX_econ_region_net_urban_quality_of_life_percent_modifier }
		clamp_variable = { var = v:MEX_econ_region_urban_quality_of_life_percent min = 0 max = 100 }
	}
}

# 7.0.0 Econ Dynmods
# Update econ dynmods
# any _store variable is used to, well, store the past values to calculate changes in modifier
MEX_econ_global_dynamic_modifier_monthly = {
	# Calculate differences between past and current modifier values
	set_temp_variable = { diff_1 = modifier@MEX_econ_global_urban_quality_of_life_modifier }
	subtract_from_temp_variable = { diff_1 = MEX_econ_global_urban_quality_of_life_modifier_store }
	set_temp_variable = { diff_2 = modifier@MEX_econ_global_rural_quality_of_life_modifier }
	subtract_from_temp_variable = { diff_2 = MEX_econ_global_rural_quality_of_life_modifier_store }
	set_temp_variable = { diff_3 = modifier@MEX_econ_global_agronomic_productivity_modifier }
	subtract_from_temp_variable = { diff_3 = MEX_econ_global_agronomic_productivity_modifier_store }
	set_temp_variable = { diff_4 = modifier@MEX_econ_global_base_stimulation_modifier }
	subtract_from_temp_variable = { diff_4 = MEX_econ_global_base_stimulation_modifier_store }

	for_each_loop = {
		array = MEX_econ_region_array

		add_to_variable = { v:MEX_econ_region_urban_quality_of_life_percent = diff_1 }
		add_to_variable = { v:MEX_econ_region_rural_quality_of_life_percent = diff_2 }
		add_to_variable = { v:MEX_econ_region_agronomics_productivity_percent = diff_3 }
		add_to_variable = { v:MEX_econ_region_base_stimulation_percent = diff_4 }

		clamp_variable = { var = v:MEX_econ_region_urban_quality_of_life_percent max = 100 }
		clamp_variable = { var = v:MEX_econ_region_rural_quality_of_life_percent max = 100 }
		clamp_variable = { var = v:MEX_econ_region_agronomics_productivity_percent max = 100 }
		clamp_variable = { var = v:MEX_econ_region_base_stimulation_percent max = 100 }
		clamp_variable = { var = v:MEX_econ_region_stimulation_percent min = v:MEX_econ_region_base_stimulation_percent }
	}

	# Reset stores
	set_variable = { MEX_econ_global_urban_quality_of_life_modifier_store = modifier@MEX_econ_global_urban_quality_of_life_modifier }
	set_variable = { MEX_econ_global_rural_quality_of_life_modifier_store = modifier@MEX_econ_global_rural_quality_of_life_modifier }
	set_variable = { MEX_econ_global_agronomic_productivity_modifier_store = modifier@MEX_econ_global_agronomic_productivity_modifier }
	set_variable = { MEX_econ_global_base_stimulation_modifier_store = modifier@MEX_econ_global_base_stimulation_modifier }
}
# Specific dynmod for Lozano affecting Pacific states' base stim
MEX_econ_pacific_dynamic_modifier_monthly = {
	# Calculate differences between past and current modifier values
	set_temp_variable = { diff = modifier@MEX_econ_pacific_base_stimulation_modifier }
	subtract_from_temp_variable = { diff = MEX_econ_pacific_base_stimulation_modifier_store }

	add_to_temp_array = { pacific_regions = 1 }
	add_to_temp_array = { pacific_regions = 6 }
	add_to_temp_array = { pacific_regions = 7 }
	add_to_temp_array = { pacific_regions = 8 }
	add_to_temp_array = { pacific_regions = 9 }

	for_each_loop = {
		array = pacific_regions

		add_to_variable = { v:MEX_econ_region_base_stimulation_percent = diff }

		clamp_variable = { var = v:MEX_econ_region_base_stimulation_percent max = 100 }
		clamp_variable = { var = v:MEX_econ_region_stimulation_percent min = v:MEX_econ_region_base_stimulation_percent }
	}
	clear_temp_array = pacific_regions
	# Reset stores
	set_variable = { MEX_econ_pacific_base_stimulation_modifier_store = modifier@MEX_econ_pacific_base_stimulation_modifier }
}

# Moved one hour after month tick as well to use new GDP data
MEX_econ_debt_update_monthly = {
	# GDP calcs moved earlier for GDP growth calculations
	set_temp_variable = { temp_region_pop = 0 }
	set_temp_variable = { GDP_new = 0 } # Graphs have yet to be updated, so summing gdp through loop
	for_each_loop = {
		array = v:MEX_econ_region_state_array
		value = vv1

		add_to_temp_variable = { GDP_new = vv1:state_value }
	}

	for_each_loop = {
		array = v:MEX_econ_region_state_array
		value = vv1

		add_to_temp_variable = { temp_region_pop = vv1:state_population_k }
	}

	#unemploy
	set_temp_variable = { Unemployment2debt = v:MEX_econ_region_unemployed_population_percent }
	divide_temp_variable = { Unemployment2debt = 100 }
	multiply_temp_variable = { Unemployment2debt = temp_region_pop}
	multiply_temp_variable = { Unemployment2debt = MEX.MEX_econ_unemployment_debt_conversion }

	#QoL
	set_temp_variable = { percenturbanqol = v:MEX_econ_region_urban_quality_of_life_percent }
	set_temp_variable = { percentruralqol = v:MEX_econ_region_rural_quality_of_life_percent }
	divide_temp_variable = { percenturbanqol = 100 }
	divide_temp_variable = { percentruralqol = 100 }
	set_temp_variable = { popurbanqol = temp_region_pop }
	multiply_temp_variable = { popurbanqol = v:MEX_econ_region_urban_population_percent }
	divide_temp_variable = { popurbanqol = 100 }
	multiply_temp_variable = { popurbanqol = percenturbanqol }
	set_temp_variable = { popruralqol = temp_region_pop }
	multiply_temp_variable = { popruralqol = v:MEX_econ_region_rural_population_percent }
	divide_temp_variable = { popruralqol = 100 }
	multiply_temp_variable = { popruralqol = percentruralqol }
	multiply_temp_variable = { popurbanqol = MEX.MEX_econ_urban_qol_debt_conversion }
	multiply_temp_variable = { popruralqol = MEX.MEX_econ_rural_qol_debt_conversion }
	set_temp_variable = { QOL2debt = popurbanqol }
	add_to_temp_variable = { QOL2debt = popruralqol }

	#GDP - I should've done it on a region level a long time ago
	set_temp_variable = { GDP2debt = GDP_new }
	subtract_from_temp_variable = { GDP2debt = v:MEX_econ_graph_GDP^13 } # last month region gdp
	multiply_temp_variable = { GDP2debt = MEX.MEX_econ_gdp_debt_conversion }

	#productivity
	set_temp_variable = { Prod2debt = v:MEX_econ_region_agronomics_productivity_percent }
	divide_temp_variable = { Prod2debt = 100 }
	multiply_temp_variable = { Prod2debt = temp_region_pop }
	multiply_temp_variable = { Prod2debt = v:MEX_econ_region_rural_population_percent }
	divide_temp_variable = { Prod2debt = 100 }
	multiply_temp_variable = { Prod2debt = MEX.MEX_econ_productivity_debt_conversion }

	add_to_variable = { v:region_debt_value = Unemployment2debt }
	add_to_variable = { v:region_debt_value = QOL2debt }
	subtract_from_variable = { v:region_debt_value = Prod2debt }
	subtract_from_variable = { v:region_debt_value = GDP2debt }
	clamp_variable = { var = v:region_debt_value min = 0 }

	set_temp_variable = { currentDGDP = v:region_debt_value }
	divide_temp_variable = { currentDGDP = v:GDP_new }

	set_temp_variable = { stimulation_decrease = currentDGDP }
	multiply_temp_variable = { stimulation_decrease = MEX_econ_dgdp_stimulation_conversion }

	clamp_temp_variable = { var = stimulation_decrease min = 0 }
	subtract_from_variable = { v:MEX_econ_region_stimulation_percent = stimulation_decrease }
	clamp_variable = { var = v:MEX_econ_region_stimulation_percent min = v:MEX_econ_region_base_stimulation_percent max = 100 }
}

# Recalculates debt limit every year, or when the option is taken to avert a debt crisis by enabling more spending
# NOTE: Due to an irregularity I can't find, this scripted effect is not used to calculate initial debts, instead it is hard-coded into the MEX_econ_setup scripted effect
# If this calculation is ever changed, please Ctrl+F the text inside the quotation marks "Annoyingly, the scripted effect that" and change the debt values after triggering this function
# For any questions, ask FunkyDepression
MEX_econ_debt_limit_reload = {
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		MEX_econ_debt_limit_reload_region = yes
	}
	MEX_econ_gui_reload = yes
}

MEX_econ_debt_limit_reload_region = {
	# Debt limit is calculated to be 0.60 * GDP + 0.40 * debt of region
	set_variable = { v:MEX_econ_region_debt_limit = 0 }
	set_temp_variable = { temp_gdp = 0 }
	set_temp_variable = { temp_debt = v:region_debt_value }
	for_each_loop = {
		array = v:MEX_econ_region_state_array
		value = vv1

		add_to_temp_variable = { temp_gdp = vv1:state_value }
	}
	multiply_temp_variable = { temp_gdp = MEX.MEX_econ_GDP_debt_limit_conversion }
	multiply_temp_variable = { temp_debt = MEX.MEX_econ_debt_debt_limit_conversion }
	add_to_variable = { v:MEX_econ_region_debt_limit = temp_gdp }
	add_to_variable = { v:MEX_econ_region_debt_limit = temp_debt }
	for_loop_effect = {
		start = 0
		end = 14
		value = idx
		set_variable = { v:MEX_econ_graph_debt_limit^idx = v:MEX_econ_region_debt_limit }
	}
}

# Checks each region if sum of states' debt exceeds regional debt limit
MEX_econ_debt_limit_check = {
	debt_crisis_length_decider = yes
	for_each_loop = {
		array = MEX_econ_region_array
		value = v

		if = {
			limit = {
				check_variable = { v:region_debt_value > v:MEX_econ_region_debt_limit }
			}
			MEX_econ_debt_crisis_activate = yes
		}
	}
}

# Until December 1st if October or November, December 16th if December
debt_crisis_length_decider = {
	if = {
		limit = {
			check_variable = { MEX_month_num = 9 } # October
		}
		set_variable = { MEX_econ_debt_crisis_length = 60 }
	}
	else_if = {
		limit = {
			check_variable = { MEX_month_num = 10 } # November
		}
		set_variable = { MEX_econ_debt_crisis_length = 29 }
	}
	else_if = {
		limit = {
			check_variable = { MEX_month_num = 11 } # December
		}
		set_variable = { MEX_econ_debt_crisis_length = 14 }
	}
}

MEX_econ_debt_crisis_activate = {
	# Decide between each mission based on v (Mexico region id)
	# Use flags to prevent double firing
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_1_in_progress }
			check_variable = { v = 1 }
		}
		activate_mission = MEX_debt_crisis_1
		set_country_flag = MEX_debt_crisis_1_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_2_in_progress }
			check_variable = { v = 2 }
		}
		activate_mission = MEX_debt_crisis_2
		set_country_flag = MEX_debt_crisis_2_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_3_in_progress }
			check_variable = { v = 3 }
		}
		activate_mission = MEX_debt_crisis_3
		set_country_flag = MEX_debt_crisis_3_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_4_in_progress }
			check_variable = { v = 4 }
		}
		activate_mission = MEX_debt_crisis_4
		set_country_flag = MEX_debt_crisis_4_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_5_in_progress }
			check_variable = { v = 5 }
		}
		activate_mission = MEX_debt_crisis_5
		set_country_flag = MEX_debt_crisis_5_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_6_in_progress }
			check_variable = { v = 6 }
		}
		activate_mission = MEX_debt_crisis_6
		set_country_flag = MEX_debt_crisis_6_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_7_in_progress }
			check_variable = { v = 7 }
		}
		activate_mission = MEX_debt_crisis_7
		set_country_flag = MEX_debt_crisis_7_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_8_in_progress }
			check_variable = { v = 8 }
		}
		activate_mission = MEX_debt_crisis_8
		set_country_flag = MEX_debt_crisis_8_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_9_in_progress }
			check_variable = { v = 9 }
		}
		activate_mission = MEX_debt_crisis_9
		set_country_flag = MEX_debt_crisis_9_in_progress
	}
	if = {
		limit = {
			NOT = { has_country_flag = MEX_debt_crisis_10_in_progress }
			check_variable = { v = 10 }
		}
		activate_mission = MEX_debt_crisis_10
		set_country_flag = MEX_debt_crisis_10_in_progress
	}
}
# Effects for debt crisis resolution, takes the region in temp variable temp_region
MEX_econ_debt_crisis_intervene = {
	set_temp_variable = { temp_value = -8 }
	set_temp_variable = { temp_value_b = -8 }
	MEX_econ_region_combined_stimulation_percent_change = yes
	add_political_power = -20

	set_temp_variable = { MEX_econ_decision_debt = temp_region:region_debt_value }
	multiply_temp_variable = { MEX_econ_decision_debt = -1 }
	divide_temp_variable = { MEX_econ_decision_debt = 2 }
	MEX_econ_region_debt_change = yes

	divide_temp_variable = { MEX_econ_decision_debt = 1000 }
	set_temp_variable = { money_reserves_temp = MEX_econ_decision_debt }
	econ_money_reserves_change_raw_money = yes
	MEX_econ_debt_limit_reload = yes

	MEX_econ_reload = yes
	MEX_econ_region_map_value_change = yes
}
MEX_econ_debt_crisis_neglect = {
	set_temp_variable = { temp_value = -15 }
	set_temp_variable = { temp_value_b = -15 }
	MEX_econ_region_combined_stimulation_percent_change = yes
	set_temp_variable = { temp_value = 5 }
	MEX_econ_region_unemployed_population_percent_change = yes
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_urban_quality_of_life_percent_change = yes
	set_temp_variable = { temp_value = -5 }
	MEX_econ_region_rural_quality_of_life_percent_change = yes
	add_stability = -0.05

	set_temp_variable = { MEX_econ_decision_debt = temp_region:region_debt_value }
	multiply_temp_variable = { MEX_econ_decision_debt = -1 }
	divide_temp_variable = { MEX_econ_decision_debt = 3 }
	MEX_econ_region_debt_change = yes

	MEX_econ_reload = yes
	MEX_econ_region_map_value_change = yes
}

# Force update GUIs
MEX_econ_gui_reload = {
	add_to_variable = { MEX_econ_mech_dirty = 0.01 }
	add_to_variable = { MEX_econ_project_dirty = 0.01 }
}

MEX_econ_pulse = {
	subtract_from_variable = { MEX_econ_pulse_timer_1 = 1 }

	if = {
		limit = {
			check_variable = { MEX_econ_pulse_timer_1 = 0 }
		}
		MEX_econ_pulse_1 = yes
		set_variable = { MEX_econ_pulse_timer_1 = 14 }
	}

# Monthly pulse moved to on actions
#	if = {
#		limit = {
#			check_variable = { MEX_econ_pulse_timer_2 = 0 }
#		}
#		MEX_econ_pulse_2 = yes
#		set_variable = { MEX_econ_pulse_timer_2 = 30 }
#	}

	MEX_econ_pulse_3 = yes
}
mex_swaf = {

	log = "[?1425.state_population_k]"
}

# Pulse effect every two weeks
MEX_econ_pulse_1 = {
	for_each_loop = {
		array = MEX_econ_region_array

		# decay stimulation in region
		# min value is base stimulation
		subtract_from_variable = { v:MEX_econ_region_stimulation_percent = v:MEX_econ_region_stimulation_decay }
		add_to_variable = { v:MEX_econ_region_stimulation_percent = v:MEX_econ_region_quality_of_life_stimulation_decay_modifier }
		clamp_variable = { var = v:MEX_econ_region_stimulation_percent min = v:MEX_econ_region_base_stimulation_percent max = 100}
	}

	MEX_econ_region_map_value_change = yes
	MEX_econ_reload = yes
}
# Iterates through all regions and refreshes their regional graphs, additionally cycling the graph months
MEX_econ_refresh_all_graphs_monthly = {
	for_loop_effect = {
		start = 0
		end = 13
		value = idx

		set_temp_variable = { right = idx }
		add_to_temp_variable = { right = 1 }

		set_variable = { MEX_econ_graph_months^idx = MEX_econ_graph_months^right }
	}
	set_variable = { MEX_econ_graph_months^13 = MEX_econ_graph_month }
	add_to_variable = { MEX_econ_graph_month = 1 }

	for_each_loop = {
		array = MEX_econ_region_array

		MEX_econ_refresh_graph_monthly = yes
	}
}
# Shifts all previous data in a region back one index and fills new data
MEX_econ_refresh_graph_monthly = {
	for_loop_effect = {
		start = 0
		end = 13
		value = idx

		set_temp_variable = { right = idx }
		add_to_temp_variable = { right = 1 }

		# Stimulation
		set_variable = { v:MEX_econ_graph_GDP^idx = v:MEX_econ_graph_GDP^right }
		set_variable = { v:MEX_econ_graph_GDP_Growth^idx = v:MEX_econ_graph_GDP_Growth^right }
		set_variable = { v:MEX_econ_graph_GDPPC^idx = v:MEX_econ_graph_GDPPC^right }
		set_variable = { v:MEX_econ_graph_debt^idx = v:MEX_econ_graph_debt^right }

		# Productivity
		set_variable = { v:MEX_econ_graph_productivity^idx = v:MEX_econ_graph_productivity^right }

		# Population
		set_variable = { v:MEX_econ_graph_unemployment^idx = v:MEX_econ_graph_unemployment^right }
		set_variable = { v:MEX_econ_graph_urban_unemployment^idx = v:MEX_econ_graph_urban_unemployment^right }
		set_variable = { v:MEX_econ_graph_rural_unemployment^idx = v:MEX_econ_graph_rural_unemployment^right }
		set_variable = { v:MEX_econ_graph_poverty^idx = v:MEX_econ_graph_poverty^right }
		set_variable = { v:MEX_econ_graph_urban_poverty^idx = v:MEX_econ_graph_urban_poverty^right }
		set_variable = { v:MEX_econ_graph_rural_poverty^idx = v:MEX_econ_graph_rural_poverty^right }

		# Migration
		set_variable = { v:MEX_econ_graph_migration^idx = v:MEX_econ_graph_migration^right }
		set_variable = { v:MEX_econ_graph_population^idx = v:MEX_econ_graph_population^right }
	}

	# Stimulation
	set_variable = { v:MEX_econ_graph_GDP^13 = 0 }
	set_variable = { v:MEX_econ_graph_GDP_Growth^13 = 0 }
	set_variable = { v:MEX_econ_graph_GDPPC^13 = 0 }
	set_variable = { v:MEX_econ_graph_debt^13 = 0 }

	# Productivity
	set_variable = { v:MEX_econ_graph_productivity^13 = 0 }

	# Population
	set_variable = { v:MEX_econ_graph_unemployment^13 = 0 }
	set_variable = { v:MEX_econ_graph_urban_unemployment^13 = 0 }
	set_variable = { v:MEX_econ_graph_rural_unemployment^13 = 0 }
	set_variable = { v:MEX_econ_graph_poverty^13 = 0 }
	set_variable = { v:MEX_econ_graph_urban_poverty^13 = 0 }
	set_variable = { v:MEX_econ_graph_rural_poverty^13 = 0 }

	# Migration
	set_variable = { v:MEX_econ_graph_migration^13 = 0 }
	set_variable = { v:MEX_econ_graph_population^13 = 0 }

	# Migration factor precalculation
	set_temp_variable = { temp_migration_factor = 100 }
	add_to_temp_variable = { temp_migration_factor = v:MEX_econ_region_agronomics_migration_modifier }
	add_to_temp_variable = { temp_migration_factor = v:MEX_econ_region_quality_of_life_migration_modifier }

	set_temp_variable = { regionpop = 0 }
	for_each_loop = {
		array = v:MEX_econ_region_state_array
		value = vv1

		#GDP
		add_to_variable = { v:MEX_econ_graph_GDP^13 = vv1:state_value }
		add_to_temp_variable = { regionpop = vv1:state_population_k }

		set_temp_variable = { currentMig = v:MEX_econ_region_population_base_migration_percent }
		multiply_temp_variable = { currentMig = temp_migration_factor }
		multiply_temp_variable = { currentMig = vv1:state_population_k }
		divide_temp_variable = { currentMig = 10000 } # division twice by 100 for converting both temp_migration_factor and base_migration_percent to decimals
		add_to_variable = { v:MEX_econ_graph_migration^13 = currentMig }

		add_to_variable = { v:MEX_econ_graph_population^13 = vv1:state_population_k }

		set_temp_variable = { unemployedfolk = v:MEX_econ_region_unemployed_population_percent }
		divide_temp_variable = { unemployedfolk = 100 }
		multiply_temp_variable = { unemployedfolk = vv1:state_population_k }

		set_temp_variable = { unemployedurb = unemployedfolk }
		multiply_temp_variable = { unemployedurb = v:MEX_econ_region_urban_population_percent }
		divide_temp_variable = { unemployedurb = 100 }
		add_to_variable = { v:MEX_econ_graph_urban_unemployment^13 = unemployedurb }

		set_temp_variable = { unemployedrur = unemployedfolk }
		multiply_temp_variable = { unemployedrur = v:MEX_econ_region_rural_population_percent }
		divide_temp_variable = { unemployedrur = 100 }
		add_to_variable = { v:MEX_econ_graph_rural_unemployment^13 = unemployedrur }

		set_temp_variable = { currentPov = MEX:poverty_rate }
		divide_temp_variable = { currentPov = 100 }
		multiply_temp_variable = { currentPov = vv1:state_population_k }

		set_temp_variable = { currenturbPov = currentPov }
		divide_temp_variable = { currenturbPov = 100 }
		multiply_temp_variable = { currenturbPov = v:MEX_econ_region_urban_population_percent }
		add_to_variable = { v:MEX_econ_graph_urban_poverty^13 = currenturbPov }

		set_temp_variable = { currentrurPov = currentPov }
		divide_temp_variable = { currentrurPov = 100 }
		multiply_temp_variable = { currentrurPov = v:MEX_econ_region_rural_population_percent }
		add_to_variable = { v:MEX_econ_graph_rural_poverty^13 = currentrurPov }
	}

	set_variable = { v:MEX_econ_graph_debt^13 = v:region_debt_value }

	set_variable = { v:MEX_econ_graph_productivity^13 = v:MEX_econ_region_agronomics_productivity_percent }
	set_variable = { v:MEX_econ_graph_unemployment^13 = v:MEX_econ_region_unemployed_population_percent }
	set_variable = { v:MEX_econ_graph_poverty^13 = MEX:poverty_rate }

	set_temp_variable = { currentGDPG = v:MEX_econ_graph_GDP^13 }
	subtract_from_temp_variable = { currentGDPG = v:MEX_econ_graph_GDP^12 }
	divide_temp_variable = { currentGDPG = v:MEX_econ_graph_GDP^12 }
	multiply_temp_variable = { currentGDPG = 1200 }

	add_to_variable = { v:MEX_econ_graph_GDP_Growth^13 = currentGDPG }

	set_temp_variable = { currentPC = v:MEX_econ_graph_GDP^13 }
	multiply_temp_variable = { currentPC = 100 }
	divide_temp_variable = { currentPC = regionpop }
	multiply_temp_variable = { currentPC = 10 }

	add_to_variable = { v:MEX_econ_graph_GDPPC^13 = currentPC }

	MEX_econ_reload = yes
}
# Pulse effect every month
MEX_econ_pulse_2 = {
	add_to_variable = { MEX_month_num = 1 } # 0 = January ... 11 = December
	if = {
		limit = {
			check_variable = { MEX_month_num = 12 }
		}
		set_variable = { MEX_month_num = 0 }
		add_to_variable = { MEX_year_num = 1 } # 0 = add social spending in check later
	}
	# Month checks for regional debt limit calculations
	if = {
		limit = {
			check_variable = { MEX_month_num = 0 } # January
		}
		# Clear any persistent debt crisis flags
		clr_country_flag = MEX_debt_crisis_1_in_progress
		clr_country_flag = MEX_debt_crisis_2_in_progress
		clr_country_flag = MEX_debt_crisis_3_in_progress
		clr_country_flag = MEX_debt_crisis_4_in_progress
		clr_country_flag = MEX_debt_crisis_5_in_progress
		clr_country_flag = MEX_debt_crisis_6_in_progress
		clr_country_flag = MEX_debt_crisis_7_in_progress
		clr_country_flag = MEX_debt_crisis_8_in_progress
		clr_country_flag = MEX_debt_crisis_9_in_progress
		clr_country_flag = MEX_debt_crisis_10_in_progress

		# Yearly goal refresh triggered in MEX.1 event to use new month's GDP
		#MEX_econ_goal_check_yearly = yes
	}
	if = {
		limit = {
			OR = {
				check_variable = { MEX_month_num = 9 }  # October
				check_variable = { MEX_month_num = 10 } # November
				check_variable = { MEX_month_num = 11 } # December
			}
		}
		MEX_econ_debt_limit_check = yes
	}

	for_each_loop = {
		array = MEX_econ_region_array

		# migration time
		set_temp_variable = { temp_migration_factor = 100 }
		add_to_temp_variable = { temp_migration_factor = v:MEX_econ_region_agronomics_migration_modifier }
		add_to_temp_variable = { temp_migration_factor = v:MEX_econ_region_quality_of_life_migration_modifier }

		set_variable = { v:MEX_econ_region_population_migration_percent = v:MEX_econ_region_population_base_migration_percent }
		multiply_variable = { v:MEX_econ_region_population_migration_percent = temp_migration_factor }
		divide_variable = { v:MEX_econ_region_population_migration_percent = 100 }

		set_temp_variable = { temp_migration_actual = v:MEX_econ_region_rural_population_percent }

		add_to_variable = { v:MEX_econ_region_urban_population_percent = v:MEX_econ_region_population_migration_percent }
		subtract_from_variable = { v:MEX_econ_region_rural_population_percent = v:MEX_econ_region_population_migration_percent }


		clamp_variable = { var = v:MEX_econ_region_urban_population_percent min = 0 max = 100 }
		clamp_variable = { var = v:MEX_econ_region_rural_population_percent min = 0 max = 100 }

		subtract_from_temp_variable = { temp_migration_actual = v:MEX_econ_region_rural_population_percent }

		# increase unemployment
		set_temp_variable = { temp_value = temp_migration_actual }
		multiply_temp_variable = { temp_value = v:MEX_econ_region_unemployed_population_factor }
		add_to_variable = { v:MEX_econ_region_unemployed_population_percent = temp_value }
		clamp_variable = { var = v:MEX_econ_region_unemployed_population_percent min = 0 max = 100 }

	}

	MEX_econ_region_map_value_change = yes
	MEX_econ_reload = yes
	MEX = { # Refreshes graph and debt one hour later with new GDP
		country_event = { id = MEX.1 hours = 1 }
	}
}
# result_s: approximate sin(angle), angle is a degree count from 0-359
#MEX_run_sin = {
#	if = {
#		limit = {
#			check_variable = { angle > 180 }
#		}
#		subtract_from_temp_variable = { angle = 180 }
#		set_temp_variable = { decreased = 1 }
#	}
#
#	set_temp_variable = { up_s = angle }
#	multiply_temp_variable = { up_s = 4 }
#	set_temp_variable = { up_s_2 = 180 }
#	subtract_from_temp_variable = { up_s_2 = angle }
#	multiply_temp_variable = { up_s = up_s_2 }
#
#	set_temp_variable = { down_s = 40500 }
#	set_temp_variable = { down_s_2 = 180 }
#	subtract_from_temp_variable = { down_s_2 = angle }
#	multiply_temp_variable = { down_s_2 = angle }
#	subtract_from_temp_variable = { down_s = down_s_2 }
#
#	set_temp_variable = { result_s = up_s }
#	divide_temp_variable = { result_s = down_s }
#
#	if = {
#		limit = {
#			check_variable = { decreased = 1 }
#		}
#		multiply_temp_variable = { result_s = -1 }
#		add_to_temp_variable = { angle = 180 }
#		set_temp_variable = { decreased = 0 }
#	}
#}



# Pulse effect every day
MEX_econ_pulse_3 = {
	clear_array = MEX_region_project_alert_array
	for_each_loop = {
		array = MEX_econ_region_array
		value = vv1

		for_each_loop = {
			array = vv1:MEX_econ_region_active_project_array
			value = vv2

			if = {
				limit = {
					check_variable = { vv2 > 0 }
					check_variable = { vv2:MEX_econ_project_active_phase@var:vv1 < vv2:MEX_econ_project_active_phase_max@var:vv1 }
				}
				add_to_variable = { vv2:MEX_econ_project_active_phase_day@var:vv1 = 1 }
				add_to_variable = { vv2:MEX_econ_project_active_total_day@var:vv1 = 1 }

				set_variable = { vv2:MEX_econ_project_active_phase@var:vv1 = vv2:MEX_econ_project_active_phase_day@var:vv1 }
				multiply_variable = { vv2:MEX_econ_project_active_phase@var:vv1 = vv2:MEX_econ_project_active_phase_max@var:vv1 }
				divide_variable = { vv2:MEX_econ_project_active_phase@var:vv1 = vv2:MEX_econ_project_active_phase_duration@var:vv1 }

				MEX_econ_region_project_get_corruption = yes
				set_variable = { vv2:MEX_econ_project_active_corruption@var:vv1 = temp_corruption }

				if = {
					limit = {
						NOT = { check_variable = { vv2:MEX_econ_project_active_phase@var:vv1 < vv2:MEX_econ_project_active_phase_max@var:vv1 } }
					}
					set_temp_variable = { temp_region = vv1 }
					set_temp_variable = { temp_project = vv2 }
					MEX_econ_region_project_phase_change = yes
				}
			}
			if = {
				limit = { check_variable = { vv1:MEX_econ_region_active_project_array^0 = 0 } }
				add_to_array = { MEX_region_project_alert_array = vv1 }
			}

			set_temp_variable = { temp_debt_limit = vv1:MEX_econ_region_debt_limit }
			multiply_temp_variable = { temp_debt_limit = 0.9 }
			if = {
				limit = {
					AND = {
						check_variable = { vv1:region_debt_value > temp_debt_limit }
						NOT = { is_in_array = { MEX_region_debt_alert_array = vv1 } }
					}
				}
				add_to_array = { MEX_region_debt_alert_array = vv1 }
			}

			# update corruption
		}
	}
	if = {
		limit = {
			has_country_flag = mexican_miracle_active
			check_variable = { MEX_region_project_alert_array^num > 0 }
		}
		set_temp_variable = { alert_id = token:Alert_MEX_Project }
		add_TNO_alert_unless_exists = yes
	}

	if = {
		limit = {
			has_country_flag = mexican_miracle_active
			check_variable = { MEX_region_debt_alert_array^num > 0 }
		}
		set_temp_variable = { alert_id = token:Alert_MEX_Debt }
		add_TNO_alert_unless_exists = yes
	}
	add_to_variable = { MEX_econ_project_dirty = 0.01 }
}

MEX_project_alert_entries = {
	if = {
		limit = {
			check_variable = { temp_region_project_num < MEX_region_project_alert_array^num }
		}
		if = {
			limit = {
				set_temp_variable = { temp_check_region = MEX_region_project_alert_array^temp_region_project_num }
				var:temp_check_region = { check_variable = { temp_check_region:MEX_econ_region_active_project_array^0 = 0 } }
			}
			set_temp_variable = { MEX_econ_region_id = temp_check_region }
			custom_effect_tooltip = Alert_MEX_Project_entry
		}
		add_to_temp_variable = { temp_region_project_num = 1 }
		MEX_project_alert_entries = yes
	}
}

MEX_debt_alert_entries = {
	if = {
		limit = {
			check_variable = { temp_region_debt_num < MEX_region_debt_alert_array^num }
		}
		set_temp_variable = { temp_check_region = MEX_region_debt_alert_array^temp_region_debt_num }
		set_temp_variable = { temp_debt_limit = temp_check_region:MEX_econ_region_debt_limit }
		multiply_temp_variable = { temp_debt_limit = 0.9 }
		if = {
			limit = {
				var:temp_check_region = { check_variable = { temp_check_region:region_debt_value > temp_debt_limit } }
			}
			set_temp_variable = { MEX_econ_region_id = temp_check_region }
			custom_effect_tooltip = Alert_MEX_Debt_entry
		}
		add_to_temp_variable = { temp_region_debt_num = 1 }
		MEX_debt_alert_entries = yes
	}
}

decision_region_decider = {
	# idk what you are doing here but this does the same thing - Maho
	set_temp_variable = { temp_region = MEX_econ_region_selected }
}

# Generates a random value from 0.925 to 1.125 and assigns it to r_fact
MEX_econ_generate_random_factor = {
	set_temp_variable = { r_fact = random }
	subtract_from_temp_variable = { r_fact = 0.375 } # gives a trending graph if smaller than 0.5
	divide_temp_variable = { r_fact = -5 }
	add_to_temp_variable = { r_fact = 1 }
}
# Generates a random value from 4.250 to 7.250 and assigns it to r_fact - used in GDP backfill
MEX_econ_generate_random_factor_2 = {
	set_temp_variable = { r_fact = random }
	multiply_temp_variable = { r_fact = 2.5 }
	add_to_temp_variable = { r_fact = 4.25 }
}
# Generates a random value from 5 to 9 and assigns it to r_fact - used in debt backfill
MEX_econ_generate_random_factor_3 = {
	set_temp_variable = { r_fact = random }
	multiply_temp_variable = { r_fact = 4 }
	add_to_temp_variable = { r_fact = 5 }
}
# Generates a random value from 2.0 to 2.8 and assigns it to r_fact - used in population backfill
MEX_econ_generate_random_factor_4 = {
	set_temp_variable = { r_fact = random }
	multiply_temp_variable = { r_fact = 0.8 }
	add_to_temp_variable = { r_fact = 2 }
}

# test just to show data works with the graphs - Maho
# uncomment if you want to use

#MEX_econ_graph_test = {
#	clear_array = v1:MEX_econ_graph_GDP_value
#	resize_array = { array = v1:MEX_econ_graph_GDP_value size = 14 value = 0 }
#
#	set_temp_variable = { current = 0 }
#
#	for_each_loop = {
#		array = v1:MEX_econ_region_state_array
#		value = v2
#
#		add_to_temp_variable = { current = v2:defined_state_value }
#	}
#
#	divide_temp_variable = { current = 100 }
#
#	#set_temp_variable = { diff = 0.004 }
#	#multiply_temp_variable = { diff = 3.45 }
#	#divide_temp_variable = { diff = 12 }
#
#	add_to_variable = { v1:MEX_econ_graph_GDP_value^13 = current }
#
#	for_loop_effect = {
#		start = 12
#		end = 6
#		add = -1
#		compare = greater_than_or_equals
#
#		add_to_variable = { v1:MEX_econ_graph_GDP_value^v = current }
#		multiply_temp_variable = { current = 0.96 }
#	}
#
#	for_loop_effect = {
#		start = 5
#		end = 0
#		add = -1
#		compare = greater_than_or_equals
#
#		add_to_variable = { v1:MEX_econ_graph_GDP_value^v = current }
#		multiply_temp_variable = { current = 1.04 }
#	}
#
#	clear_array = v1:MEX_econ_graph_GDP
#
#	for_loop_effect = {
#		start = 0
#		end = 13
#		value = low_index
#		compare = less_than_or_equals
#
#		set_temp_variable = { high_index = low_index }
#		add_to_temp_variable = { high_index = 1 }
#		set_temp_variable = { low_value = v1:MEX_econ_graph_GDP_value^low_index  }
#		set_temp_variable = { high_value = v1:MEX_econ_graph_GDP_value^high_index }
#
#		round_temp_variable = high_value
#		round_temp_variable = low_value
#
#		set_temp_variable = { frame_to_add = low_value }
#		multiply_temp_variable = { frame_to_add = 1000 }
#		add_to_temp_variable = { frame_to_add = high_value }
#
#		add_to_array = { v1:MEX_econ_graph_GDP = frame_to_add }
#	}
#
#	add_to_variable = { v1:MEX_econ_graph_GDP^13 = v1:MEX_econ_graph_GDP_value^13 }
#}
#
#MEX_sim_monthly_econ_chart = {
#	MEX_econ_pulse_1 = yes
#	MEX_econ_pulse_1 = yes
#	MEX_econ_pulse_2 = yes
#
#	for_each_loop = {
#		array = MEX_econ_region_array
#		value = v1
#
#		set_temp_variable = { temp_value_to_add = 0 }
#
#		for_each_scope_loop = {
#			array = v1:MEX_econ_region_state_array
#			value = v2
#
#			set_temp_variable = { temp_growth = MEX.GDP_growth_real }
#			add_to_temp_variable = { temp_growth = modifier@state_GDP_growth_modifier }
#			divide_temp_variable = { temp_growth = 1200 }
#			add_to_temp_variable = { temp_growth = 1 }
#
#			multiply_variable = { defined_state_value = temp_growth }
#
#			add_to_temp_variable = { MEX.temp_value_to_add = defined_state_value }
#		}
#
#		divide_temp_variable = { temp_value_to_add = 100 }
#
#		# graphs by state or region?
#		for_loop_effect = {
#			start = 1
#			end = 13
#			compare = less_than_or_equals
#
#			set_temp_variable = { swap = v1:MEX_econ_graph_GDP_value^v }
#			set_temp_variable = { idx = v }
#			subtract_from_temp_variable = { idx = 1 }
#			set_variable = { v1:MEX_econ_graph_GDP_value^idx = swap }
#		}
#
#		set_variable = { v1:MEX_econ_graph_GDP_value^13 = temp_value_to_add }
#
#		clear_array = v1:MEX_econ_graph_GDP
#
#		for_loop_effect = {
#			start = 0
#			end = 13
#			value = low_index
#			compare = less_than_or_equals
#
#			set_temp_variable = { high_index = low_index }
#			add_to_temp_variable = { high_index = 1 }
#			set_temp_variable = { low_value = v1:MEX_econ_graph_GDP_value^low_index  }
#			set_temp_variable = { high_value = v1:MEX_econ_graph_GDP_value^high_index }
#
#			round_temp_variable = high_value
#			round_temp_variable = low_value
#
#			set_temp_variable = { frame_to_add = low_value }
#			multiply_temp_variable = { frame_to_add = 1000 }
#			add_to_temp_variable = { frame_to_add = high_value }
#
#			add_to_array = { v1:MEX_econ_graph_GDP = frame_to_add }
#		}
#
#		add_to_variable = { v1:MEX_econ_graph_GDP^13 = v1:MEX_econ_graph_GDP_value^13 }
#	}
#}

# Simulate in-game DAY effects on econ
# Args: Number of days to simulate
d_MEX_econ_skip_day = {
	set_temp_variable = { val = args^0?1 }

	for_loop_effect = {
		start = 1
		end = val
		compare = less_than_or_equals

		MEX_econ_pulse_3 = yes
	}
}

# Simulate in-game WEEK effects on econ
# Args: Number of weeks to simulate
d_MEX_econ_skip_week = {
	set_temp_variable = { val = args^0?1 }

	for_loop_effect = {
		start = 1
		end = val
		compare = less_than_or_equals

		for_loop_effect = {
			start = 1
			end = 7
			compare = less_than_or_equals

			MEX_econ_pulse_3 = yes
		}

		if = {
			limit = {
				check_variable = { MEX_sim_week = 2 }
			}
			set_variable = { MEX_sim_week = 0 }
			MEX_econ_pulse_1 = yes
		}

		add_to_variable = { MEX_sim_week = 1 }
	}
}

# Simulate in-game MONTH effects on econ
# Args: Number of months to simulate
d_MEX_econ_skip_month = {
	set_temp_variable = { val = args^0?1 }

	for_loop_effect = {
		start = 1
		end = val
		compare = less_than_or_equals

		for_loop_effect = {
			start = 1
			end = 30
			compare = less_than_or_equals

			MEX_econ_pulse_3 = yes
		}

		MEX_econ_pulse_1 = yes
		MEX_econ_pulse_1 = yes
		MEX_econ_pulse_2 = yes
	}
}
MEX_graph_button_frame_effect = {
	set_variable = { MEX_econ_button_1_var = 2 }
	set_variable = { MEX_econ_button_2_var = 1 }
	set_variable = { MEX_econ_button_3_var = 1 }
	set_variable = { MEX_econ_button_4_var = 1 }
}