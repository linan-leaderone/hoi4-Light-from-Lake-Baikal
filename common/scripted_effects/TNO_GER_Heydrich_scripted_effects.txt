HGR_setup_bunkers = {
	set_country_flag = HGR_Demanded_Bunkers
	set_variable = { HGR_Bunker_Progress = 0 }
	set_variable = { HGR_Bunker_Progress_Bonus = 0 }
	set_variable = { HGR_Bunker_Quality = 50 }
	set_variable = { HGR_Bunker_Stockpiles = 0 }
	set_variable = { HGR_Bunker_Time_Remaining = 365 }

	set_variable = { HGR_Prep_Events = 0 }
}

HGR_setup_nukes = {
	set_country_flag = HGR_Demanded_Nukes
	set_variable = { HGR_Nukes_Progress = 0 }
	set_variable = { HGR_Nukes_Progress_Bonus = 0 }
	set_variable = { HGR_Nukes_Quality = 25 }
	set_variable = { HGR_Nuke_Time_Remaining = 540 }
}

HGR_Disable_Demands = {
	clr_country_flag = HGR_Demanded_Bunkers
	clr_country_flag = HGR_Demanded_Nukes
}

HGR_do_ss_idealist_modifier_math = {
	set_temp_variable = { SSHardlinerOpinionModifier = SSHardlinerOpinion }
	divide_temp_variable = { SSHardlinerOpinionModifier = 100 }
	add_to_temp_variable = { SSHardlinerOpinionModifier = 0.25 }

	set_variable = { HGR_ss_idealist_support_army_org_factor_modified = HGR_ss_idealist_support_army_org_factor }
	set_variable = { HGR_ss_idealist_support_army_morale_factor_modified = HGR_ss_idealist_support_army_morale_factor }
	set_variable = { HGR_ss_idealist_support_army_speed_factor_modified = HGR_ss_idealist_support_army_speed_factor }
	set_variable = { HGR_ss_idealist_support_enemy_partisan_effect_factor_modified = HGR_ss_idealist_support_enemy_partisan_effect_factor }
	set_variable = { HGR_ss_idealist_support_experience_gain_army_factor_modified = HGR_ss_idealist_support_experience_gain_army_factor }
	set_variable = { HGR_ss_idealist_support_consumer_goods_factor_modified = HGR_ss_idealist_support_consumer_goods_factor }
	set_variable = { HGR_ss_idealist_support_production_speed_bunker_factor_modified = HGR_ss_idealist_support_production_speed_bunker_factor }
	set_variable = { HGR_ss_idealist_support_production_speed_buildings_factor_modified = HGR_ss_idealist_support_production_speed_buildings_factor }
	set_variable = { HGR_ss_idealist_support_war_support_factor_modified = HGR_ss_idealist_support_war_support_factor }
	set_variable = { HGR_ss_idealist_support_decryption_factor_modified = HGR_ss_idealist_support_decryption_factor }
	set_variable = { HGR_ss_idealist_support_encryption_factor_modified = HGR_ss_idealist_support_encryption_factor }

	multiply_variable = { HGR_ss_idealist_support_army_org_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_army_morale_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_army_speed_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_enemy_partisan_effect_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_experience_gain_army_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_consumer_goods_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_production_speed_bunker_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_production_speed_buildings_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_war_support_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_decryption_factor_modified = SSHardlinerOpinionModifier }
	multiply_variable = { HGR_ss_idealist_support_encryption_factor_modified = SSHardlinerOpinionModifier }
}

HGR_do_ss_pragmatist_modifier_math = {
	set_temp_variable = { SSModerateOpinionModifier = SSModerateOpinion }
	divide_temp_variable = { SSModerateOpinionModifier = 100 }
	add_to_temp_variable = { SSModerateOpinionModifier = 0.25 }

	set_variable = { HGR_ss_pragmatist_support_army_morale_factor_modified = HGR_ss_pragmatist_support_army_morale_factor }
	set_variable = { HGR_ss_pragmatist_support_army_attack_factor_modified = HGR_ss_pragmatist_support_army_attack_factor }
	set_variable = { HGR_ss_pragmatist_support_army_defense_factor_modified = HGR_ss_pragmatist_support_army_defense_factor }
	set_variable = { HGR_ss_pragmatist_support_political_power_factor_modified = HGR_ss_pragmatist_support_political_power_factor }
	set_variable = { HGR_ss_pragmatist_support_out_of_supply_factor_modified = HGR_ss_pragmatist_support_out_of_supply_factor }
	set_variable = { HGR_ss_pragmatist_support_supply_consumption_factor_modified = HGR_ss_pragmatist_support_supply_consumption_factor }
	set_variable = { HGR_ss_pragmatist_support_decryption_factor_modified = HGR_ss_pragmatist_support_decryption_factor }
	set_variable = { HGR_ss_pragmatist_support_encryption_factor_modified = HGR_ss_pragmatist_support_encryption_factor }

	multiply_variable = { HGR_ss_pragmatist_support_army_morale_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_army_attack_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_army_defense_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_political_power_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_out_of_supply_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_supply_consumption_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_decryption_factor_modified = SSModerateOpinionModifier }
	multiply_variable = { HGR_ss_pragmatist_support_encryption_factor_modified = SSModerateOpinionModifier }
}

HGR_do_militarist_modifier_math = {
	set_temp_variable = { MilitaristOpinionModifier = MilitaristOpinion }
	divide_temp_variable = { MilitaristOpinionModifier = 100 }
	add_to_temp_variable = { MilitaristOpinionModifier = 0.25 }

	set_variable = { HGR_militarist_support_conscription_factor_modified = HGR_militarist_support_conscription_factor }
	set_variable = { HGR_militarist_support_army_attack_factor_modified = HGR_militarist_support_army_attack_factor }
	set_variable = { HGR_militarist_support_experience_gain_army_modified = HGR_militarist_support_experience_gain_army }
	set_variable = { HGR_militarist_support_experience_gain_navy_modified = HGR_militarist_support_experience_gain_navy }
	set_variable = { HGR_militarist_support_naval_coordination_modified = HGR_militarist_support_naval_coordination }
	set_variable = { HGR_militarist_support_amphibious_invasion_modified = HGR_militarist_support_amphibious_invasion }
	set_variable = { HGR_militarist_support_consumer_goods_factor_modified = HGR_militarist_support_consumer_goods_factor }
	set_variable = { HGR_militarist_support_production_oil_factor_modified = HGR_militarist_support_production_oil_factor }
	set_variable = { HGR_militarist_support_industrial_capacity_factory_modified = HGR_militarist_support_industrial_capacity_factory }

	multiply_variable = { HGR_militarist_support_conscription_factor_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_army_attack_factor_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_experience_gain_army_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_experience_gain_navy_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_naval_coordination_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_amphibious_invasion_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_consumer_goods_factor_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_production_oil_factor_modified = MilitaristOpinionModifier }
	multiply_variable = { HGR_militarist_support_industrial_capacity_factory_modified = MilitaristOpinionModifier }
}

HGR_do_moderate_modifier_math = {
	set_temp_variable = { ModerateOpinionModifier = ModerateOpinion }
	divide_temp_variable = { ModerateOpinionModifier = 100 }
	add_to_temp_variable = { ModerateOpinionModifier = 0.25 }

	set_variable = { HGR_moderate_support_decryption_factor_modified = HGR_moderate_support_decryption_factor }
	set_variable = { HGR_moderate_support_encryption_factor_modified = HGR_moderate_support_encryption_factor }
	set_variable = { HGR_moderate_support_political_power_factor_modified = HGR_moderate_support_political_power_factor }
	set_variable = { HGR_moderate_support_recon_factor_modified = HGR_moderate_support_recon_factor }
	set_variable = { HGR_moderate_support_attrition_modified = HGR_moderate_support_attrition }
	set_variable = { HGR_moderate_support_army_org_factor_modified = HGR_moderate_support_army_org_factor }
	set_variable = { HGR_moderate_support_experience_gain_air_modified = HGR_moderate_support_experience_gain_air }
	set_variable = { HGR_moderate_support_air_cas_present_factor_modified = HGR_moderate_support_air_cas_present_factor }
	set_variable = { HGR_moderate_support_army_bonus_air_superiority_factor_modified = HGR_moderate_support_army_bonus_air_superiority_factor }

	multiply_variable = { HGR_moderate_support_decryption_factor_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_encryption_factor_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_political_power_factor_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_recon_factor_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_attrition_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_army_org_factor_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_experience_gain_air_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_air_cas_present_factor_modified = ModerateOpinionModifier }
	multiply_variable = { HGR_moderate_support_army_bonus_air_superiority_factor_modified = ModerateOpinionModifier }
}

HGR_do_native_modifier_math = {
	set_temp_variable = { NativeOpinionModifier = NativeOpinion }
	divide_temp_variable = { NativeOpinionModifier = 100 }
	add_to_temp_variable = { NativeOpinionModifier = 0.25 }

	set_variable = { HGR_native_support_non_core_manpower_modified = HGR_native_support_non_core_manpower }
	set_variable = { HGR_native_support_conscription_factor_modified = HGR_native_support_conscription_factor }
	set_variable = { HGR_native_support_weekly_manpower_modified = HGR_native_support_weekly_manpower }
	set_variable = { HGR_native_support_stability_factor_modified = HGR_native_support_stability_factor }
	set_variable = { HGR_native_support_land_reinforce_rate_modified = HGR_native_support_land_reinforce_rate }

	multiply_variable = { HGR_native_support_non_core_manpower_modified = NativeOpinionModifier }
	multiply_variable = { HGR_native_support_conscription_factor_modified = NativeOpinionModifier }
	multiply_variable = { HGR_native_support_weekly_manpower_modified = NativeOpinionModifier }
	multiply_variable = { HGR_native_support_stability_factor_modified = NativeOpinionModifier }
	multiply_variable = { HGR_native_support_land_reinforce_rate_modified = NativeOpinionModifier }
}

HGR_Fire_Prep_Events = {
	if = {
		limit = { check_variable = { HGR_Prep_Events = 4 } }
		country_event = { id = HGR.130 days = 1 }
		add_to_variable = { HGR_Prep_Events = 1 }
	}
	if = {
		limit = { check_variable = { HGR_Prep_Events = 3 } }
		country_event = { id = HGR.109 days = 1 }
		country_event = { id = HGR.110 days = 7 }
		country_event = { id = HGR.120 days = 9 }
		add_to_variable = { HGR_Prep_Events = 1 }
	}
	if = {
		limit = { check_variable = { HGR_Prep_Events = 2 } }
		country_event = { id = HGR.108 days = 1 }
		add_to_variable = { HGR_Prep_Events = 1 }
	}
	if = {
		limit = { check_variable = { HGR_Prep_Events = 1 } }
		country_event = { id = HGR.107 days = 1 }
		add_to_variable = { HGR_Prep_Events = 1 }
	}
	if = {
		limit = { check_variable = { HGR_Prep_Events = 0 } }
		country_event = { id = HGR.106 days = 1 }
		add_to_variable = { HGR_Prep_Events = 1 }
	}
}

HGR_place_missiles = {
	# 8 missile stockpiles total, Himmler needs 6 to win

	# 3 missile stockpiles, always Heydrich aligned
	776 = { set_state_flag = has_missile_in_state } # GER
	153 = { set_state_flag = has_missile_in_state } # KHP
	GER = {
		if = {
			limit = {
				has_country_flag = KSS_Gille
			}
			random_list = {
				50 = {
					87 = { set_state_flag = has_missile_in_state } # KSS
				}
				50 = {
					61 = { set_state_flag = has_missile_in_state } # FPG
				}
			}
		}
		else = {
			61 = { set_state_flag = has_missile_in_state } # FPG
		}
	}

	# 1 missile stockpile, always bordering Germania
	random_list = {
		50 = {
			55 = { set_state_flag = has_missile_in_state } # AGS
		}
		50 = {
			65 = { set_state_flag = has_missile_in_state } # SSF
		}
	}

	# 3 missile stockpiles, spread among certain neutral warlords

	random_list = {
		20 = {
			50 = { set_state_flag = has_missile_in_state } # FHH
			52 = { set_state_flag = has_missile_in_state } # DSH
			59 = { set_state_flag = has_missile_in_state } # OER
		}
		20 = {
			modifier = {
				factor = 0
				86 = { has_state_flag = has_missile_in_state } # KSS
			}
			53 = { set_state_flag = has_missile_in_state } # OKL
			87 = { set_state_flag = has_missile_in_state } # KSS
			4 = { set_state_flag = has_missile_in_state } # AUS
		}
		20 = {
			67 = { set_state_flag = has_missile_in_state } # ISS
			54 = { set_state_flag = has_missile_in_state } # SSN
			53 = { set_state_flag = has_missile_in_state } # OKL
		}
		20 = {
			modifier = {
				factor = 0
				86 = { has_state_flag = has_missile_in_state } # KSS
			}
			52 = { set_state_flag = has_missile_in_state } # DSH
			87 = { set_state_flag = has_missile_in_state } # KSS
			59 = { set_state_flag = has_missile_in_state } # OER
		}
		20 = {
			50 = { set_state_flag = has_missile_in_state } # FHH
			54 = { set_state_flag = has_missile_in_state } # SSN
			4 = { set_state_flag = has_missile_in_state } # AUS
		}
	}

	# 1 missile stockpile, in one of the three big Himmlerite warlords
	random_list = {
		34 = {
			42 = { set_state_flag = has_missile_in_state } # LHH
		}
		33 = {
			57 = { set_state_flag = has_missile_in_state } # SSW
		}
		33 = {
			1373 = { set_state_flag = has_missile_in_state } # SSL
		}
	}

	# 1 missile stockpile, in either the Slave Revolt or with Eichmann
	random_list = {
		50 = {
			97 = { set_state_flag = has_missile_in_state } # FSP
		}
		50 = {
			5 = { set_state_flag = has_missile_in_state } # PRK
		}
	}
}

initialize_heydrich_himmler_influence_vars = {
	# HGR_Influence_Balance variable should always be between 0 and 100. 0-40 = Himmler-Aligned, 41-59 = Neutral, 60-100 = Heydrich-Aligned
	# Adjusted by effect once the scripted effects are in, of course
	# The bonus multipliers are between 0 and 2, and are multiplied with the change in influence
	# Increase or decrease by 0.1 when you do change them
	# HGR_Warlord_Nation flag is used for loops
	# MovementState contains the state in the warlords that holds the missiles in order to make variables work

	# Influencing factional opinion variables, because there really isn't a better place to put this
	GER = {
		set_variable = { SSHardlinerOpinion = 39 }
		set_variable = { SSModerateOpinion = 39 }
		set_variable = { MilitaristOpinion = 39 }
		set_variable = { ModerateOpinion = 39 }
		set_variable = { NativeOpinion = 39 }

		set_variable = { HGR_Influence_Balance = 100 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 0 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 2 }
		set_variable = { movementState = 776 }
	}
	AGS = {
		set_variable = { HGR_Influence_Balance = 48 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 55 }
	}
	APF = {
		set_variable = { HGR_Influence_Balance = 25 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 69 }
	}
	AUS = {
		set_variable = { HGR_Influence_Balance = 54 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 4 }
	}
	DSG = {
		set_variable = { HGR_Influence_Balance = 50 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 58 }
	}
	DSH = {
		set_variable = { HGR_Influence_Balance = 50 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 52 }
	}
	FHH = {
		set_variable = { HGR_Influence_Balance = 50 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 50 }
	}
	FPG = {
		set_variable = { HGR_Influence_Balance = 55 } # Have them start neutral before they flip
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 61 }
	}
	FSP = {
		set_variable = { HGR_Influence_Balance = 24 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 97 }
	}
	ISS = {
		set_variable = { HGR_Influence_Balance = 35 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 67 }
	}
	KHP = {
		set_variable = { HGR_Influence_Balance = 70 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 153 }
	}
	KLB = {
		set_variable = { HGR_Influence_Balance = 36 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 85 }
	}
	KSS = {
		GER = {
			if = {
				limit = {
					has_country_flag = KSS_Stadler
				}
				KSS = {
					set_politics = {
						ruling_party = ultranationalism
					}
					set_variable = { HGR_Influence_Balance = 59 }
					remove_ideas = KSS_shell_of_a_bread_basket_HH
					add_ideas = KSS_shell_of_a_bread_basket_RH
					remove_ideas = KSS_posens_railway_HH
					add_ideas = KSS_posens_railway_RH
				}
			}
			else_if = {
				limit = {
					has_country_flag = KSS_Gille
				}
				KSS = {
					set_politics = {
						ruling_party = national_socialism
					}
					set_variable = { HGR_Influence_Balance = 75 }
					remove_ideas = KSS_shell_of_a_bread_basket_HH
					add_ideas = KSS_shell_of_a_bread_basket_RH
					remove_ideas = KSS_posens_railway_HH
					add_ideas = KSS_posens_railway_RH
				}
				GER = {
					every_unit_leader = {
						limit = { has_id = 121 }
						retire = yes
					}
					every_unit_leader = {
						limit = { has_id = 105 }
						retire = yes
					}
				}
			}
			else_if = {
				limit = {
					has_country_flag = KSS_Hausser
				}
				KSS = {
					set_politics = {
						ruling_party = national_socialism
					}
					set_variable = { HGR_Influence_Balance = 26 }
				}
			}
		}

		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 87 }
	}
	LHH = {
		set_variable = { HGR_Influence_Balance = 7 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 42 }
	}
	OER = {
		set_variable = { HGR_Influence_Balance = 44 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 59 }
	}
	OKL = {
		set_variable = { HGR_Influence_Balance = 56 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 53 }
	}
	PRK = {
		set_variable = { HGR_Influence_Balance = 50 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 5 }
	}
	SSF = {
		set_variable = { HGR_Influence_Balance = 42 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 65 }
	}
	SSL = {
		set_variable = { HGR_Influence_Balance = 22 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 1373 }
	}
	SSN = {
		set_variable = { HGR_Influence_Balance = 48 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 54 }
	}
	SSW = {
		set_variable = { HGR_Influence_Balance = 32 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 57 }
	}
	BRG = {
		set_variable = { HGR_Influence_Balance = 0 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 2 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0 }
		set_variable = { movementState = 16 }
	}
	BEL = {
		set_variable = { HGR_Influence_Balance = 8 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 34 }
	}
	PIC = {
		set_variable = { HGR_Influence_Balance = 0 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 788 }
	}
	FLR = {
		set_variable = { HGR_Influence_Balance = 0 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 6 }
	}
	CAU = {
		set_variable = { HGR_Influence_Balance = 35 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
	}
	OST = {
		set_variable = { HGR_Influence_Balance = 55 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
	}
	CRN = {
		set_variable = { HGR_Influence_Balance = 50 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
	}
	POL = {
		set_variable = { HGR_Influence_Balance = 50 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
	}
	HOL = {
		set_variable = { HGR_Influence_Balance = 25 }
		set_variable = { HGR_Himmler_Influence_Bonus_Mult = 1 }
		set_variable = { HGR_Heydrich_Influence_Bonus_Mult = 1 }
		set_country_flag = HGR_Warlord_Nation
		set_variable = { movementState = 36 }
	}

	GER = {
		if = {
			limit = {
				has_country_flag = HGR_helped_SSW
			}
			SSW = { add_to_variable = { HGR_Influence_Balance = 5 } }
		}
		if = {
			limit = {
				has_country_flag = HGR_helped_ISS
			}
			ISS = { add_to_variable = { HGR_Influence_Balance = 5 } }
		}
		if = {
			limit = {
				has_country_flag = HGR_asked_RKs
			}
			HOL = { add_to_variable = { HGR_Influence_Balance = 5 } }
			CAU = { add_to_variable = { HGR_Influence_Balance = 10 } }
		}
		if = {
			limit = {
				has_country_flag = HGR_focused_PGD1
			}
			FPG = { add_to_variable = { HGR_Influence_Balance = -5 } }
		}
		if = {
			limit = {
				has_country_flag = HGR_focused_Slaves
			}
			PRK = { add_to_variable = { HGR_Influence_Balance = -5 } }
		}
	}
}

increase_Heydrich_influence_tiny = {
	custom_effect_tooltip = increase_Heydrich_influence_tiny_tt
	clamp_variable = {
		var = HGR_Heydrich_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 1 }
	multiply_temp_variable = { influence_increase = HGR_Heydrich_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	add_to_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Heydrich_influence_small = {
	custom_effect_tooltip = increase_Heydrich_influence_small_tt
	clamp_variable = {
		var = HGR_Heydrich_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 5 }
	multiply_temp_variable = { influence_increase = HGR_Heydrich_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	add_to_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Heydrich_influence_medium = {
	custom_effect_tooltip = increase_Heydrich_influence_medium_tt
	clamp_variable = {
		var = HGR_Heydrich_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 10 }
	multiply_temp_variable = { influence_increase = HGR_Heydrich_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	add_to_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Heydrich_influence_large = {
	custom_effect_tooltip = increase_Heydrich_influence_large_tt
	clamp_variable = {
		var = HGR_Heydrich_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 25 }
	multiply_temp_variable = { influence_increase = HGR_Heydrich_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	add_to_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Heydrich_influence_huge = {
	custom_effect_tooltip = increase_Heydrich_influence_huge_tt
	clamp_variable = {
		var = HGR_Heydrich_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 50 }
	multiply_temp_variable = { influence_increase = HGR_Heydrich_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	add_to_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Himmler_influence_tiny = {
	custom_effect_tooltip = increase_Himmler_influence_tiny_tt
	clamp_variable = {
		var = HGR_Himmler_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 1 }
	multiply_temp_variable = { influence_increase = HGR_Himmler_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	subtract_from_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Himmler_influence_small = {
	custom_effect_tooltip = increase_Himmler_influence_small_tt
	clamp_variable = {
		var = HGR_Himmler_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 5 }
	multiply_temp_variable = { influence_increase = HGR_Himmler_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	subtract_from_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Himmler_influence_medium = {
	custom_effect_tooltip = increase_Himmler_influence_medium_tt
	clamp_variable = {
		var = HGR_Himmler_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 10 }
	multiply_temp_variable = { influence_increase = HGR_Himmler_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	subtract_from_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Himmler_influence_large = {
	custom_effect_tooltip = increase_Himmler_influence_large_tt
	clamp_variable = {
		var = HGR_Himmler_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 25 }
	multiply_temp_variable = { influence_increase = HGR_Himmler_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	subtract_from_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

increase_Himmler_influence_huge = {
	custom_effect_tooltip = increase_Himmler_influence_huge_tt
	clamp_variable = {
		var = HGR_Himmler_Influence_Bonus_Mult
		min = 0
		max = 2
	}
	set_temp_variable = { influence_increase = 50 }
	multiply_temp_variable = { influence_increase = HGR_Himmler_Influence_Bonus_Mult }
	if = {
		limit = {
			any_owned_state = {
				has_state_flag = has_missile_in_state
			}
		}
		multiply_temp_variable = { influence_increase = 0.75 }
	}
	subtract_from_variable = { HGR_Influence_Balance = influence_increase }
	clamp_variable = {
		var = HGR_Influence_Balance
		min = 0
		max = 100
	}
	GER = { update_nuke_control = yes }
}

update_nuke_control = {
	if = {
		limit = { NOT = { has_country_flag = HGR_Enable_Nuke_GUI } }
		set_country_flag = country_has_gui
		set_country_flag = gui_alert_visible
		set_country_flag = gui_alert_visible_2
		set_country_flag = HGR_Enable_Nuke_GUI
		set_country_flag = HGR_GUI_open_flag
		set_country_flag = HGR_gui_warning
	}

	set_variable = { Burgundy_Missiles_Count = 0 }
	set_variable = { Germany_Missiles_Count = 0 }
	set_variable = { Neutral_Missiles_Count = 0 }
	set_temp_variable = { Total_Nukes_Count = 0 }

	hidden_effect = {
		every_state = {
			limit = { has_state_flag = has_missile_in_state }
			if = {
				limit = {
					controller = {
						OR = {
							check_variable = { HGR_Influence_Balance < 41 }
							is_in_faction_with = BRG
						}
					}
				}
				add_to_variable = { GER.Burgundy_Missiles_Count = 1 }
			}
			else_if = {
				limit = {
					controller = {
						OR = {
							check_variable = { HGR_Influence_Balance > 59 }
							is_in_faction_with = GER
						}
					}
				}
				add_to_variable = { GER.Germany_Missiles_Count = 1 }
			}
			else = { add_to_variable = { GER.Neutral_Missiles_Count = 1 } }
			add_to_temp_variable = { GER.Total_Nukes_Count = 1 }
		}
	}

	set_variable = { Burgundy_Missiles_Percent = Burgundy_Missiles_Count }
	set_variable = { Germany_Missiles_Percent = Germany_Missiles_Count }
	set_variable = { Neutral_Missiles_Percent = Neutral_Missiles_Count }

	divide_variable = { Burgundy_Missiles_Percent = Total_Nukes_Count }
	divide_variable = { Germany_Missiles_Percent = Total_Nukes_Count }
	divide_variable = { Neutral_Missiles_Percent = Total_Nukes_Count }

	if = {
		limit = {
			check_variable = { Burgundy_Missiles_Count > 6 }
		}
		log = "[GetDateText]: [Root.GetName]: HimmlerBOT - BURGUNDY WINS"
		GER = { country_event = HGR.666 }
	}
	else_if = {
		limit = {
			check_variable = { Germany_Missiles_Count > 6 }
		}
		log = "[GetDateText]: [Root.GetName]: HimmlerBOT - HEYDRICH WINS"
		GER = { country_event = HGR.667 }
	}

	if = {
		limit = { # Once all the warlords either don't exist, or are in a faction
			AGS = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			APF = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			AUS = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			DSH = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			FHH = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			FPG = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			FSP = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			ISS = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			KHP = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			KLB = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			KSS = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			LHH = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			OER = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			OKL = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			PRK = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			SSF = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			SSL = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			SSN = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			SSW = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			BEL = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			PIC = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
			FLR = {
				OR = {
					is_in_faction_with = BRG
					is_in_faction_with = GER
					exists = no
				}
			}
		}
		if = {
			limit = {
				OR = {
					check_variable = { Burgundy_Missiles_Count > Germany_Missiles_Count }
					check_variable = { Burgundy_Missiles_Count = Germany_Missiles_Count }
				}
			}
			log = "[GetDateText]: [Root.GetName]: HimmlerBOT - BURGUNDY WINS"
			GER = { country_event = HGR.666 }
		}
		else_if = {
			limit = {
				check_variable = { Germany_Missiles_Count > Burgundy_Missiles_Count }
			}
			log = "[GetDateText]: [Root.GetName]: HimmlerBOT - HEYDRICH WINS"
			GER = { country_event = HGR.667 }
		}
	}
}

HGR_clear_GUI_warlord_flags = {
	clr_country_flag = HGR_ALSACELORRAINE_OPEN
	clr_country_flag = HGR_BARBIE_OPEN
	clr_country_flag = HGR_FEGLEIN_OPEN
	clr_country_flag = HGR_FIEFDOM_OPEN
	clr_country_flag = HGR_GERMANIA_OPEN
	clr_country_flag = HGR_INDUSTRIALZONE_OPEN
	clr_country_flag = HGR_KALINIGRAD_OPEN
	clr_country_flag = HGR_LOTHARINGIA_OPEN
	clr_country_flag = HGR_LUFTWAFFE_OPEN
	clr_country_flag = HGR_MILITARISTS_OPEN
	clr_country_flag = HGR_NUREMBERG_OPEN
	clr_country_flag = HGR_OSTRREICH_OPEN
	clr_country_flag = HGR_OUTERGERMANIA_OPEN
	clr_country_flag = HGR_PGD1_OPEN
	clr_country_flag = HGR_PRUSSIA_OPEN
	clr_country_flag = HGR_REICH_OPEN
	clr_country_flag = HGR_SHLESWIGHOLSTEIN_OPEN
	clr_country_flag = HGR_SOUTHAUSTRIA_OPEN
	clr_country_flag = HGR_STEINER_OPEN
	clr_country_flag = HGR_SUDETENLAND_OPEN
	clr_country_flag = HGR_WAFFENSS_OPEN
	clr_country_flag = HGR_WESTFALEN_OPEN
	clr_country_flag = HGR_CHARLEMAGNE_OPEN
	clr_country_flag = HGR_HIMMLER_OPEN
	clr_country_flag = HGR_LANGEMARCK_OPEN
	clr_country_flag = HGR_NETHERLANDS_OPEN
	clr_country_flag = HGR_WALLOON_OPEN
}

HGR_remove_duplicate_neighbors = {
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor8 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor8 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor8 }
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor7 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor7 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor8 }
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor6 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor6 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor8 }
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor5 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor5 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor8 }
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor4 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor4 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor8 }
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor3 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor3 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor8 }
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor2 = var:HGR_selected_state_neighbor1 }
			}
		}
		set_variable = { HGR_selected_state_neighbor2 = ZZZ }
	}
	if = {
		limit = {
			OR = {
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor7 }
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor6 }
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor5 }
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor4 }
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor3 }
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor2 }
				check_variable = { var:HGR_selected_state_neighbor1 = var:HGR_selected_state_neighbor8 }
			}
		}
		set_variable = { HGR_selected_state_neighbor1 = ZZZ }
	}
}

HGR_increase_native_opinion_low = {
	custom_effect_tooltip = HGR_increase_native_opinion_low_tt
	add_to_variable = { NativeOpinion = 3 }
}

HGR_increase_native_opinion_med = {
	custom_effect_tooltip = HGR_increase_native_opinion_med_tt
	add_to_variable = { NativeOpinion = 5 }
}

HGR_increase_native_opinion_high = {
	custom_effect_tooltip = HGR_increase_native_opinion_high_tt
	add_to_variable = { NativeOpinion = 10 }
}

HGR_decrease_native_opinion_low = {
	custom_effect_tooltip = HGR_decrease_native_opinion_low_tt
	subtract_from_variable = { NativeOpinion = 3 }
}

HGR_decrease_native_opinion_med = {
	custom_effect_tooltip = HGR_decrease_native_opinion_med_tt
	subtract_from_variable = { NativeOpinion = 5 }
}

HGR_decrease_native_opinion_high = {
	custom_effect_tooltip = HGR_decrease_native_opinion_high_tt
	subtract_from_variable = { NativeOpinion = 10 }
}

HGR_increase_moderate_opinion_low = {
	custom_effect_tooltip = HGR_increase_moderate_opinion_low_tt
	add_to_variable = { ModerateOpinion = 3 }
}

HGR_increase_moderate_opinion_med = {
	custom_effect_tooltip = HGR_increase_moderate_opinion_med_tt
	add_to_variable = { ModerateOpinion = 5 }
}

HGR_increase_moderate_opinion_high = {
	custom_effect_tooltip = HGR_increase_moderate_opinion_high_tt
	add_to_variable = { ModerateOpinion = 10 }
}

HGR_decrease_moderate_opinion_low = {
	custom_effect_tooltip = HGR_decrease_moderate_opinion_low_tt
	subtract_from_variable = { ModerateOpinion = 3 }
}

HGR_decrease_moderate_opinion_med = {
	custom_effect_tooltip = HGR_decrease_moderate_opinion_med_tt
	subtract_from_variable = { ModerateOpinion = 5 }
}

HGR_decrease_moderate_opinion_high = {
	custom_effect_tooltip = HGR_decrease_moderate_opinion_high_tt
	subtract_from_variable = { ModerateOpinion = 10 }
}

HGR_increase_militarist_opinion_low = {
	custom_effect_tooltip = HGR_increase_militarist_opinion_low_tt
	add_to_variable = { MilitaristOpinion = 3 }
}

HGR_increase_militarist_opinion_med = {
	custom_effect_tooltip = HGR_increase_militarist_opinion_med_tt
	add_to_variable = { MilitaristOpinion = 5 }
}

HGR_increase_militarist_opinion_high = {
	custom_effect_tooltip = HGR_increase_militarist_opinion_high_tt
	add_to_variable = { MilitaristOpinion = 10 }
}

HGR_decrease_militarist_opinion_low = {
	custom_effect_tooltip = HGR_decrease_militarist_opinion_low_tt
	subtract_from_variable = { MilitaristOpinion = 3 }
}

HGR_decrease_militarist_opinion_med = {
	custom_effect_tooltip = HGR_decrease_militarist_opinion_med_tt
	subtract_from_variable = { MilitaristOpinion = 5 }
}

HGR_decrease_militarist_opinion_high = {
	custom_effect_tooltip = HGR_decrease_militarist_opinion_high_tt
	subtract_from_variable = { MilitaristOpinion = 10 }
}

HGR_increase_ss_moderate_opinion_low = {
	custom_effect_tooltip = HGR_increase_ss_moderate_opinion_low_tt
	add_to_variable = { SSModerateOpinion = 3 }
}

HGR_increase_ss_moderate_opinion_med = {
	custom_effect_tooltip = HGR_increase_ss_moderate_opinion_med_tt
	add_to_variable = { SSModerateOpinion = 5 }
}

HGR_increase_ss_moderate_opinion_high = {
	custom_effect_tooltip = HGR_increase_ss_moderate_opinion_high_tt
	add_to_variable = { SSModerateOpinion = 10 }
}

HGR_decrease_ss_moderate_opinion_low = {
	custom_effect_tooltip = HGR_decrease_ss_moderate_opinion_low_tt
	subtract_from_variable = { SSModerateOpinion = 3 }
}

HGR_decrease_ss_moderate_opinion_med = {
	custom_effect_tooltip = HGR_decrease_ss_moderate_opinion_med_tt
	subtract_from_variable = { SSModerateOpinion = 5 }
}

HGR_decrease_ss_moderate_opinion_high = {
	custom_effect_tooltip = HGR_decrease_ss_moderate_opinion_high_tt
	subtract_from_variable = { SSModerateOpinion = 10 }
}

HGR_increase_ss_hardliner_opinion_low = {
	custom_effect_tooltip = HGR_increase_ss_hardliner_opinion_low_tt
	add_to_variable = { SSHardlinerOpinion = 3 }
}

HGR_increase_ss_hardliner_opinion_med = {
	custom_effect_tooltip = HGR_increase_ss_hardliner_opinion_med_tt
	add_to_variable = { SSHardlinerOpinion = 5 }
}

HGR_increase_ss_hardliner_opinion_high = {
	custom_effect_tooltip = HGR_increase_ss_hardliner_opinion_high_tt
	add_to_variable = { SSHardlinerOpinion = 10 }
}

HGR_decrease_ss_hardliner_opinion_low = {
	custom_effect_tooltip = HGR_decrease_ss_hardliner_opinion_low_tt
	subtract_from_variable = { SSHardlinerOpinion = 3 }
}

HGR_decrease_ss_hardliner_opinion_med = {
	custom_effect_tooltip = HGR_decrease_ss_hardliner_opinion_med_tt
	subtract_from_variable = { SSHardlinerOpinion = 5 }
}

HGR_decrease_ss_hardliner_opinion_high = {
	custom_effect_tooltip = HGR_decrease_ss_hardliner_opinion_high_tt
	subtract_from_variable = { SSHardlinerOpinion = 10 }
}

#################################
# Faction Influence Multipliers #
#################################

increase_native_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	PRK = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	custom_effect_tooltip = increase_native_HGR_Heydrich_Influence_Bonus_Mult_Small
}
increase_native_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	PRK = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	custom_effect_tooltip = increase_native_HGR_Heydrich_Influence_Bonus_Mult_Med
}
increase_native_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	PRK = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	custom_effect_tooltip = increase_native_HGR_Heydrich_Influence_Bonus_Mult_Large
}
decrease_native_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	PRK = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	custom_effect_tooltip = decrease_native_HGR_Heydrich_Influence_Bonus_Mult_Small
}
decrease_native_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	PRK = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	custom_effect_tooltip = decrease_native_HGR_Heydrich_Influence_Bonus_Mult_Med
}
decrease_native_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	PRK = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	custom_effect_tooltip = decrease_native_HGR_Heydrich_Influence_Bonus_Mult_Large
}

increase_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	FHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	OKL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	FPG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	custom_effect_tooltip = increase_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small
}
increase_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	FHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	OKL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	FPG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	custom_effect_tooltip = increase_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med
}
increase_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	FHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	OKL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	FPG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	custom_effect_tooltip = increase_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large
}
decrease_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	FHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	OKL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	FPG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	custom_effect_tooltip = decrease_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small
}
decrease_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	FHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	OKL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	FPG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	custom_effect_tooltip = decrease_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med
}
decrease_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	FHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	OKL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	FPG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	custom_effect_tooltip = decrease_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large
}

increase_militarist_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	OER = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	DSG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	ISS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	custom_effect_tooltip = increase_militarist_HGR_Heydrich_Influence_Bonus_Mult_Small
}
increase_militarist_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	OER = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	DSG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	ISS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	custom_effect_tooltip = increase_militarist_HGR_Heydrich_Influence_Bonus_Mult_Med
}
increase_militarist_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	OER = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	DSG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	ISS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	custom_effect_tooltip = increase_militarist_HGR_Heydrich_Influence_Bonus_Mult_Large
}
decrease_militarist_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	OER = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	DSG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	ISS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	custom_effect_tooltip = decrease_militarist_HGR_Heydrich_Influence_Bonus_Mult_Small
}
decrease_militarist_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	OER = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	DSG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	ISS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	custom_effect_tooltip = decrease_militarist_HGR_Heydrich_Influence_Bonus_Mult_Med
}
decrease_militarist_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	OER = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	DSG = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	ISS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	custom_effect_tooltip = decrease_militarist_HGR_Heydrich_Influence_Bonus_Mult_Large
}

increase_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	DSH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	APF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	SSF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	KSS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	AUS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	custom_effect_tooltip = increase_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small
}
increase_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	DSH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	APF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	SSF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	KSS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	AUS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	custom_effect_tooltip = increase_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med
}
increase_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	DSH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	APF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	SSF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	KSS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	AUS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	custom_effect_tooltip = increase_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large
}
decrease_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	DSH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	APF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	SSF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	KSS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	AUS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	custom_effect_tooltip = decrease_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Small
}
decrease_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	DSH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	APF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	SSF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	KSS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	AUS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	custom_effect_tooltip = decrease_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Med
}
decrease_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	DSH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	APF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	SSF = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	KSS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	AUS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	custom_effect_tooltip = decrease_ss_moderate_HGR_Heydrich_Influence_Bonus_Mult_Large
}

increase_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	FLR = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	PIC = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	SSL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	SSW = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	LHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	AGS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	KHP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	SSN = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	KLB = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	FSP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.1 }
	}
	custom_effect_tooltip = increase_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Small
}
increase_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	FLR = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	PIC = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	SSL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	SSW = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	LHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	AGS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	KHP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	SSN = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	KLB = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	FSP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.2 }
	}
	custom_effect_tooltip = increase_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Med
}
increase_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	FLR = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	PIC = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	SSL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	SSW = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	LHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	AGS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	KHP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	SSN = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	KLB = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	FSP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = 0.3 }
	}
	custom_effect_tooltip = increase_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Large
}
decrease_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Small = {
	FLR = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	PIC = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	SSL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	SSW = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	LHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	AGS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	KHP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	SSN = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	KLB = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	FSP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
	}
	custom_effect_tooltip = decrease_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Small
}
decrease_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Med = {
	FLR = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	PIC = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	SSL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	SSW = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	LHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	AGS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	KHP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	SSN = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	KLB = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	FSP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
	}
	custom_effect_tooltip = decrease_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Med
}
decrease_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Large = {
	FLR = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	PIC = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	SSL = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	SSW = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	LHH = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	AGS = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	KHP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	SSN = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	KLB = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	FSP = {
		add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.3 }
	}
	custom_effect_tooltip = decrease_ss_hardliner_HGR_Heydrich_Influence_Bonus_Mult_Large
}

Heydrich_Clean_Up = {
	GER = {
		if = {
			limit = { GER = { has_war_with = POL } }
			GER = { white_peace = POL }
		}
		if = {
			limit = { GER = { has_war_with = CAU } }
			GER = { white_peace = CAU }
		}
		if = {
			limit = { GER = { has_war_with = HOL } }
			GER = { annex_country = { target = HOL transfer_troops = no } }
		}
		if = {
			limit = { GER = { has_war_with = OST } }
			GER = { white_peace = OST }
		}
		if = {
			limit = { GER = { has_war_with = CZE } }
			GER = { annex_country = { target = CZE transfer_troops = no } }
		}

		annex_country = { target = FLR transfer_troops = no }
		annex_country = { target = PIC transfer_troops = no }
		annex_country = { target = BEL transfer_troops = no }
		annex_country = { target = BRG transfer_troops = no }

		annex_country = { target = DSH transfer_troops = no }
		annex_country = { target = SSL transfer_troops = no }
		annex_country = { target = FPG transfer_troops = no }
		annex_country = { target = SSW transfer_troops = no }
		annex_country = { target = PRK transfer_troops = no }
		annex_country = { target = FSP transfer_troops = no }
		annex_country = { target = ISS transfer_troops = no }
		annex_country = { target = KHP transfer_troops = no }
		annex_country = { target = AUS transfer_troops = no }
		annex_country = { target = LHH transfer_troops = no }
		annex_country = { target = SSN transfer_troops = no }
		annex_country = { target = OKL transfer_troops = no }
		annex_country = { target = AGS transfer_troops = no }
		annex_country = { target = DSG transfer_troops = no }
		annex_country = { target = KLB transfer_troops = no }
		annex_country = { target = KSS transfer_troops = no }
		annex_country = { target = SSF transfer_troops = no }
		annex_country = { target = APF transfer_troops = no }
		annex_country = { target = OER transfer_troops = no }
		annex_country = { target = FHH transfer_troops = no }

		remove_dynamic_modifier = {
			modifier = HGR_ss_idealist_support
		}
		remove_dynamic_modifier = {
			modifier = HGR_ss_pragmatist_support
		}
		remove_dynamic_modifier = {
			modifier = HGR_militarist_support
		}
		remove_dynamic_modifier = {
			modifier = HGR_moderate_support
		}
		remove_dynamic_modifier = {
			modifier = HGR_native_support
		}
		remove_ideas = HGR_Rogue_Element

		set_faction_name = Einheitspakt
	}
}

##############################################################################################################
#                                                 HimmlerBOT                                                 #
# https://cdn.discordapp.com/attachments/673283765434449971/767136973835075634/himmlersevilplandontshare.png #
##############################################################################################################

HimmlerBOT = {
	BRG = {
		log = "[GetDateText]: [Root.GetName]: HimmlerBOT - START"

		# Daily effects, mostly for incrementing some variables
		log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DAILY EFFECTS"
		add_to_variable = { HimmlerBOT_Days_Counter = 1 }
		add_to_variable = { HimmlerBOT_Week_Check = 1 }
		add_to_variable = { HimmlerBOT_Month_Check = 1 }

		#Update Dynmaic Modifiers

		GER = {
			if = {
				limit = {
					has_dynamic_modifier = {
						modifier = HGR_ss_idealist_support
					}
				}
				HGR_do_ss_idealist_modifier_math = yes
			}
			if = {
				limit = {
					has_dynamic_modifier = {
						modifier = HGR_ss_pragmatist_support
					}
				}
				HGR_do_ss_pragmatist_modifier_math = yes
			}
			if = {
				limit = {
					has_dynamic_modifier = {
						modifier = HGR_militarist_support
					}
				}
				HGR_do_militarist_modifier_math = yes
			}
			if = {
				limit = {
					has_dynamic_modifier = {
						modifier = HGR_moderate_support
					}
				}
				HGR_do_moderate_modifier_math = yes
			}
			if = {
				limit = {
					has_dynamic_modifier = {
						modifier = HGR_native_support
					}
				}
				HGR_do_native_modifier_math = yes
			}
		}

		# Weekly effects, this is where most of Himmler's influence stuff will happen
		if = {
			limit = {
				check_variable = { HimmlerBOT_Week_Check = 7 }
			}
			add_to_variable = { HimmlerBOT_Weeks_Counter = 1 }
			log = "[GetDateText]: [Root.GetName]: HimmlerBOT - WEEKLY EFFECTS"

			if = { # Annex Charlemagne after 3 weeks
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter = 3 }
					PIC = { exists = yes }
				}
				annex_country = {
					target = PIC
					transfer_troops = yes
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - ANNEX PIC"
			}
			if = { # Annex Langemarck after 4 weeks
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter = 4 }
					FLR = { exists = yes }
				}
				annex_country = {
					target = FLR
					transfer_troops = yes
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - ANNEX FLR"
			}
			if = { # Annex Belgium after 7 weeks if Heydrich hasn't done anything
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter = 7 }
					GER = { NOT = { has_completed_focus = HGR_degrelle_gambit } }
					BEL = { exists = yes }
				}
				annex_country = {
					target = BEL
					transfer_troops = yes
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - ANNEX BEL"
			}
			else_if = { # Declare war on Belgium after 7 weeks if Heydrich hasn't done enough
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter = 7 }
					BEL = { check_variable = { HGR_Influence_Balance < 20 } }
					BEL = { exists = yes }
				}
				declare_war_on = {
					target = BEL
					type = annex_everything
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON BEL"
			}
			if = { # Begin influencing Holland after 2 months, annex in about 3
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter > 11 }
					HOL = { exists = yes }
					HOL = { 
						has_country_leader = {
							character = HOL_henk_feldmeijer
							ruling_only = yes
						}
					}
				}
				if = {
					limit = { GER = { has_completed_focus = HGR_dog_in_the_west } }
					HOL = { increase_Himmler_influence_medium = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE HOL MEDIUM"
				}
				else = {
					HOL = { increase_Himmler_influence_small = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE HOL SMALL"
				}
			}
			if = { # Begin influencing SSL during month 4
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter > 15 }
					SSL = { exists = yes }
				}
				SSL = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE SSL MEDIUM"
			}
			if = { # If SSL doesn't exist, divert efforts to SSW
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter > 15 }
					SSL = { exists = no }
					NOT = { SSL = { exists = no } SSW = { exists = no } }
				}
				SSW = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE SSW SMALL, SSL GONE"
			}
			if = { # Begin influencing SSW during month 5
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter > 19 }
					SSW = { exists = yes }
				}
				SSW = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE SSW MEDIUM"
			}
			if = { # If SSW doesn't exist, divert efforts to SSL
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter > 19 }
					SSW = { exists = no }
					NOT = { SSL = { exists = no } SSW = { exists = no } }
				}
				SSL = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE SSL SMALL, SSW GONE"
			}
			if = { # After the guys above are dealt with and it is month 6, annex LHH and start moving into Germany
				limit = {
					OR = {
						SSL = { exists = no }
						SSL = { is_in_faction_with = GER }
						SSL = { is_in_faction_with = BRG }
					}
					OR = {
						SSW = { exists = no }
						SSW = { is_in_faction_with = GER }
						SSW = { is_in_faction_with = BRG }
					}
					OR = {
						HOL = { exists = no }
						HOL = { is_in_faction_with = GER }
						HOL = { is_in_faction_with = BRG }
					}
					LHH = { exists = yes }
					check_variable = { HimmlerBOT_Weeks_Counter > 23 }
				}
				annex_country = {
					target = LHH
					transfer_troops = yes
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - ANNEX LHH"
			}
			if = { # Pick DSH or AUS to influence based on who is closer to being aligned, otherwise go AUS
				limit = {
					LHH = { exists = no }
					check_variable = { HimmlerBOT_Weeks_Counter > 23 }
					NOT = { has_country_flag = HGR_Himmler_Chose_AUS_DSH }
				}
				if = {
					limit = { check_variable = { AUS.HGR_Influence_Balance < DSH.HGR_Influence_Balance } }
					set_country_flag = HGR_Himmler_Influence_AUS_First
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - CHOSE TO INFLUENCE AUS FIRST"
				}
				else_if = {
					limit = { check_variable = { AUS.HGR_Influence_Balance > DSH.HGR_Influence_Balance } }
					set_country_flag = HGR_Himmler_Influence_DSH_First
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - CHOSE TO INFLUENCE DSH FIRST"
				}
				else = {
					set_country_flag = HGR_Himmler_Influence_AUS_First
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - CHOSE TO INFLUENCE AUS FIRST"
				}
				set_country_flag = HGR_Himmler_Chose_AUS_DSH
			}
			if = { # If going for AUS first, influence them
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_AUS_First
					NOT = { AUS = { is_in_faction_with = BRG } }
					AUS = { exists = yes }
				}
				AUS = { increase_Himmler_influence_small = yes }
				AUS = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE AUS FIRST"
			}
			else_if = { # If going for AUS first and they're aligned, go for DSH now
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_AUS_First
					AUS = { is_in_faction_with = BRG }
				}
				clr_country_flag = HGR_Himmler_Influence_AUS_First
				set_country_flag = HGR_Himmler_Influence_DSH
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - SWITCH TO DSH INFLUENCE"
			}
			else_if = { # If going for DSH first, influence them
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_DSH_First
					NOT = { DSH = { is_in_faction_with = BRG } }
					DSH = { exists = yes }
				}
				DSH = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE DSH FIRST"
			}
			else_if = { # If going for DSH first and they're aligned, go for AUS now
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_DSH_First
					DSH = { is_in_faction_with = BRG }
				}
				clr_country_flag = HGR_Himmler_Influence_DSH_First
				set_country_flag = HGR_Himmler_Influence_AUS
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - SWITCH TO AUS INFLUENCE"
			}
			else_if = { # Going for AUS second
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_AUS
					NOT = { AUS = { is_in_faction_with = BRG } }
					AUS = { exists = yes }
				}
				AUS = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE AUS"
			}
			else_if = { # Done with AUS
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_AUS
					AUS = { is_in_faction_with = BRG }
				}
				clr_country_flag = HGR_Himmler_Influence_AUS
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DONE WITH AUS"
			}
			else_if = { # Going for DSH second
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_DSH
					NOT = { DSH = { is_in_faction_with = BRG } }
					DSH = { exists = yes }
				}
				DSH = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE DSH"
			}
			else_if = { # Done with DSH
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Influence_DSH
					DSH = { is_in_faction_with = BRG }
				}
				clr_country_flag = HGR_Himmler_Influence_DSH
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DONE WITH DSH"
			}
			if = { # Once those two are good, invade KHP
				limit = {
					LHH = { exists = no }
					OR = {
						DSH = { exists = no }
						DSH = { is_in_faction_with = BRG }
					}
					OR = {
						AUS = { exists = no }
						AUS = { is_in_faction_with = BRG }
					}
					KHP = { exists = yes }
					NOT = { BRG = { has_war_with = KHP } }
					NOT = { GER = { is_neighbor_of = KHP } }
				}
				KHP = { leave_faction = yes }
				declare_war_on = {
					target = KHP
					type = annex_everything
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON KHP"
			}
			if = { # Begin influencing OER as soon as LHH is secured
				limit = {
					LHH = { exists = no }
					OER = { exists = yes }
					OER = { has_country_leader = { character = HWL_Otto_Ernst_Remer ruling_only = yes } }
					check_variable = { HimmlerBOT_Weeks_Counter > 23 }
				}
				OER = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE OER"
			}
			if = { # Declare war on FHH if Heydrich hasn't influenced them after 6 months
				limit = {
					LHH = { exists = no }
					NOT = { FHH = { is_in_faction_with = GER } }
					check_variable = { HimmlerBOT_Weeks_Counter > 27 }
					FHH = { exists = yes }
				}
				declare_war_on = {
					target = FHH
					type = annex_everything
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON FHH"
			}
			if = { # Invade Dönitz one month after OER absorbed if not Heydrich aligned, and not at war with FHH
				limit = {
					LHH = { exists = no }
					NOT = { DSG = { is_in_faction_with = GER } }
					has_country_flag = HGR_Himmler_Invade_Donitz
					check_variable = { HGR_Himmler_Invade_Donitz_Counter > 3 }
					has_war = no
					DSG = { exists = yes }
				}
				declare_war_on = {
					target = DSG
					type = annex_everything
				}
				clr_country_flag = HGR_Himmler_Invade_Donitz
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON DSG"
			}
			else_if = {
				limit = {
					LHH = { exists = no }
					has_country_flag = HGR_Himmler_Invade_Donitz
				}
				add_to_variable = { HGR_Himmler_Invade_Donitz_Counter = 1 }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - ONE WEEK CLOSER TO INVADING DONITZ"
			}
			if = { # Invade FPG after Dönitz and OER if Heydrich hasn't secured them
				limit = {
					LHH = { exists = no }
					DSG = { exists = no }
					OER = { exists = no }
					GER = { NOT = { has_completed_focus = HGR_contact_the_guerrillas } }
					FPG = { exists = yes }
				}
				declare_war_on = {
					target = FPG
					type = annex_everything
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON FPG"
			}
			if = { # Influence AGS after 8 if he hasn't drifted into the faction, influence more the farther away he is
				limit = {
					LHH = { exists = no }
					AGS = { NOT = { is_in_faction_with = BRG } }
					AGS = { exists = yes }
					check_variable = { HimmlerBOT_Weeks_Counter > 31 }
				}
				if = { # Drifted Himmler
					limit = {
						AGS = { check_variable = { HGR_Influence_Balance < 41 } }
						GER = { NOT = { has_completed_focus = HGR_enemies_side_by_side } }
					}
					AGS = { increase_Himmler_influence_tiny = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE AGS SMALL"
				}
				else_if = { # Drifted neutral
					limit = {
						AGS = { check_variable = { HGR_Influence_Balance < 61 } }
						GER = { NOT = { has_completed_focus = HGR_enemies_side_by_side } }
					}
					AGS = { increase_Himmler_influence_small = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE AGS MEDIUM"
				}
				else_if = { # Drifted Heydrich
					limit = {
						AGS = { check_variable = { HGR_Influence_Balance > 60 } }
						GER = { NOT = { has_completed_focus = HGR_enemies_side_by_side } }
					}
					AGS = { increase_Himmler_influence_medium = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE AGS LARGE"
				}
				else_if = { # Heydrich Influenced
					limit = {
						GER = { has_completed_focus = HGR_enemies_side_by_side }
					}
					AGS = { increase_Himmler_influence_small = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE AGS MEDIUM"
				}
			}
			if = { # Influence SSN after 9
				limit = {
					LHH = { exists = no }
					check_variable = { HimmlerBOT_Weeks_Counter > 35 }
					SSN = { exists = yes }
				}
				SSN = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE SSN"
			}
			if = { # Invade OKL after either KHP or SSN, and not at war
				limit = {
					LHH = { exists = no }
					OR = {
						DSH = { exists = no }
						DSH = { is_in_faction_with = BRG }
					}
					OR = {
						AUS = { exists = no }
						AUS = { is_in_faction_with = BRG }
					}
					OR = {
						KHP = { exists = no }
						KHP = { is_in_faction_with = BRG }
						SSN = { exists = no }
						SSN = { is_in_faction_with = BRG }
					}
					OKL = { exists = yes }
					NOT = { OKL = { is_in_faction_with = GER } }
					has_war = no
					check_variable = { HimmlerBOT_Weeks_Counter > 39 }
				}
				declare_war_on = {
					target = OKL
					type = annex_everything
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON OKL"
			}
			if = { # Work on Fegelein after the South is secure (AUS,DSH,SSN,KHP,OKL)
				limit = {
					LHH = { exists = no }
					OR = {
						KHP = { exists = no }
						KHP = { is_in_faction_with = BRG }
					}
					OR = {
						SSN = { exists = no }
						SSN = { is_in_faction_with = BRG }
					}
					OR = {
						AUS = { exists = no }
						AUS = { is_in_faction_with = BRG }
					}
					OR = {
						DSH = { exists = no }
						DSH = { is_in_faction_with = BRG }
					}
					OR = {
						OKL = { exists = no }
						OKL = { is_in_faction_with = BRG }
					}
					check_variable = { HimmlerBOT_Weeks_Counter > 39 }
					SSF = { exists = yes }
				}
				SSF = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE SSF"
			}
			if = { # Pick ISS or APF to influence based on who is closer to being aligned, otherwise go APF
				limit = {
					LHH = { exists = no }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
					NOT = { has_country_flag = HGR_Himmler_Chose_APF_ISS }
				}
				if = {
					limit = { check_variable = { APF.HGR_Influence_Balance < ISS.HGR_Influence_Balance } }
					set_country_flag = HGR_Himmler_Influence_APF_First
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - CHOSE TO INFLUENCE APF FIRST"
				}
				else_if = {
					limit = { check_variable = { APF.HGR_Influence_Balance > ISS.HGR_Influence_Balance } }
					set_country_flag = HGR_Himmler_Influence_ISS_First
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - CHOSE TO INFLUENCE ISS FIRST"
				}
				else = {
					set_country_flag = HGR_Himmler_Influence_APF_First
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - CHOSE TO INFLUENCE APF FIRST"
				}
				set_country_flag = HGR_Himmler_Chose_APF_ISS
			}
			if = { # If going for APF first, influence them
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_APF_First
					NOT = { APF = { is_in_faction_with = BRG } }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
					APF = { exists = yes }
				}
				APF = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE APF FIRST"
			}
			else_if = { # If going for APF first and they're aligned, go for ISS now
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_APF_First
					APF = { is_in_faction_with = BRG }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
				}
				clr_country_flag = HGR_Himmler_Influence_APF_First
				set_country_flag = HGR_Himmler_Influence_ISS
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - SWITCH TO ISS INFLUENCE"
			}
			else_if = { # If going for ISS first, influence them
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_ISS_First
					NOT = { ISS = { is_in_faction_with = BRG } }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
					ISS = { exists = yes }
				}
				ISS = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE ISS FIRST"
			}
			else_if = { # If going for ISS first and they're aligned, go for APF now
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_ISS_First
					ISS = { is_in_faction_with = BRG }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
				}
				clr_country_flag = HGR_Himmler_Influence_ISS_First
				set_country_flag = HGR_Himmler_Influence_APF
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - SWITCH TO APF INFLUENCE"
			}
			else_if = { # Going for APF second
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_APF
					NOT = { APF = { is_in_faction_with = BRG } }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
					APF = { exists = yes }
				}
				APF = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE APF"
			}
			else_if = { # Done with APF
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_APF
					APF = { is_in_faction_with = BRG }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
				}
				clr_country_flag = HGR_Himmler_Influence_APF
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DONE WITH APF"
			}
			else_if = { # Going for ISS second
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_ISS
					NOT = { ISS = { is_in_faction_with = BRG } }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
					ISS = { exists = yes }
				}
				ISS = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE ISS"
			}
			else_if = { # Done with ISS
				limit = {
					LHH = { exists = no }
					OR = {
						SSF = { exists = no }
						SSF = { is_in_faction_with = BRG }
					}
					has_country_flag = HGR_Himmler_Influence_ISS
					ISS = { is_in_faction_with = BRG }
					check_variable = { HimmlerBOT_Weeks_Counter > 43 }
				}
				clr_country_flag = HGR_Himmler_Influence_ISS
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DONE WITH ISS"
			}
			if = { # Handle the Kommandostaat depending on the leader, after APF and ISS
				limit = {
					LHH = { exists = no }
					OR = {
						APF = { exists = no }
						APF = { is_in_faction_with = BRG }
					}
					OR = {
						ISS = { exists = no }
						ISS = { is_in_faction_with = BRG }
					}
					KSS = { exists = yes }
					check_variable = { HimmlerBOT_Weeks_Counter > 51 }
				}
				if = { # If Hausser is leading the KSS, annex
					limit = {
						GER = { has_country_flag = KSS_Hausser }
						KSS = { has_country_leader = { character = HWL_Paul_Hausser ruling_only = yes } }
					}
					annex_country = {
						target = KSS
						transfer_troops = yes
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - ANNEX KSS"
				}
				if = { # If Stadler is leading the KSS, influence
					limit = {
						GER = { has_country_flag = KSS_Stadler }
						KSS = { has_country_leader = { character = HWL_Sylvester_Stadler ruling_only = yes } }
					}
					KSS = { increase_Himmler_influence_small = yes }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE KSS"
				}
				if = { # If Gille is leading the KSS, and not in Heydrich's faction, invade
					limit = {
						GER = { has_country_flag = KSS_Gille }
						KSS = { has_country_leader = { character = HWL_Herbert_Otto_Gille ruling_only = yes } }
						KSS = { NOT = { is_in_faction_with = GER } }
					}
					declare_war_on = {
						target = KSS
						type = annex_everything
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECLARE ON KSS"
				}
			}
			if = { # PRK will be gone at this point unless Heydrich stepped in, so just influence FSP and KLB to clean up if they're alive
				limit = {
					LHH = { exists = no }
					PRK = { exists = no }
					OR = {
						KSS = { exists = no }
						KSS = { is_in_faction_with = GER }
					}
					check_variable = { HimmlerBOT_Weeks_Counter > 57 }
					OR = {
						KLB = { exists = yes }
						FSP = { exists = yes }
					}
				}
				KLB = { increase_Himmler_influence_medium = yes }
				FSP = { increase_Himmler_influence_medium = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - INFLUENCE KLB AND FSP"
			}
			if = { # Dönitz failsafe
				limit = {
					LHH = { exists = no }
					DSG = { exists = yes }
					DSG = { NOT = { is_in_faction_with = GER } }
					check_variable = { HimmlerBOT_Weeks_Counter > 57 }
					BRG = { NOT = { has_country_flag = HGR_Himmler_Invade_Donitz } }
				}
				BRG = { set_country_flag = HGR_Himmler_Invade_Donitz }
			}

			if = { # Poland tags in
				limit = {
					GER = { has_war_with = PRK }
					FSP = { has_war_with = PRK }
				}
				POL = {
					declare_war_on = {
						target = GER
						type = annex_everything
					}
				}
				POL = {
					declare_war_on = {
						target = FSP
						type = annex_everything
					}
				}
			}

			### NORMAL DRIFTS ###

			if = { # AGS pre-Influence SS Drift
				limit = {
					AGS = { exists = yes }
					GER = { NOT = { has_completed_focus = HGR_enemies_side_by_side } }
				}
				AGS = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT AGS 1"
			}
			else_if = { # AGS Influence SS Drift
				limit = {
					AGS = { exists = yes }
					GER = { has_completed_focus = HGR_enemies_side_by_side }
				}
				AGS = { increase_Himmler_influence_tiny = yes }
				AGS = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT AGS 2"
			}
			if = { # SSW Drift
				limit = {
					SSW = { exists = yes }
				}
				SSW = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT SSW"
			}
			if = { # SSL Drift
				limit = {
					SSL = { exists = yes }
				}
				SSL = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT SSL"
			}
			if = { # SSF Drift
				limit = {
					SSF = { exists = yes }
				}
				SSF = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT SSF"
			}
			if = { # KLB Drift
				limit = {
					KLB = { exists = yes }
				}
				KLB = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT KLB"
			}
			if = { # FSP Drift
				limit = {
					FSP = { exists = yes }
				}
				FSP = { increase_Himmler_influence_tiny = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT FSP"
			}
			if = { # PRK Neutral Drift
				limit = {
					PRK = { exists = yes }
					PRK = { check_variable = { HGR_Influence_Balance > 55 } }
				}
				PRK = { increase_Himmler_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT PRK DOWN"
			}
			else_if = { # PRK Neutral Drift
				limit = {
					PRK = { exists = yes }
					PRK = { check_variable = { HGR_Influence_Balance < 45 } }
				}
				PRK = { increase_Heydrich_influence_small = yes }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DRIFT PRK UP"
			}

			### NORMAL DRIFTS ###

			### HEYDRICH COALITION DRIFTS ###

			GER = {
				clamp_variable = {
					var = SSHardlinerOpinion
					max = 100
					min = 0
				}
				clamp_variable = {
					var = SSModerateOpinion
					max = 100
					min = 0
				}
				clamp_variable = {
					var = MilitaristOpinion
					max = 100
					min = 0
				}
				clamp_variable = {
					var = ModerateOpinion
					max = 100
					min = 0
				}
				clamp_variable = {
					var = NativeOpinion
					max = 100
					min = 0
				}

				# Each has 5 categories: 0-20, 21-40, 41-60, 61-80, 81-100
				# 0-20 drift away large (3), 21-40 drift away small (1), 41-60 nothing, 61-80 drift closer small (1), 81-100 drift closer large (3)

				# Could possibly make it impact the influence multiplier as well?

				if = {
					limit = { check_variable = { SSHardlinerOpinion > 80 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSHardlinerOpinion IS ABOVE 80"
					if = {
						limit = { FLR = { check_variable = { HGR_Influence_Balance > 59 } } }
						FLR = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { PIC = { check_variable = { HGR_Influence_Balance > 59 } } }
						PIC = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSL = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSL = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSW = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSW = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { LHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						LHH = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { AGS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AGS = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { KHP = { check_variable = { HGR_Influence_Balance > 59 } } }
						KHP = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSN = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSN = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { KLB = { check_variable = { HGR_Influence_Balance > 59 } } }
						KLB = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { FSP = { check_variable = { HGR_Influence_Balance > 59 } } }
						FSP = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { SSHardlinerOpinion > 60 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSHardlinerOpinion IS ABOVE 60"
					if = {
						limit = { FLR = { check_variable = { HGR_Influence_Balance > 59 } } }
						FLR = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { PIC = { check_variable = { HGR_Influence_Balance > 59 } } }
						PIC = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSL = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSL = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSW = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSW = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { LHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						LHH = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { AGS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AGS = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { KHP = { check_variable = { HGR_Influence_Balance > 59 } } }
						KHP = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSN = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSN = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { KLB = { check_variable = { HGR_Influence_Balance > 59 } } }
						KLB = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { FSP = { check_variable = { HGR_Influence_Balance > 59 } } }
						FSP = { increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { SSHardlinerOpinion > 40 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSHardlinerOpinion IS ABOVE 40"
					# Nothing
				}
				else_if = {
					limit = { check_variable = { SSHardlinerOpinion > 20 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSHardlinerOpinion IS ABOVE 20"
					if = {
						limit = { FLR = { check_variable = { HGR_Influence_Balance > 59 } } }
						FLR = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { PIC = { check_variable = { HGR_Influence_Balance > 59 } } }
						PIC = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSL = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSL = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSW = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSW = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { LHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						LHH = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { AGS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AGS = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { KHP = { check_variable = { HGR_Influence_Balance > 59 } } }
						KHP = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSN = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSN = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { KLB = { check_variable = { HGR_Influence_Balance > 59 } } }
						KLB = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { FSP = { check_variable = { HGR_Influence_Balance > 59 } } }
						FSP = { increase_Himmler_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { SSHardlinerOpinion > -1 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSHardlinerOpinion IS ABOVE 0"
					if = {
						limit = { FLR = { check_variable = { HGR_Influence_Balance > 59 } } }
						FLR = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { PIC = { check_variable = { HGR_Influence_Balance > 59 } } }
						PIC = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSL = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSL = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSW = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSW = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { LHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						LHH = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { AGS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AGS = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { KHP = { check_variable = { HGR_Influence_Balance > 59 } } }
						KHP = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSN = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSN = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { KLB = { check_variable = { HGR_Influence_Balance > 59 } } }
						KLB = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { FSP = { check_variable = { HGR_Influence_Balance > 59 } } }
						FSP = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
				}

				if = {
					limit = { check_variable = { SSModerateOpinion > 80 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSModerateOpinion IS ABOVE 80"
					if = {
						limit = { DSH = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSH = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { APF = { check_variable = { HGR_Influence_Balance > 59 } } }
						APF = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSF = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSF = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { KSS = { check_variable = { HGR_Influence_Balance > 59 } } }
						KSS = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { AUS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AUS = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { SSModerateOpinion > 60 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSModerateOpinion IS ABOVE 60"
					if = {
						limit = { DSH = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSH = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { APF = { check_variable = { HGR_Influence_Balance > 59 } } }
						APF = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { SSF = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSF = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { KSS = { check_variable = { HGR_Influence_Balance > 59 } } }
						KSS = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { AUS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AUS = { increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { SSModerateOpinion > 40 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSModerateOpinion IS ABOVE 40"
					# Nothing
				}
				else_if = {
					limit = { check_variable = { SSModerateOpinion > 20 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSModerateOpinion IS ABOVE 20"
					if = {
						limit = { DSH = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSH = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { APF = { check_variable = { HGR_Influence_Balance > 59 } } }
						APF = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSF = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSF = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { KSS = { check_variable = { HGR_Influence_Balance > 59 } } }
						KSS = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { AUS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AUS = { increase_Himmler_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { SSModerateOpinion > -1 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER SSModerateOpinion IS ABOVE 0"
					if = {
						limit = { DSH = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSH = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { APF = { check_variable = { HGR_Influence_Balance > 59 } } }
						APF = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { SSF = { check_variable = { HGR_Influence_Balance > 59 } } }
						SSF = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { KSS = { check_variable = { HGR_Influence_Balance > 59 } } }
						KSS = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { AUS = { check_variable = { HGR_Influence_Balance > 59 } } }
						AUS = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
				}

				if = {
					limit = { check_variable = { MilitaristOpinion > 80 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER MilitaristOpinion IS ABOVE 80"
					if = {
						limit = { OER = { check_variable = { HGR_Influence_Balance > 59 } } }
						OER = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { DSG = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSG = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { ISS = { check_variable = { HGR_Influence_Balance > 59 } } }
						ISS = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { MilitaristOpinion > 60 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER MilitaristOpinion IS ABOVE 60"
					if = {
						limit = { OER = { check_variable = { HGR_Influence_Balance > 59 } } }
						OER = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { DSG = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSG = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { ISS = { check_variable = { HGR_Influence_Balance > 59 } } }
						ISS = { increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { MilitaristOpinion > 40 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER MilitaristOpinion IS ABOVE 40"
					# Nothing
				}
				else_if = {
					limit = { check_variable = { MilitaristOpinion > 20 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER MilitaristOpinion IS ABOVE 20"
					if = {
						limit = { OER = { check_variable = { HGR_Influence_Balance > 59 } } }
						OER = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { DSG = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSG = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { ISS = { check_variable = { HGR_Influence_Balance > 59 } } }
						ISS = { increase_Himmler_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { MilitaristOpinion > -1 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER MilitaristOpinion IS ABOVE 0"
					if = {
						limit = { OER = { check_variable = { HGR_Influence_Balance > 59 } } }
						OER = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { DSG = { check_variable = { HGR_Influence_Balance > 59 } } }
						DSG = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { ISS = { check_variable = { HGR_Influence_Balance > 59 } } }
						ISS = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
				}

				if = {
					limit = { check_variable = { ModerateOpinion > 80 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER ModerateOpinion IS ABOVE 80"
					if = {
						limit = { FHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						FHH = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { OKL = { check_variable = { HGR_Influence_Balance > 59 } } }
						OKL = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { FPG = { check_variable = { HGR_Influence_Balance > 59 } } }
						FPG = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { ModerateOpinion > 60 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER ModerateOpinion IS ABOVE 60"
					if = {
						limit = { FHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						FHH = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { OKL = { check_variable = { HGR_Influence_Balance > 59 } } }
						OKL = { increase_Heydrich_influence_tiny = yes }
					}
					if = {
						limit = { FPG = { check_variable = { HGR_Influence_Balance > 59 } } }
						FPG = { increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { ModerateOpinion > 40 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER ModerateOpinion IS ABOVE 40"
					# Nothing
				}
				else_if = {
					limit = { check_variable = { ModerateOpinion > 20 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER ModerateOpinion IS ABOVE 20"
					if = {
						limit = { FHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						FHH = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { OKL = { check_variable = { HGR_Influence_Balance > 59 } } }
						OKL = { increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { FPG = { check_variable = { HGR_Influence_Balance > 59 } } }
						FPG = { increase_Himmler_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { ModerateOpinion > -1 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER ModerateOpinion IS ABOVE 0"
					if = {
						limit = { FHH = { check_variable = { HGR_Influence_Balance > 59 } } }
						FHH = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { OKL = { check_variable = { HGR_Influence_Balance > 59 } } }
						OKL = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
					if = {
						limit = { FPG = { check_variable = { HGR_Influence_Balance > 59 } } }
						FPG = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
				}

				if = {
					limit = { check_variable = { NativeOpinion > 80 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER NativeOpinion IS ABOVE 80"
					if = {
						limit = { PRK = { check_variable = { HGR_Influence_Balance > 59 } } }
						PRK = { increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { NativeOpinion > 60 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER NativeOpinion IS ABOVE 60"
					if = {
						limit = { PRK = { check_variable = { HGR_Influence_Balance > 59 } } }
						PRK = { increase_Heydrich_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { NativeOpinion > 40 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER NativeOpinion IS ABOVE 40"
					# Nothing
				}
				else_if = {
					limit = { check_variable = { NativeOpinion > 20 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER NativeOpinion IS ABOVE 20"
					if = {
						limit = { PRK = { check_variable = { HGR_Influence_Balance > 59 } } }
						PRK = { increase_Himmler_influence_tiny = yes }
					}
				}
				else_if = {
					limit = { check_variable = { NativeOpinion > -1 } }
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER NativeOpinion IS ABOVE 0"
					if = {
						limit = { PRK = { check_variable = { HGR_Influence_Balance > 59 } } }
						PRK = { increase_Himmler_influence_tiny = yes increase_Himmler_influence_tiny = yes }
					}
				}
			}

			### HEYDRICH COALITION DRIFTS ###

			### FACTION AND ANNEXATION CHECKS ###

			if = { # Once the Burgundian breakaways are dealt with, start normal annexing/faction procedure
				limit = {
					check_variable = { HimmlerBOT_Weeks_Counter > 7 }
				}
				every_country = { # Check to add nations to Burgundy's faction
					limit = {
						has_country_flag = HGR_Warlord_Nation
						check_variable = { HGR_Influence_Balance < 6 }
						has_war = no
					}
					if = {
						limit = {
							tag = PRK
						}
						# They don't join
					}
					else = {
						BRG = {
							add_to_faction = PREV
						}
						add_ideas = Anti_Heydrich
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - BRG - ADD [THIS.GetName] TO FACTION"
				}
				every_country = { # Check to annex nations into Burgundy
					limit = {
						has_country_flag = HGR_Warlord_Nation
						is_neighbor_of = BRG
						is_in_faction_with = BRG
						NOT = { tag = LHH } # Handled separately once other neighbors are secure
						has_war = no
					}
					every_unit_leader = {
						limit = { has_unit_leader_flag = HGR_Leader }
						set_nationality = BRG
					}
					BRG = {
						annex_country = {
							target = PREV
							transfer_troops = yes
						}
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - BRG - ANNEX [THIS.GetName]"
					if = {
						limit = {
							tag = OER
							BRG = { NOT = { has_country_flag = HGR_Himmler_Invade_Donitz } }
							DSG = { exists = yes }
						}
						BRG = { set_country_flag = HGR_Himmler_Invade_Donitz }
						log = "[GetDateText]: [Root.GetName]: HimmlerBOT - SET DONITZ INVASION FLAG"
					}
				}
			}
			every_country = { # Check to annex nations into Germany if they're already in the faction
				limit = {
					has_country_flag = HGR_Warlord_Nation
					is_neighbor_of = GER
					is_in_faction_with = GER
					has_war = no
				}
				if = {
					limit = {
						tag = FSP
						PRK = { exists = yes }
					}
					# They don't join
				}
				else_if = {
					limit = {
						tag = POL
					}
					# They don't join
				}
				else = {
					every_unit_leader = {
						limit = { has_unit_leader_flag = HGR_Leader }
						set_nationality = GER
					}
					GER = {
						annex_country = {
							target = PREV
							transfer_troops = yes
						}
					}
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - GER - ANNEX [THIS.GetName]"
			}

			### FACTION AND ANNEXATION CHECKS ###

			set_variable = { HimmlerBOT_Week_Check = 0 }
		}

		# Monthly effects, generally for AI changes or bigger stuff
		if = {
			limit = {
				check_variable = { HimmlerBOT_Month_Check = 30 }
			}
			add_to_variable = { HimmlerBOT_Months_Counter = 1 }
			log = "[GetDateText]: [Root.GetName]: HimmlerBOT - MONTHLY EFFECTS"

			random_list = {
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.2 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - DECREASE HEYDRICH MULTI MED"
				}
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						add_to_variable = { HGR_Heydrich_Influence_Bonus_Mult = -0.1 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - DECREASE HEYDRICH MULTI SMALL"
				}
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						add_to_variable = { HGR_Himmler_Influence_Bonus_Mult = 0.1 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - INCREASE HIMMLER MULTI SMALL"
				}
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						add_to_variable = { HGR_Himmler_Influence_Bonus_Mult = 0.2 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - INCREASE HIMMLER MULTI MED"
				}
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						add_to_variable = { HGR_Himmler_Influence_Bonus_Mult = 0.3 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - INCREASE HIMMLER MULTI LARGE"
				}
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						if = {
							limit = {
								any_owned_state = { has_state_flag = has_missile_in_state }
							}
							add_to_variable = { HGR_Influence_Balance = -2 }
						}
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - INCREASE HIMMLER OPINION MISSILE HOLDERS SMALL"
				}
				10 = {
					every_country = {
						limit = { has_country_flag = HGR_Warlord_Nation }
						if = {
							limit = {
								any_owned_state = { has_state_flag = has_missile_in_state }
							}
							add_to_variable = { HGR_Influence_Balance = -4 }
						}
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - INCREASE HIMMLER OPINION MISSILE HOLDERS MED"
				}
				10 = {
					GER = {
						add_to_variable = { SSHardlinerOpinion = -10 }
						add_to_variable = { SSModerateOpinion = -10 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - DECREASE HEYDRICH SS FACTIONS OPINION"
				}
				10 = {
					GER = {
						add_to_variable = { SSHardlinerOpinion = -8 }
						add_to_variable = { SSModerateOpinion = -8 }
						add_to_variable = { MilitaristOpinion = -4 }
					}
					log = "[GetDateText]: [Root.GetName]: HimmlerBOT - RANDOM EFFECT - DECREASE HEYDRICH MISC FACTIONS OPINION"
				}
			}

			if = {
				limit = {
					OR = {
						FLR = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						PIC = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						SSL = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						SSW = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						LHH = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						AGS = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						KHP = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						SSN = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						KLB = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						FSP = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
					}
				}
				add_to_variable = { SSHardlinerOpinion = -3 }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECAY GER SSHardlinerOpinion"
			}
			if = {
				limit = {
					OR = {
						DSH = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						APF = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						SSF = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						KSS = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						AUS = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
					}
				}
				add_to_variable = { SSModerateOpinion = -3 }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECAY GER SSModerateOpinion"
			}
			if = {
				limit = {
					OR = {
						OER = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						DSG = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						ISS = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
					}
				}
				add_to_variable = { MilitaristOpinion = -3 }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECAY GER MilitaristOpinion"
			}
			if = {
				limit = {
					OR = {
						FHH = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						OKL = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
						FPG = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
					}
				}
				add_to_variable = { ModerateOpinion = -3 }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECAY GER ModerateOpinion"
			}
			if = {
				limit = {
					OR = {
						PRK = {
							check_variable = { HGR_Influence_Balance > 59 }
						}
					}
				}
				add_to_variable = { NativeOpinion = -3 }
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - DECAY GER NativeOpinion"
			}
			if = { # FSP declares on PRK after a year, or if the slaves join Heydrich
				limit = {
					OR = {
						check_variable = { HimmlerBOT_Months_Counter = 12 }
						PRK = { is_in_faction_with = GER }
					}
				}
				FSP = {
					declare_war_on = {
						target = PRK
						type = annex_everything
					}
				}
				log = "[GetDateText]: [Root.GetName]: HimmlerBOT - FSP DECLARE ON PRK"
				KLB = { # KLB joins if not Heydrich aligned
					if = {
						limit = {
							NOT = { is_in_faction_with = GER }
							check_variable = { HGR_Influence_Balance < 61 }
						}
						declare_war_on = {
							target = PRK
							type = annex_everything
						}
						log = "[GetDateText]: [Root.GetName]: HimmlerBOT - KLB DECLARE ON PRK"
					}
				}
			}

			set_variable = { HimmlerBOT_Month_Check = 0 }
		}

		log = "[GetDateText]: [Root.GetName]: HimmlerBOT - COMPLETE"
	}
}
